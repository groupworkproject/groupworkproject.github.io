
function visibleChangeHandler(){var e,t;typeof document.hidden!="undefined"?(e="hidden",visibilityChangeEvent="visibilitychange"):typeof document.mozHidden!="undefined"?(e="mozHidden",visibilityChangeEvent="mozvisibilitychange"):typeof document.msHidden!="undefined"?(e="msHidden",visibilityChangeEvent="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(e="webkitHidden",visibilityChangeEvent="webkitvisibilitychange"),document[e]?window.isWindowActive=!1:window.isWindowActive=!0}var pubblebot;(function(){if(!pubblebot||!pubblebot.requirejs){pubblebot?require=pubblebot:pubblebot={};var requirejs,require,define;(function(global){function isFunction(e){return e instanceof Function}function isArray(e){return e instanceof Array}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return t in e}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t!="string"?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function v(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function m(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,m=t&&t.split("/"),g=m,y=o.map,b=y&&y["*"];e&&e.charAt(0)==="."&&(t?(getOwn(o.pkgs,t)?g=m=[t]:g=m.slice(0,m.length-1),e=g.concat(e.split("/")),v(e),i=getOwn(o.pkgs,r=e[0]),e=e.join("/"),i&&e===r+"/"+i.main&&(e=r)):e.indexOf("./")===0&&(e=e.substring(2)));if(n&&y&&(m||b)){u=e.split("/");for(a=u.length;a>0;a-=1){l=u.slice(0,a).join("/");if(m)for(f=m.length;f>0;f-=1){s=getOwn(y,m.slice(0,f).join("/"));if(s){s=getOwn(s,l);if(s){c=s,h=a;break}}}if(c)break;!p&&b&&getOwn(b,l)&&(p=getOwn(b,l),d=a)}!c&&p&&(c=p,h=d),c&&(u.splice(0,h,c),e=u.join("/"))}return e}function g(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),1})}function y(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return g(e),t.shift(),r.require.undef(e),r.require([e]),1}function b(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function w(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,v=!0,g="";return e||(v=!1,e="_@r"+(p+=1)),a=b(e),f=a[0],e=a[1],f&&(f=m(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?g=o.normalize(e,function(e){return m(e,l,i)}):g=m(e,l,i):(g=m(e,l,i),a=b(g),f=a[0],g=a[1],n=!0,s=r.nameToUrl(g))),u=f&&!o&&!n?"_unnormalized"+(d+=1):"",{prefix:f,name:g,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:v,id:(f?f+"!"+g:g)+u}}function E(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function S(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=E(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function x(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function T(){globalDefQueue.length&&(apsp.apply(l,[l.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function N(e){delete u[e],delete a[e]}function C(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):C(o,t,n))}),n[r]=!0)}function k(){var e,n,i,u,f=o.waitSeconds*1e3,l=f&&r.startTime+f<(new Date).getTime(),c=[],h=[],p=!1,d=!0;if(t)return;t=!0,eachProp(a,function(t){e=t.map,n=e.id;if(!t.enabled)return;e.isDefine||h.push(t);if(!t.error)if(!t.inited&&l)y(n)?(u=!0,p=!0):(c.push(n),g(n));else if(!t.inited&&t.fetched&&e.isDefine){p=!0;if(!e.prefix)return d=!1}});if(l&&c.length)return i=makeError("timeout","Load timeout for modules: "+c,null,c),i.contextName=r.contextName,x(i);d&&each(h,function(e){C(e,{},{})}),(!l||u)&&p&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,k()},50)),t=!1}function L(e){hasProp(c,e[0])||E(w(e[0],null,!0)).init(e[1],e[2])}function A(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function O(e){var t=e.currentTarget||e.srcElement;return A(t,r.onScriptLoad,"load","onreadystatechange"),A(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function M(){var e;T();while(l.length){e=l.shift();if(e[0]===null)return x(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));L(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p=1,d=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,n=getOwn(o.pkgs,e.map.id);return t=n?getOwn(o.config,e.map.id+"/"+n.main):getOwn(o.config,e.map.id),t||{}},exports:c[e.map.id]}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&(t=this.module,t&&t.exports!==undefined&&t.exports!==this.exports?s=t.exports:s===undefined&&this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",x(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),N(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=w(e.prefix);this.depMaps.push(n),S(n,"defined",bind(this,function(n){var i,s,a,f=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,c=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(f=n.normalize(f,function(e){return m(e,l,!0)})||""),s=w(e.prefix+"!"+f,this.map.parentMap),S(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&N(e.map.id)}),x(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=w(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),E(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return x(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),c([u],i)}),n.load(e.name,c,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=w(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,S(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&S(e,"error",bind(this,this.errback))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:w,nextTick:req.nextTick,onError:x,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.pkgs,n=o.shim,i={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?t==="map"?(o.map||(o.map={}),mixin(o[t],e,!0,!0)):mixin(o[t],e,!0):o[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),n[t]=e}),o.shim=n),e.packages&&(each(e.packages,function(e){var n;e=typeof e=="string"?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),o.pkgs=t),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=w(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?x(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=w(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:x(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(M(),r.nextTick(function(){M(),p=E(w(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),k()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(m(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,w(e,t,!1,!0).id)},specified:function(e){return e=w(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){T();var n=w(e,t,!0),r=getOwn(u,e);delete c[e],delete h[n.url],delete f[e],r&&(r.events.defined&&(f[e]=r.events),N(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&E(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;T();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);L(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(y(e))return;return x(makeError("nodefine","No define call for "+e,null,[e]))}L([e,i.deps||[],i.exportsFn])}k()},nameToUrl:function(e,t,n){var r,i,s,u,a,f,l,c,h;if(req.jsExtRegExp.test(e))c=e+(t||"");else{r=o.paths,i=o.pkgs,a=e.split("/");for(f=a.length;f>0;f-=1){l=a.slice(0,f).join("/"),s=getOwn(i,l),h=getOwn(r,l);if(h){isArray(h)&&(h=h[0]),a.splice(0,f,h);break}if(s){e===s.name?u=s.location+"/"+s.main:u=s.location,a.splice(0,f,u);break}}c=a.join("/"),c+=t||(/\?/.test(c)||n?"":".js"),c=(c.charAt(0)==="/"||c.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+c}return o.urlArgs?c+((c.indexOf("?")===-1?"?":"&")+o.urlArgs):c},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=O(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=O(e);if(!y(t.id))return x(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.8",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=0;requirejs=undefined,require=undefined,req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],1}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jquery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),pubblebot.requirejs=requirejs,pubblebot.require=require,pubblebot.define=define,pubblebot.require.config({baseUrl:"https://cdn.pubble.io/newui/mod/vendor/",waitSeconds:120,paths:{underscore:"underscore",backbone:"backbone-minx",jQueryPB:"jquery-1.9.1x",text:"text"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jQueryPB"],exports:"Backbone"}}}),pubblebot.require(["app","underscore"],function(e,t){var n,r,i,s=1,o=0,u={},a=navigator.userAgent;if(a.indexOf("Slurp")>-1||a.indexOf("Spider")>-1||a.indexOf("Bot")>-1||a.indexOf("bot")>-1||a.indexOf("spider")>-1||a.indexOf("feedburner")>-1)return!1;e.startup()})}})(),pubblebot.define("main",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.3";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t){return x.isEmpty(t)?[]:x.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length==0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=M(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=""+ ++P;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){n=x.defaults({},n,x.templateSettings);var r=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),i=u+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,x);var a=function(e){return o.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),window.$UScore=x.noConflict()}.call(this),pubblebot.define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(e,t){function _(e){var t=e.length,n=y.type(e);return y.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function P(e){var t=D[e]={};return y.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function j(e,n,r,i){if(!y.acceptData(e))return;var s,o,u=y.expando,a=typeof n=="string",l=e.nodeType,c=l?y.cache:e,h=l?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(l?e[u]=h=f.pop()||y.guid++:h=u),c[h]||(c[h]={},l||(c[h].toJSON=y.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=y.extend(c[h],n):c[h].data=y.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[y.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[y.camelCase(n)])):o=s,o}function F(e,t,n){if(!y.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?y.cache:e,a=o?e[y.expando]:y.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){y.isArray(t)?t=t.concat(y.map(t,y.camelCase)):t in r?t=[t]:(t=y.camelCase(t),t in r?t=[t]:t=t.split(" "));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?q:y.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!q(u[a]))return}o?y.cleanData([e],!0):y.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function I(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(B,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:H.test(r)?y.parseJSON(r):r}catch(s){}y.data(e,n,r)}else r=t}return r}function q(e){var t;for(t in e){if(t==="data"&&y.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function nt(){return!0}function rt(){return!1}function ft(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function lt(e,t,n){t=t||0;if(y.isFunction(t))return y.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return y.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=y.grep(e,function(e){return e.nodeType===1});if(ot.test(t))return y.filter(t,r,!n);t=y.filter(t,r)}return y.grep(e,function(e){return y.inArray(e,t)>=0===n})}function ct(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function At(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ot(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Mt(e){var t=Tt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){var n,r=0;for(;(n=e[r])!=null;r++)y._data(n,"globalEval",!t||y._data(t[r],"globalEval"))}function Dt(e,t){if(t.nodeType!==1||!y.hasData(e))return;var n,r,i,s=y._data(e),o=y._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)y.event.add(t,n,u[n][r])}o.data&&(o.data=y.extend({},o.data))}function Pt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!y.support.noCloneEvent&&t[y.expando]){r=y._data(t);for(i in r.events)y.removeEvent(t,i,r.handle);t.removeAttribute(y.expando)}if(n==="script"&&t.text!==e.text)Ot(t).text=e.text,Mt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),y.support.html5Clone&&e.innerHTML&&!y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&Et.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Ht(e,n){var r,i,s=0,o=typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll(n||"*"):t;if(!o)for(o=[],r=e.childNodes||e;(i=r[s])!=null;s++)!n||y.nodeName(i,n)?o.push(i):y.merge(o,Ht(i,n));return n===t||n&&y.nodeName(e,n)?y.merge([e],o):o}function Bt(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Zt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Yt.length;while(i--){t=Yt[i]+n;if(t in e)return t}return r}function en(e,t){return e=t||e,y.css(e,"display")==="none"||!y.contains(e.ownerDocument,e)}function tn(e,t){var n,r=[],i=0,s=e.length;for(;i<s;i++){n=e[i];if(!n.style)continue;r[i]=y._data(n,"olddisplay"),t?(!r[i]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&en(n)&&(r[i]=y._data(n,"olddisplay",on(n.nodeName)))):!r[i]&&!en(n)&&y._data(n,"olddisplay",y.css(n,"display"))}for(i=0;i<s;i++){n=e[i];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?r[i]||"":"none"}return e}function nn(e,t,n){var r=Xt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function rn(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=y.css(e,n+Gt[s],!0,i)),r?(n==="content"&&(o-=y.css(e,"padding"+Gt[s],!0,i)),n!=="margin"&&(o-=y.css(e,"border"+Gt[s]+"Width",!0,i))):(o+=y.css(e,"padding"+Gt[s],!0,i),n!=="padding"&&(o+=y.css(e,"border"+Gt[s]+"Width",!0,i)));return o}function sn(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=Ft(e),o=y.support.boxSizing&&y.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=jt(e,t,s);if(i<0||i==null)i=e.style[t];if(Vt.test(i))return i;r=o&&(y.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+rn(e,t,n||(o?"border":"content"),r,s)+"px"}function on(e){var t=i,n=Jt[e];if(!n){n=un(e,t);if(n==="none"||!n)It=(It||y("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),It.detach();Jt[e]=n}return n}function un(e,t){var n=y(t.createElement(e)).appendTo(t.body),r=y.css(n[0],"display");return n.remove(),r}function pn(e,t,n,r){var i;if(y.isArray(t))y.each(t,function(t,i){n||fn.test(e)?r(e,i):pn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&y.type(t)==="object")for(i in t)pn(e+"["+i+"]",t[i],n,r);else r(e,t)}function On(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(w)||[];if(y.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Mn(e,t,n,r){function o(u){var a;return i[u]=!0,y.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===kn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function _n(e,n){var r,i,s=y.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);return i&&y.extend(!0,e,i),e}function Dn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Pn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(n in e.converters)o[n.toLowerCase()]=e.converters[n];for(;i=a[++u];)if(i!=="*"){if(f!=="*"&&f!==i){n=o[f+" "+i]||o["* "+i];if(!n)for(r in o){s=r.split(" ");if(s[1]===i){n=o[f+" "+s[0]]||o["* "+s[0]];if(n){n===!0?n=o[r]:o[r]!==!0&&(i=s[0],a.splice(u--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+f+" to "+i}}}f=i}return{state:"success",data:t}}function Rn(){try{return new e.XMLHttpRequest}catch(t){}}function Un(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Qn(){return setTimeout(function(){zn=t}),zn=y.now()}function Gn(e,t){y.each(t,function(t,n){var r=(Kn[t]||[]).concat(Kn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Yn(e,t,n){var r,i,s=0,o=Jn.length,u=y.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=zn||Qn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:y.extend({},t),opts:y.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:zn||Qn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Zn(l,f.opts.specialEasing);for(;s<o;s++){r=Jn[s].call(f,e,l,f.opts);if(r)return r}return Gn(f,l),y.isFunction(f.opts.start)&&f.opts.start.call(e,f),y.fx.timer(y.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Zn(e,t){var n,r,i,s,o;for(n in e){r=y.camelCase(n),i=t[r],s=e[n],y.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=y.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function er(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&en(e);n.queue||(l=y._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,y.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],y.css(e,"display")==="inline"&&y.css(e,"float")==="none"&&(!y.support.inlineBlockNeedsLayout||on(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",y.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Xn.exec(s)){delete t[r],a=a||s==="toggle";if(s===(m?"hide":"show"))continue;v.push(r)}}o=v.length;if(o){u=y._data(e,"fxshow")||y._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?y(e).show():h.done(function(){y(e).hide()}),h.done(function(){var t;y._removeData(e,"fxshow");for(t in d)y.style(e,t,d[t])});for(r=0;r<o;r++)i=v[r],f=h.createTween(i,m?u[i]:0),d[i]=u[i]||y.style(e,i),i in u||(u[i]=f.start,m&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function tr(e,t,n,r,i){return new tr.prototype.init(e,t,n,r,i)}function nr(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Gt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function rr(e){return y.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.jQuery,u=e.$PB,a={},f=[],l="1.9.0",c=f.concat,h=f.push,p=f.slice,d=f.indexOf,v=a.toString,m=a.hasOwnProperty,g=l.trim,y=function(e,t){return new y.fn.init(e,t,n)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,S=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^[\],:{}\s]*$/,N=/(?:^|:|,)(?:\s*\[)+/g,C=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,k=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,L=/^-ms-/,A=/-([\da-z])/gi,O=function(e,t){return t.toUpperCase()},M=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",M,!1),y.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",M),y.ready())};y.fn=y.prototype={jquery:l,constructor:y,init:function(e,n,r){var s,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=S.exec(e);if(s&&(s[1]||!n)){if(s[1]){n=n instanceof y?n[0]:n,y.merge(this,y.parseHTML(s[1],n&&n.nodeType?n.ownerDocument||n:i,!0));if(x.test(s[1])&&y.isPlainObject(n))for(s in n)y.isFunction(this[s])?this[s](n[s]):this.attr(s,n[s]);return this}o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):y.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),y.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return p.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return y.each(this,e,t)},ready:function(e){return y.ready.promise().done(e),this},slice:function(){return this.pushStack(p.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(y.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},y.fn.init.prototype=y.fn,y.extend=y.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!y.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(y.isPlainObject(i)||(s=y.isArray(i)))?(s?(s=!1,o=r&&y.isArray(r)?r:[]):o=r&&y.isPlainObject(r)?r:{},u[n]=y.extend(l,o,i)):i!==t&&(u[n]=i)}return u},y.extend({noConflict:function(t){return e.$PB===y&&(e.$PB=u),t&&e.jQuery===y&&(e.jQuery=o),y},isReady:!1,readyWait:1,holdReady:function(e){e?y.readyWait++:y.ready(!0)},ready:function(e){if(e===!0?--y.readyWait:y.isReady)return;if(!i.body)return setTimeout(y.ready);y.isReady=!0;if(e!==!0&&--y.readyWait>0)return;r.resolveWith(i,[y]),y.fn.trigger&&y(i).trigger("ready").off("ready")},isFunction:function(e){return y.type(e)==="function"},isArray:Array.isArray||function(e){return y.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?a[v.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||y.type(e)!=="object"||e.nodeType||y.isWindow(e))return!1;try{if(e.constructor&&!m.call(e,"constructor")&&!m.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||m.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||i;var r=x.exec(e),s=!n&&[];return r?[t.createElement(r[1])]:(r=y.buildFragment([e],t,s),s&&y(s).remove(),y.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=y.trim(t);if(t&&T.test(t.replace(C,"@").replace(k,"]").replace(N,"")))return(new Function("return "+t))()}y.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&y.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&y.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(L,"ms-").replace(A,O)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=_(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:g&&!g.call("﻿ ")?function(e){return e==null?"":g.call(e)}:function(e){return e==null?"":(e+"").replace(E,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(_(Object(e))?y.merge(n,typeof e=="string"?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(d)return d.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=_(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return c.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),y.isFunction(e)?(i=p.call(arguments,2),s=function(){return e.apply(n||this,i.concat(p.call(arguments)))},s.guid=e.guid=e.guid||y.guid++,s):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(y.type(r)==="object"){s=!0;for(a in r)y.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,y.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(y(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),y.ready.promise=function(t){if(!r){r=y.Deferred();if(i.readyState==="complete")setTimeout(y.ready);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",M,!1),e.addEventListener("load",y.ready,!1);else{i.attachEvent("onreadystatechange",M),e.attachEvent("onload",y.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}y.ready()}}()}}return r.promise(t)},y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()}),n=y(i);var D={};y.Callbacks=function(e){e=typeof e=="string"?D[e]||P(e):y.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&y.each(arguments,function(e,t){var n;while((n=y.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return y.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},y.extend({Deferred:function(e){var t=[["resolve","done",y.Callbacks("once memory"),"resolved"],["reject","fail",y.Callbacks("once memory"),"rejected"],["notify","progress",y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return y.Deferred(function(n){y.each(t,function(t,s){var o=s[0],u=y.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?y.extend(e,r):r}},i={};return r.pipe=r.then,y.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=p.call(arguments),r=n.length,i=r!==1||e&&y.isFunction(e.promise)?r:0,s=i===1?e:y.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?p.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&y.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),y.support=function(){var t,n,r,s,o,u,a,f,l,c,h=i.createElement("div");h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=h.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:h.className!=="t",leadingWhitespace:h.firstChild.nodeType===3,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!u.value,optSelected:o.selected,enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}u=i.createElement("input"),u.setAttribute("value",""),t.input=u.getAttribute("value")==="",u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","t"),u.setAttribute("name","t"),a=i.createDocumentFragment(),a.appendChild(u),t.appendChecked=u.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})h.setAttribute(f="on"+c,"t"),t[c+"Bubbles"]=f in e||h.attributes[f].expando===!1;return h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=h.style.backgroundClip==="content-box",y(function(){var n,r,s,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=i.getElementsByTagName("body")[0];if(!u)return;n=i.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=h.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",l=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=l&&s[0].offsetHeight===0,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=h.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=u.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(h,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(h,null)||{width:"4px"}).width==="4px",r=h.appendChild(i.createElement("div")),r.style.cssText=h.style.cssText=o,r.style.marginRight=r.style.width="0",h.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof h.style.zoom!="undefined"&&(h.innerHTML="",h.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=h.offsetWidth===3,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",t.shrinkWrapBlocks=h.offsetWidth!==3,u.style.zoom=1),u.removeChild(n),n=h=s=r=null}),n=s=a=o=r=u=null,t}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;y.extend({cache:{},expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?y.cache[e[y.expando]]:e[y.expando],!!e&&!q(e)},data:function(e,t,n){return j(e,t,n,!1)},removeData:function(e,t){return F(e,t,!1)},_data:function(e,t,n){return j(e,t,n,!0)},_removeData:function(e,t){return F(e,t,!0)},acceptData:function(e){var t=e.nodeName&&y.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),y.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=y.data(s);if(s.nodeType===1&&!y._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=y.camelCase(i.substring(5)),I(s,i,u[i]));y._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){y.data(this,e)}):y.access(this,function(n){if(n===t)return s?I(s,e,y.data(s,e)):null;this.each(function(){y.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){y.removeData(this,e)})}}),y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=y._data(e,t),n&&(!r||y.isArray(n)?r=y._data(e,t,y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=y.queue(e,t),r=n.length,i=n.shift(),s=y._queueHooks(e,t),o=function(){y.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return y._data(e,n)||y._data(e,n,{empty:y.Callbacks("once memory").add(function(){y._removeData(e,t+"queue"),y._removeData(e,n)})})}}),y.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?y.queue(this[0],e):n===t?this:this.each(function(){var t=y.queue(this,e,n);y._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){y.dequeue(this,e)})},delay:function(e,t){return e=y.fx?y.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=y.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=y._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var R,U,z=/[\t\r\n]/g,W=/\r/g,X=/^(?:input|select|textarea|button|object)$/i,V=/^(?:a|area)$/i,$=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,J=/^(?:checked|selected)$/i,K=y.support.getSetAttribute,Q=y.support.input;y.fn.extend({attr:function(e,t){return y.access(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){y.removeAttr(this,e)})},prop:function(e,t){return y.access(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return e=y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(y.isFunction(e))return this.each(function(t){y(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(w)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(z," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=y.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(y.isFunction(e))return this.each(function(t){y(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(w)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(z," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?y.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return y.isFunction(e)?this.each(function(n){y(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=y(this),u=t,a=e.match(w)||[];while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&y._data(this,"__className__",this.className),this.className=this.className||e===!1?"":y._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(z," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=y.valHooks[s.type]||y.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(W,""):r==null?"":r);return}return i=y.isFunction(e),this.each(function(r){var s,o=y(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":y.isArray(s)&&(s=y.map(s,function(e){return e==null?"":e+""})),n=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(y.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!y.nodeName(n.parentNode,"optgroup"))){t=y(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=y.makeArray(t);return y(e).find("option").each(function(){this.selected=y.inArray(y(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute=="undefined")return y.prop(e,n,r);o=u!==1||!y.isXMLDoc(e),o&&(n=n.toLowerCase(),s=y.attrHooks[n]||($.test(n)?U:R));if(r===t)return s&&o&&"get"in s&&(i=s.get(e,n))!==null?i:(typeof e.getAttribute!="undefined"&&(i=e.getAttribute(n)),i==null?t:i);if(r!==null)return s&&o&&"set"in s&&(i=s.set(e,r,n))!==t?i:(e.setAttribute(n,r+""),r);y.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(w);if(s&&e.nodeType===1)while(n=s[i++])r=y.propFix[n]||n,$.test(n)?!K&&J.test(n)?e[y.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:y.attr(e,n,""),e.removeAttribute(K?n:r)},attrHooks:{type:{set:function(e,t){if(!y.support.radioValue&&t==="radio"&&y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!y.isXMLDoc(e),o&&(n=y.propFix[n]||n,s=y.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):X.test(e.nodeName)||V.test(e.nodeName)&&e.href?0:t}}}}),U={get:function(e,n){var r=y.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Q&&K?i!=null:J.test(n)?e[y.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?y.removeAttr(e,n):Q&&K||!J.test(n)?e.setAttribute(!K&&y.propFix[n]||n,n):e[y.camelCase("default-"+n)]=e[n]=!0,n}};if(!Q||!K)y.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return y.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!y.nodeName(e,"input"))return R&&R.set(e,t,n);e.defaultValue=t}};K||(R=y.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},y.attrHooks.contenteditable={get:R.get,set:function(e,t,n){R.set(e,t===""?!1:t,n)}},y.each(["width","height"],function(e,t){y.attrHooks[t]=y.extend(y.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),y.support.hrefNormalized||(y.each(["href","src","width","height"],function(e,n){y.attrHooks[n]=y.extend(y.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),y.each(["href","src"],function(e,t){y.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),y.support.style||(y.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),y.support.optSelected||(y.propHooks.selected=y.extend(y.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),y.support.enctype||(y.propFix.enctype="encoding"),y.support.checkOn||y.each(["radio","checkbox"],function(){y.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]=y.extend(y.valHooks[this],{set:function(e,t){if(y.isArray(t))return e.checked=y.inArray(y(e).val(),t)>=0}})});var G=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,et=/^(?:focusinfocus|focusoutblur)$/,tt=/^([^.]*)(?:\.(.+)|)$/;y.event={global:{},add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=e.nodeType!==3&&e.nodeType!==8&&y._data(e);if(!g)return;r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=y.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof y=="undefined"||!!e&&y.event.triggered===e.type?t:y.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--){a=tt.exec(n[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),h=y.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=y.event.special[d]||{},c=y.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&y.expr.match.needsContext.test(s),namespace:v.join(".")},o);if(!(p=f[d])){p=f[d]=[],p.delegateCount=0;if(!h.setup||h.setup.call(e,i,v,u)===!1)e.addEventListener?e.addEventListener(d,u,!1):e.attachEvent&&e.attachEvent("on"+d,u)}h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),y.event.global[d]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=y.hasData(e)&&y._data(e);if(!m||!(a=m.events))return;t=(t||"").match(w)||[""],f=t.length;while(f--){u=tt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in a)y.event.remove(e,p+t[f],n,r,!0);continue}c=y.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],(i||v===l.origType)&&(!n||n.guid===l.guid)&&(!u||u.test(l.namespace))&&(!r||r===l.selector||r==="**"&&l.selector)&&(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&y.removeEvent(e,p,m.handle),delete a[p])}y.isEmptyObject(a)&&(delete m.handle,y._removeData(e,"events"))},trigger:function(n,r,s,o){var u,a,f,l,c,h,p,d=[s||i],v=n.type||n,m=n.namespace?n.namespace.split("."):[];a=f=s=s||i;if(s.nodeType===3||s.nodeType===8)return;if(et.test(v+y.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,n=n[y.expando]?n:new y.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=s),r=r==null?[n]:y.makeArray(r,[n]),p=y.event.special[v]||{};if(!o&&p.trigger&&p.trigger.apply(s,r)===!1)return;if(!o&&!p.noBubble&&!y.isWindow(s)){l=p.delegateType||v,et.test(l+v)||(a=a.parentNode);for(;a;a=a.parentNode)d.push(a),f=a;f===(s.ownerDocument||i)&&d.push(f.defaultView||f.parentWindow||e)}u=0;while((a=d[u++])&&!n.isPropagationStopped())n.type=u>1?l:p.bindType||v,h=(y._data(a,"events")||{})[n.type]&&y._data(a,"handle"),h&&h.apply(a,r),h=c&&a[c],h&&y.acceptData(a)&&h.apply&&h.apply(a,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(v!=="click"||!y.nodeName(s,"a"))&&y.acceptData(s)&&c&&s[v]&&!y.isWindow(s)){f=s[c],f&&(s[c]=null),y.event.triggered=v;try{s[v]()}catch(g){}y.event.triggered=t,f&&(s[c]=f)}return n.result},dispatch:function(e){e=y.event.fix(e);var n,r,i,s,o,u=[],a=p.call(arguments),f=(y._data(this,"events")||{})[e.type]||[],l=y.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=y.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(o.namespace))e.handleObj=o,e.data=o.data,i=((y.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.disabled!==!0||e.type!=="click"){i=[];for(r=0;r<a;r++)o=n[r],s=o.selector+" ",i[s]===t&&(i[s]=o.needsContext?y(s,this).index(f)>=0:y.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[y.expando])return e;var t,n,r=e,s=y.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=new y.Event(r),t=o.length;while(t--)n=o[t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(y.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==i.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===i.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=y.extend(new y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?y.event.trigger(i,null,t):y.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},y.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?nt:rt):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||y.now(),this[y.expando]=!0},y.Event.prototype={isDefaultPrevented:rt,isPropagationStopped:rt,isImmediatePropagationStopped:rt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=nt;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=nt;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=nt,this.stopPropagation()}},y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!y.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),y.support.submitBubbles||(y.event.special.submit={setup:function(){if(y.nodeName(this,"form"))return!1;y.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=y.nodeName(n,"input")||y.nodeName(n,"button")?n.form:t;r&&!y._data(r,"submitBubbles")&&(y.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),y._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(y.nodeName(this,"form"))return!1;y.event.remove(this,"._submit")}}),y.support.changeBubbles||(y.event.special.change={setup:function(){if(G.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")y.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),y.event.simulate("change",this,e,!0)});return!1}y.event.add(this,"beforeactivate._change",function(e){var t=e.target;G.test(t.nodeName)&&!y._data(t,"changeBubbles")&&(y.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&y.event.simulate("change",this.parentNode,e,!0)}),y._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return y.event.remove(this,"._change"),!G.test(this.nodeName)}}),y.support.focusinBubbles||y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){y.event.simulate(t,e.target,y.event.fix(e),!0)};y.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),y.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=rt;else if(!i)return this;return s===1&&(o=i,i=function(e){return y().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=y.guid++)),this.each(function(){y.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=rt),this.each(function(){y.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){y.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return y.event.trigger(e,t,n,!0)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){y.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Y.test(t)&&(y.event.fixHooks[t]=y.event.keyHooks),Z.test(t)&&(y.event.fixHooks[t]=y.event.mouseHooks)}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=e&&t&&e.nextSibling;for(;n;n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&t.dir==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.E;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){for(v=0;m=e[v];v++)if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){for(v=0;m=t[v];v++)m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}for(s=V.needsContext.test(e)?-1:o.length-1;s>=0;s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,b,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/\{\s*\[native code\]\s*\}/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(h.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){for(;n=s[i];i++)n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},b=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return(~t.sourceIndex||A)-(g(E,e)&&~e.sourceIndex||A);if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(b),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(b);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.substr(i.length-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=y.attr,y.find=ut,y.expr=ut.selectors,y.expr[":"]=y.expr.pseudos,y.unique=ut.uniqueSort,y.text=ut.getText,y.isXMLDoc=ut.isXML,y.contains=ut.contains}(e);var it=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ot=/^.[^:#\[\.,]*$/,ut=y.expr.match.needsContext,at={children:!0,contents:!0,next:!0,prev:!0};y.fn.extend({find:function(e){var t,n,r;if(typeof e!="string")return r=this,this.pushStack(y(e).filter(function(){for(t=0;t<r.length;t++)if(y.contains(r[t],this))return!0}));n=[];for(t=0;t<this.length;t++)y.find(e,this[t],n);return n=this.pushStack(y.unique(n)),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=y(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(y.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(lt(this,e,!1))},filter:function(e){return this.pushStack(lt(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ut.test(e)?y(e,this.context).index(this[0])>=0:y.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ut.test(e)||typeof e!="string"?y(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:y.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?y.unique(s):s)},index:function(e){return e?typeof e=="string"?y.inArray(this[0],y(e)):y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?y(e,t):y.makeArray(e&&e.nodeType?[e]:e),r=y.merge(this.get(),n);return this.pushStack(y.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),y.fn.andSelf=y.fn.addBack,y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return y.dir(e,"parentNode",n)},next:function(e){return ft(e,"nextSibling")},prev:function(e){return ft(e,"previousSibling")},nextAll:function(e){return y.dir(e,"nextSibling")},prevAll:function(e){return y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return y.dir(e,"previousSibling",n)},siblings:function(e){return y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return y.sibling(e.firstChild)},contents:function(e){return y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:y.merge([],e.childNodes)}},function(e,t){y.fn[e]=function(n,r){var i=y.map(this,t,n);return it.test(e)||(r=n),r&&typeof r=="string"&&(i=y.filter(r,i)),i=this.length>1&&!at[e]?y.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),y.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?y.find.matchesSelector(t[0],e)?[t[0]]:[]:y.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!y(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",pt=/ jQuery\d+="(?:null|\d+)"/g,dt=new RegExp("<(?:"+ht+")[\\s/>]","i"),vt=/^\s+/,mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,gt=/<([\w:]+)/,yt=/<tbody/i,bt=/<|&#?\w+;/,wt=/<(?:script|style|link)/i,Et=/^(?:checkbox|radio)$/i,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/^$|\/(?:java|ecma)script/i,Tt=/^true\/(.*)/,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ct={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:y.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},kt=ct(i),Lt=kt.appendChild(i.createElement("div"));Ct.optgroup=Ct.option,Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,y.fn.extend({text:function(e){return y.access(this,function(e){return e===t?y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(y.isFunction(e))return this.each(function(t){y(this).wrapAll(e.call(this,t))});if(this[0]){var t=y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return y.isFunction(e)?this.each(function(t){y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y.isFunction(e);return this.each(function(n){y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){y.nodeName(this,"body")||y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||y.filter(e,[n]).length>0)!t&&n.nodeType===1&&y.cleanData(Ht(n)),n.parentNode&&(t&&y.contains(n.ownerDocument,n)&&_t(Ht(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&y.cleanData(Ht(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&y.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return y.clone(this,e,t)})},html:function(e){return y.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(pt,""):t;if(typeof e=="string"&&!wt.test(e)&&(y.support.htmlSerialize||!dt.test(e))&&(y.support.leadingWhitespace||!vt.test(e))&&!Ct[(gt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(mt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(y.cleanData(Ht(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=y.isFunction(e);return!t&&typeof e!="string"&&(e=y(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;if(n&&this.nodeType===1||this.nodeType===11)y(this).remove(),t?t.parentNode.insertBefore(e,t):n.appendChild(e)})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=c.apply([],e);var i,s,o,u,a,f,l=0,h=this.length,p=this,d=h-1,v=e[0],m=y.isFunction(v);if(m||!(h<=1||typeof v!="string"||y.support.checkClone||!St.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(h){i=y.buildFragment(e,this[0].ownerDocument,!1,this),s=i.firstChild,i.childNodes.length===1&&(i=s);if(s){n=n&&y.nodeName(s,"tr"),o=y.map(Ht(i,"script"),Ot),u=o.length;for(;l<h;l++)a=i,l!==d&&(a=y.clone(a,!0,!0),u&&y.merge(o,Ht(a,"script"))),r.call(n&&y.nodeName(this[l],"table")?At(this[l],"tbody"):this[l],a,l);if(u){f=o[o.length-1].ownerDocument,y.map(o,Mt);for(l=0;l<u;l++)a=o[l],xt.test(a.type||"")&&!y._data(a,"globalEval")&&y.contains(f,a)&&(a.src?y.ajax({url:a.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):y.globalEval((a.text||a.textContent||a.innerHTML||"").replace(Nt,"")))}i=s=null}}return this}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){y.fn[e]=function(e){var n,r=0,i=[],s=y(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),y(s[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}}),y.extend({clone:function(e,t,n){var r,i,s,o,u,a=y.contains(e.ownerDocument,e);y.support.html5Clone||y.isXMLDoc(e)||!dt.test("<"+e.nodeName+">")?u=e.cloneNode(!0):(Lt.innerHTML=e.outerHTML,Lt.removeChild(u=Lt.firstChild));if((!y.support.noCloneEvent||!y.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!y.isXMLDoc(e)){r=Ht(u),i=Ht(e);for(o=0;(s=i[o])!=null;++o)r[o]&&Pt(s,r[o])}if(t)if(n){i=i||Ht(e),r=r||Ht(u);for(o=0;(s=i[o])!=null;o++)Dt(s,r[o])}else Dt(e,u);return r=Ht(u,"script"),r.length>0&&_t(r,!a&&Ht(e,"script")),r=i=s=null,u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=ct(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(y.type(s)==="object")y.merge(p,s.nodeType?[s]:s);else if(!bt.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),o=(gt.exec(s)||["",""])[1].toLowerCase(),a=Ct[o]||Ct._default,u.innerHTML=a[1]+s.replace(mt,"<$1></$2>")+a[2],l=a[0];while(l--)u=u.lastChild;!y.support.leadingWhitespace&&vt.test(s)&&p.push(t.createTextNode(vt.exec(s)[0]));if(!y.support.tbody){s=o==="table"&&!yt.test(s)?u.firstChild:a[1]==="<table>"&&!yt.test(s)?u:0,l=s&&s.childNodes.length;while(l--)y.nodeName(f=s.childNodes[l],"tbody")&&!f.childNodes.length&&s.removeChild(f)}y.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),y.support.appendChecked||y.grep(Ht(p,"input"),Bt),d=0;while(s=p[d++]){if(r&&y.inArray(s,r)!==-1)continue;i=y.contains(s.ownerDocument,s),u=Ht(h.appendChild(s),"script"),i&&_t(u);if(n){l=0;while(s=u[l++])xt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,i,s,o=0,u=y.expando,a=y.cache,l=y.support.deleteExpando,c=y.event.special;for(;(i=e[o])!=null;o++)if(t||y.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)c[s]?y.event.remove(i,s):y.removeEvent(i,s,n.handle);a[r]&&(delete a[r],l?delete i[u]:typeof i.removeAttribute!="undefined"?i.removeAttribute(u):i[u]=null,f.push(r))}}}});var jt,Ft,It,qt=/alpha\([^)]*\)/i,Rt=/opacity\s*=\s*([^)]*)/,Ut=/^(top|right|bottom|left)$/,zt=/^(none|table(?!-c[ea]).+)/,Wt=/^margin/,Xt=new RegExp("^("+b+")(.*)$","i"),Vt=new RegExp("^("+b+")(?!px)[a-z%]+$","i"),$t=new RegExp("^([+-])=("+b+")","i"),Jt={BODY:"block"},Kt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:0,fontWeight:400},Gt=["Top","Right","Bottom","Left"],Yt=["Webkit","O","Moz","ms"];y.fn.extend({css:function(e,n){return y.access(this,function(e,n,r){var i,s,o={},u=0;if(y.isArray(n)){i=Ft(e),s=n.length;for(;u<s;u++)o[n[u]]=y.css(e,n[u],!1,i);return o}return r!==t?y.style(e,n,r):y.css(e,n)},e,n,arguments.length>1)},show:function(){return tn(this,!0)},hide:function(){return tn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:en(this))?y(this).show():y(this).hide()})}}),y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=jt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=y.camelCase(n),f=e.style;n=y.cssProps[a]||(y.cssProps[a]=Zt(f,a)),u=y.cssHooks[n]||y.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=$t.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(y.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!y.cssNumber[a]&&(r+="px"),!y.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=y.camelCase(n);return n=y.cssProps[a]||(y.cssProps[a]=Zt(e.style,a)),u=y.cssHooks[n]||y.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),s===t&&(s=jt(e,n,i)),s==="normal"&&n in Qt&&(s=Qt[n]),r?(o=parseFloat(s),r===!0||y.isNumeric(o)?o||0:s):s},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(Ft=function(t){return e.getComputedStyle(t,null)},jt=function(e,n,r){var i,s,o,u=r||Ft(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!y.contains(e.ownerDocument,e)&&(a=y.style(e,n)),Vt.test(a)&&Wt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):i.documentElement.currentStyle&&(Ft=function(e){return e.currentStyle},jt=function(e,n,r){var i,s,o,u=r||Ft(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Vt.test(a)&&!Ut.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),y.each(["height","width"],function(e,t){y.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&zt.test(y.css(e,"display"))?y.swap(e,Kt,function(){return sn(e,t,r)}):sn(e,t,r)},set:function(e,n,r){var i=r&&Ft(e);return nn(e,n,r?rn(e,t,r,y.support.boxSizing&&y.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),y.support.opacity||(y.cssHooks.opacity={get:function(e,t){return Rt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=y.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&y.trim(s.replace(qt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=qt.test(s)?s.replace(qt,i):s+" "+i}}),y(function(){y.support.reliableMarginRight||(y.cssHooks.marginRight={get:function(e,t){if(t)return y.swap(e,{display:"inline-block"},jt,[e,"marginRight"])}}),!y.support.pixelPosition&&y.fn.position&&y.each(["top","left"],function(e,t){y.cssHooks[t]={get:function(e,n){if(n)return n=jt(e,t),Vt.test(n)?y(e).position()[t]+"px":n}}})}),y.expr&&y.expr.filters&&(y.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!y.support.reliableHiddenOffsets&&(e.style&&e.style.display||y.css(e,"display"))==="none"},y.expr.filters.visible=function(e){return!y.expr.filters.hidden(e)}),y.each({margin:"",padding:"",border:"Width"},function(e,t){y.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Gt[r]+t]=s[r]||s[r-2]||s[0];return i}},Wt.test(e)||(y.cssHooks[e+t].set=nn)});var an=/%20/g,fn=/\[\]$/,ln=/\r?\n/g,cn=/^(?:submit|button|image|reset)$/i,hn=/^(?:input|select|textarea|keygen)/i;y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&hn.test(this.nodeName)&&!cn.test(e)&&(this.checked||!Et.test(e))}).map(function(e,t){var n=y(this).val();return n==null?null:y.isArray(n)?y.map(n,function(e){return{name:t.name,value:e.replace(ln,"\r\n")}}):{name:t.name,value:n.replace(ln,"\r\n")}}).get()}}),y.param=function(e,n){var r,i=[],s=function(e,t){t=y.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=y.ajaxSettings&&y.ajaxSettings.traditional);if(y.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,function(){s(this.name,this.value)});else for(r in e)pn(r,e[r],n,s);return i.join("&").replace(an,"+")};var dn,vn,mn=y.now(),gn=/\?/,yn=/#.*$/,bn=/([?&])_=[^&]*/,wn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,En=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Sn=/^(?:GET|HEAD)$/,xn=/^\/\//,Tn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Nn=y.fn.load,Cn={},kn={},Ln="*/".concat("*");try{vn=s.href}catch(An){vn=i.createElement("a"),vn.href="",vn=vn.href}dn=Tn.exec(vn.toLowerCase())||[],y.fn.load=function(e,n,r){if(typeof e!="string"&&Nn)return Nn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),y.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),u.length>0&&y.ajax({url:e,type:s,dataType:"html",data:n}).done(function(e){o=arguments,u.html(i?y("<div>").append(y.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){y.fn[t]=function(e){return this.on(t,e)}}),y.each(["get","post"],function(e,n){y[n]=function(e,r,i,s){return y.isFunction(r)&&(s=s||i,i=r,r=t),y.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vn,type:"GET",isLocal:En.test(dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ln,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":y.parseJSON,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,y.ajaxSettings),t):_n(y.ajaxSettings,e)},ajaxPrefilter:On(Cn),ajaxTransport:On(kn),ajax:function(e,n){function N(e,n,o,a){var l,g,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),r=t,s=a||"",x.readyState=e>0?4:0,o&&(w=Dn(c,x,o));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(y.lastModified[i]=S),S=x.getResponseHeader("etag"),S&&(y.etag[i]=S)),e===304?(l=!0,T="notmodified"):(l=Pn(c,w),T=l.state,g=l.data,b=l.error,l=!b);else{b=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(m),m=t,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:b]),v.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--y.active||y.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=y.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?y(h):y.event,d=y.Deferred(),v=y.Callbacks("once memory"),m=c.statusCode||{},g={},b={},E=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(E===2){if(!o){o={};while(t=wn.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return E===2?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return E||(e=b[n]=b[n]||e,g[e]=t),this},overrideMimeType:function(e){return E||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(E<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return r&&r.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||vn)+"").replace(yn,"").replace(xn,dn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=y.trim(c.dataType||"*").toLowerCase().match(w)||[""],c.crossDomain==null&&(a=Tn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===dn[1]&&a[2]===dn[2]&&(a[3]||(a[1]==="http:"?80:443))==(dn[3]||(dn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=y.param(c.data,c.traditional)),Mn(Cn,c,n,x);if(E===2)return x;f=c.global,f&&y.active++===0&&y.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Sn.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(gn.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=bn.test(i)?i.replace(bn,"$1_="+mn++):i+(gn.test(i)?"&":"?")+"_="+mn++)),c.ifModified&&(y.lastModified[i]&&x.setRequestHeader("If-Modified-Since",y.lastModified[i]),y.etag[i]&&x.setRequestHeader("If-None-Match",y.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Ln+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);r=Mn(kn,c,n,x);if(!r)N(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,r.send(g,N)}catch(T){if(!(E<2))throw T;N(-1,T)}}return x}return x.abort()},getScript:function(e,n){return y.get(e,t,n,"script")},getJSON:function(e,t,n){return y.get(e,t,n,"json")}}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),y.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||y("head")[0]||i.documentElement;return{send:function(t,s){n=i.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Hn=[],Bn=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Hn.pop()||y.expando+"_"+mn++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Bn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=y.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Bn,"$1"+s):n.jsonp!==!1&&(n.url+=(gn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||y.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Hn.push(s)),u&&y.isFunction(o)&&o(u[0]),u=o=t}),"script"});var jn,Fn,In=0,qn=e.ActiveXObject&&function(){var e;for(e in jn)jn[e](t,!0)};y.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Rn()||Un()}:Rn,Fn=y.ajaxSettings.xhr(),y.support.cors=!!Fn&&"withCredentials"in Fn,Fn=y.support.ajax=!!Fn,Fn&&y.ajaxTransport(function(n){if(!n.crossDomain||y.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=y.noop,qn&&delete jn[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,h=a.responseXML,l=a.getAllResponseHeaders(),h&&h.documentElement&&(c.xml=h),typeof a.responseText=="string"&&(c.text=a.responseText);try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r):(o=++In,qn&&(jn||(jn={},y(e).unload(qn)),jn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var zn,Wn,Xn=/^(?:toggle|show|hide)$/,Vn=new RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),$n=/queueHooks$/,Jn=[er],Kn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Vn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(y.cssNumber[e]?"":"px");if(r!=="px"&&u){u=y.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,y.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};y.Animation=y.extend(Yn,{tweener:function(e,t){y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Kn[n]=Kn[n]||[],Kn[n].unshift(t)},prefilter:function(e,t){t?Jn.unshift(e):Jn.push(e)}}),y.Tween=tr,tr.prototype={constructor:tr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(y.cssNumber[n]?"":"px")},cur:function(){var e=tr.propHooks[this.prop];return e&&e.get?e.get(this):tr.propHooks._default.get(this)},run:function(e){var t,n=tr.propHooks[this.prop];return this.options.duration?this.pos=t=y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tr.propHooks._default.set(this),this}},tr.prototype.init.prototype=tr.prototype,tr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=y.css(e.elem,e.prop,"auto"),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):e.elem.style&&(e.elem.style[y.cssProps[e.prop]]!=null||y.cssHooks[e.prop])?y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},tr.propHooks.scrollTop=tr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.each(["toggle","show","hide"],function(e,t){var n=y.fn[t];y.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(nr(t,!0),e,r,i)}}),y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(en).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=y.isEmptyObject(e),s=y.speed(t,n,r),o=function(){var t=Yn(this,y.extend({},e),s);o.finish=function(){t.stop(!0)},(i||y._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=y.timers,o=y._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&$n.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&y.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=y._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=y.timers,o=r?r.length:0;n.finish=!0,y.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),y.each({slideDown:nr("show"),slideUp:nr("hide"),slideToggle:nr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),y.speed=function(e,t,n){var r=e&&typeof e=="object"?y.extend({},e):{complete:n||!n&&t||y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!y.isFunction(t)&&t};r.duration=y.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in y.fx.speeds?y.fx.speeds[r.duration]:y.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){y.isFunction(r.old)&&r.old.call(this),r.queue&&y.dequeue(this,r.queue)},r},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},y.timers=[],y.fx=tr.prototype.init,y.fx.tick=function(){var e,n=y.timers,r=0;zn=y.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||y.fx.stop(),zn=t},y.fx.timer=function(e){e()&&y.timers.push(e)&&y.fx.start()},y.fx.interval=13,y.fx.start=function(){Wn||(Wn=setInterval(y.fx.tick,y.fx.interval))},y.fx.stop=function(){clearInterval(Wn),Wn=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fx.step={},y.expr&&y.expr.filters&&(y.expr.filters.animated=function(e){return y.grep(y.timers,function(t){return e===t.elem}).length}),y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){y.offset.setOffset(this,e,t)});var n,r,i={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(!o)return;return n=o.documentElement,y.contains(n,s)?(typeof s.getBoundingClientRect!="undefined"&&(i=s.getBoundingClientRect()),r=rr(o),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},y.offset={setOffset:function(e,t,n){var r=y.css(e,"position");r==="static"&&(e.style.position="relative");var i=y(e),s=i.offset(),o=y.css(e,"top"),u=y.css(e,"left"),a=(r==="absolute"||r==="fixed")&&y.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),y.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},y.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return y.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),y.nodeName(e[0],"html")||(n=e.offset()),n.top+=y.css(e[0],"borderTopWidth",!0),n.left+=y.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-y.css(r,"marginTop",!0),left:t.left-n.left-y.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.documentElement;while(e&&!y.nodeName(e,"html")&&y.css(e,"position")==="static")e=e.offsetParent;return e||i.documentElement})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);y.fn[e]=function(i){return y.access(this,function(e,i,s){var o=rr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?y(o).scrollLeft():s,r?s:y(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),y.each({Height:"height",Width:"width"},function(e,n){y.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){y.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return y.access(this,function(n,r,i){var s;return y.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?y.css(n,r,u):y.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQueryPBm=e.$PB=y.noConflict(),typeof define=="function"&&pubblebot.define("jquery",[],function(){return jQueryPBm})}(window),pubblebot.define("jQueryPB",function(){}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=$UScore;o.$=e.jQueryPBm||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};window.$pubbBackbone=o}.call(this),pubblebot.define("backbone",["underscore","jQueryPB"],function(e){return function(){var t,n;return t||e.Backbone}}(this));var LZString=function(){function e(e,t){if(!i[e]){i[e]={};for(var n=0;n<e.length;n++)i[e][e.charAt(n)]=n}return i[e][t]}var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},s={compressToBase64:function(e){if(null==e)return"";var t=s._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:s._decompress(t.length,32,function(r){return e(n,t.charAt(r))})},compressToUTF16:function(e){return null==e?"":s._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;i>r;r++){var o=t.charCodeAt(r);n[2*r]=o>>>8,n[2*r+1]=o%256}return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return s.decompress(e);for(var n=new Array(e.length/2),r=0,i=n.length;i>r;r++)n[r]=256*e[2*r]+e[2*r+1];var o=[];return n.forEach(function(e){o.push(t(e))}),s.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),s._decompress(t.length,32,function(n){return e(r,t.charAt(n))}))},compress:function(e){return s._compress(e,16,function(e){return t(e)})},_compress:function(e,t,n){if(null==e)return"";var r,i,s,o={},u={},a="",f="",l="",c=2,h=3,p=2,d=[],v=0,m=0;for(s=0;s<e.length;s+=1)if(a=e.charAt(s),Object.prototype.hasOwnProperty.call(o,a)||(o[a]=h++,u[a]=!0),f=l+a,Object.prototype.hasOwnProperty.call(o,f))l=f;else{if(Object.prototype.hasOwnProperty.call(u,l)){if(l.charCodeAt(0)<256){for(r=0;p>r;r++)v<<=1,m==t-1?(m=0,d.push(n(v)),v=0):m++;for(i=l.charCodeAt(0),r=0;8>r;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}else{for(i=1,r=0;p>r;r++)v=v<<1|i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i=0;for(i=l.charCodeAt(0),r=0;16>r;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}c--,0==c&&(c=Math.pow(2,p),p++),delete u[l]}else for(i=o[l],r=0;p>r;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;c--,0==c&&(c=Math.pow(2,p),p++),o[f]=h++,l=String(a)}if(""!==l){if(Object.prototype.hasOwnProperty.call(u,l)){if(l.charCodeAt(0)<256){for(r=0;p>r;r++)v<<=1,m==t-1?(m=0,d.push(n(v)),v=0):m++;for(i=l.charCodeAt(0),r=0;8>r;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}else{for(i=1,r=0;p>r;r++)v=v<<1|i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i=0;for(i=l.charCodeAt(0),r=0;16>r;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}c--,0==c&&(c=Math.pow(2,p),p++),delete u[l]}else for(i=o[l],r=0;p>r;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;c--,0==c&&(c=Math.pow(2,p),p++)}for(i=2,r=0;p>r;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;for(;;){if(v<<=1,m==t-1){d.push(n(v));break}m++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,n,r){var i,s,o,u,a,f,l,c,h=[],p=4,d=4,v=3,m="",g=[],y={val:r(0),position:n,index:1};for(s=0;3>s;s+=1)h[s]=s;for(u=0,f=Math.pow(2,2),l=1;l!=f;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),u|=(a>0?1:0)*l,l<<=1;switch(i=u){case 0:for(u=0,f=Math.pow(2,8),l=1;l!=f;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),u|=(a>0?1:0)*l,l<<=1;c=t(u);break;case 1:for(u=0,f=Math.pow(2,16),l=1;l!=f;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),u|=(a>0?1:0)*l,l<<=1;c=t(u);break;case 2:return""}for(h[3]=c,o=c,g.push(c);;){if(y.index>e)return"";for(u=0,f=Math.pow(2,v),l=1;l!=f;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),u|=(a>0?1:0)*l,l<<=1;switch(c=u){case 0:for(u=0,f=Math.pow(2,8),l=1;l!=f;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),u|=(a>0?1:0)*l,l<<=1;h[d++]=t(u),c=d-1,p--;break;case 1:for(u=0,f=Math.pow(2,16),l=1;l!=f;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),u|=(a>0?1:0)*l,l<<=1;h[d++]=t(u),c=d-1,p--;break;case 2:return g.join("")}if(0==p&&(p=Math.pow(2,v),v++),h[c])m=h[c];else{if(c!==d)return null;m=o+o.charAt(0)}g.push(m),h[d++]=o+m.charAt(0),p--,o=m,0==p&&(p=Math.pow(2,v),v++)}}};return s}();"function"==typeof pubblebot.define&&pubblebot.define.amd?pubblebot.define("utils/zip",[],function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);var Hashids=function(){function e(e,t,n){var r,i,s,o,u,a,f;this.version="1.0.2",this.minAlphabetLength=16,this.sepDiv=3.5,this.guardDiv=12,this.errorAlphabetLength="error: alphabet must contain at least X unique characters",this.errorAlphabetSpace="error: alphabet cannot contain spaces",this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.seps="cfhistuCFHISTU",this.minHashLength=parseInt(t,10)>0?t:0,this.salt=typeof e=="string"?e:"",typeof n=="string"&&(this.alphabet=n);for(r="",i=0,o=this.alphabet.length;i!==o;i++)r.indexOf(this.alphabet.charAt(i))===-1&&(r+=this.alphabet.charAt(i));this.alphabet=r;if(this.alphabet.length<this.minAlphabetLength)throw this.errorAlphabetLength.replace("X",this.minAlphabetLength);if(this.alphabet.search(" ")!==-1)throw this.errorAlphabetSpace;for(i=0,o=this.seps.length;i!==o;i++)s=this.alphabet.indexOf(this.seps.charAt(i)),s===-1?this.seps=this.seps.substr(0,i)+" "+this.seps.substr(i+1):this.alphabet=this.alphabet.substr(0,s)+" "+this.alphabet.substr(s+1);this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this.consistentShuffle(this.seps,this.salt);if(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv)u=Math.ceil(this.alphabet.length/this.sepDiv),u===1&&u++,u>this.seps.length?(a=u-this.seps.length,this.seps+=this.alphabet.substr(0,a),this.alphabet=this.alphabet.substr(a)):this.seps=this.seps.substr(0,u);this.alphabet=this.consistentShuffle(this.alphabet,this.salt),f=Math.ceil(this.alphabet.length/this.guardDiv),this.alphabet.length<3?(this.guards=this.seps.substr(0,f),this.seps=this.seps.substr(f)):(this.guards=this.alphabet.substr(0,f),this.alphabet=this.alphabet.substr(f))}return e.prototype.encode=function(){var e="",t,n,r=Array.prototype.slice.call(arguments);if(!r.length)return e;r[0]instanceof Array&&(r=r[0]);for(t=0,n=r.length;t!==n;t++)if(typeof r[t]!="number"||r[t]%1!==0||r[t]<0)return e;return this._encode(r)},e.prototype.decode=function(e){var t=[];return!e.length||typeof e!="string"?t:this._decode(e,this.alphabet)},e.prototype.encodeHex=function(e){var t,n,r;e=e.toString();if(!/^[0-9a-fA-F]+$/.test(e))return"";r=e.match(/[\w\W]{1,12}/g);for(t=0,n=r.length;t!==n;t++)r[t]=parseInt("1"+r[t],16);return this.encode.apply(this,r)},e.prototype.decodeHex=function(e){var t=[],n,r,i=this.decode(e);for(n=0,r=i.length;n!==r;n++)t+=i[n].toString(16).substr(1);return t},e.prototype._encode=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p=this.alphabet,d=e.length,v=0;for(r=0,i=e.length;r!==i;r++)v+=e[r]%(r+100);n=t=p.charAt(v%p.length);for(r=0,i=e.length;r!==i;r++)s=e[r],o=n+this.salt+p,p=this.consistentShuffle(p,o.substr(0,p.length)),u=this.hash(s,p),t+=u,r+1<d&&(s%=u.charCodeAt(0)+r,a=s%this.seps.length,t+=this.seps.charAt(a));t.length<this.minHashLength&&(f=(v+t[0].charCodeAt(0))%this.guards.length,l=this.guards[f],t=l+t,t.length<this.minHashLength&&(f=(v+t[2].charCodeAt(0))%this.guards.length,l=this.guards[f],t+=l)),c=parseInt(p.length/2,10);while(t.length<this.minHashLength)p=this.consistentShuffle(p,p),t=p.substr(c)+t+p.substr(0,c),h=t.length-this.minHashLength,h>0&&(t=t.substr(h/2,this.minHashLength));return t},e.prototype._decode=function(e,t){var n=[],r=0,i,s,o,u,a=new RegExp("["+this.guards+"]","g"),f=e.replace(a," "),l=f.split(" ");if(l.length===3||l.length===2)r=1;f=l[r];if(typeof f[0]!="undefined"){i=f[0],f=f.substr(1),a=new RegExp("["+this.seps+"]","g"),f=f.replace(a," "),l=f.split(" ");for(r=0,s=l.length;r!==s;r++)o=l[r],u=i+this.salt+t,t=this.consistentShuffle(t,u.substr(0,t.length)),n.push(this.unhash(o,t));this._encode(n)!==e&&(n=[])}return n},e.prototype.consistentShuffle=function(e,t){var n,r,i,s,o,u;if(!t.length)return e;for(s=e.length-1,o=0,u=0;s>0;s--,o++)o%=t.length,u+=n=t.charAt(o).charCodeAt(0),r=(n+o+u)%s,i=e.charAt(r),e=e.substr(0,r)+e.charAt(s)+e.substr(r+1),e=e.substr(0,s)+i+e.substr(s+1);return e},e.prototype.hash=function(e,t){var n="",r=t.length;do n=t.charAt(e%r)+n,e=parseInt(e/r,10);while(e);return n},e.prototype.unhash=function(e,t){var n=0,r,i;for(i=0;i<e.length;i++)r=t.indexOf(e[i]),n+=r*Math.pow(t.length,e.length-i-1);return n},typeof pubblebot.define=="function"&&typeof pubblebot.define.amd=="object"&&pubblebot.define.amd&&pubblebot.define("utils/hashids",[],function(){return e}),e}();pubblebot.define("utils/sizedecoder",["utils/hashids"],function(e){var t=new e("nodejsisawesome",8,"abcdefghijklmnopqrstuvwxyz1234567890");return t}),pubblebot.define("utils/storage",["jQueryPB","utils/zip","utils/sizedecoder"],function(e,t,n){function s(t){var n=arguments.length,r=window[t],i=arguments,s=i[1],o,u,a;if(n<2)throw new Error("Minimum 2 arguments must be given");if(e.isArray(s)){u={};for(var f in s){o=s[f];try{u[o]=JSON.parse(r.getItem(o))}catch(l){u[o]=r.getItem(o)}}return u}if(n!=2){try{u=JSON.parse(r.getItem(s))}catch(l){throw new ReferenceError(s+" is not defined in this storage")}for(var f=2;f<n-1;f++){u=u[i[f]];if(u===undefined)throw new ReferenceError([].slice.call(i,1,f+1).join(".")+" is not defined in this storage")}if(e.isArray(i[f])){a=u,u={};for(var c in i[f])u[i[f][c]]=a[i[f][c]];return u}return u[i[f]]}try{return JSON.parse(r.getItem(s))}catch(l){return r.getItem(s)}}function o(t){var n=arguments.length,r=window[t],i=arguments,s=i[1],o=i[2],u,a={},f;if(n<2||!e.isPlainObject(s)&&n<3)throw new Error("Minimum 3 arguments must be given or second parameter must be an object");if(e.isPlainObject(s)){for(var l in s)u=s[l],e.isPlainObject(u)?r.setItem(l,JSON.stringify(u)):r.setItem(l,u);return s}if(n==3)return typeof o=="object"?r.setItem(s,JSON.stringify(o)):r.setItem(s,o),o;try{f=r.getItem(s),f!=null&&(a=JSON.parse(f))}catch(c){}f=a;for(var l=2;l<n-2;l++){u=i[l];if(!f[u]||!e.isPlainObject(f[u]))f[u]={};f=f[u]}return f[i[l]]=i[l+1],r.setItem(s,JSON.stringify(a)),a}function u(t){var n=arguments.length,r=window[t],i=arguments,s=i[1],o,u;if(n<2)throw new Error("Minimum 2 arguments must be given");if(e.isArray(s)){for(var a in s)r.removeItem(s[a]);return!0}if(n==2)return r.removeItem(s),!0;try{o=u=JSON.parse(r.getItem(s))}catch(f){throw new ReferenceError(s+" is not defined in this storage")}for(var a=2;a<n-1;a++){u=u[i[a]];if(u===undefined)throw new ReferenceError([].slice.call(i,1,a).join(".")+" is not defined in this storage")}if(e.isArray(i[a]))for(var l in i[a])delete u[i[a][l]];else delete u[i[a]];return r.setItem(s,JSON.stringify(o)),!0}function a(t,n){var r=c(t);for(var i in r)u(t,r[i]);if(n)for(var i in e.namespaceStorages)h(i)}function f(t){var n=arguments.length,r=arguments,i=window[t],o=r[1];if(n==1)return c(t).length==0;if(e.isArray(o)){for(var u=0;u<o.length;u++)if(!f(t,o[u]))return!1;return!0}try{var a=s.apply(this,arguments);e.isArray(r[n-1])||(a={totest:a});for(var u in a)if(!(e.isPlainObject(a[u])&&e.isEmptyObject(a[u])||e.isArray(a[u])&&!a[u].length||!a[u]))return!1;return!0}catch(l){return!0}}function l(t){var n=arguments.length,r=arguments,i=window[t],o=r[1];if(n<2)throw new Error("Minimum 2 arguments must be given");if(e.isArray(o)){for(var u=0;u<o.length;u++)if(!l(t,o[u]))return!1;return!0}try{var a=s.apply(this,arguments);e.isArray(r[n-1])||(a={totest:a});for(var u in a)if(a[u]===undefined||a[u]===null)return!1;return!0}catch(f){return!1}}function c(t){var n=arguments.length,r=window[t],i=arguments,o=i[1],u=[],a={};n>1?a=s.apply(this,i):a=r;if(a._cookie)for(var f in e.cookie())f!=""&&u.push(f.replace(a._prefix,""));else for(var l in a)u.push(l);return u}function h(t){if(!t||typeof t!="string")throw new Error("First parameter must be a string");d?(window.localStorage.getItem(t)||window.localStorage.setItem(t,"{}"),window.sessionStorage.getItem(t)||window.sessionStorage.setItem(t,"{}")):(window.localCookieStorage.getItem(t)||window.localCookieStorage.setItem(t,"{}"),window.sessionCookieStorage.getItem(t)||window.sessionCookieStorage.setItem(t,"{}"));var n={localStorage:e.extend({},e.localStorage,{_ns:t}),sessionStorage:e.extend({},e.sessionStorage,{_ns:t})};return e.cookie&&(window.cookieStorage.getItem(t)||window.cookieStorage.setItem(t,"{}"),n.cookieStorage=e.extend({},e.cookieStorage,{_ns:t})),e.namespaceStorages[t]=n,n}function p(e){if(!window[e])return!1;var t="jsapi";try{return window[e].setItem(t,t),window[e].removeItem(t),!0}catch(n){return!1}}var e=window.jQueryPBm,r="ls_",i="ss_",d=p("localStorage"),v={_type:"",_ns:"",_callMethod:function(e,t){var n=[this._type],t=Array.prototype.slice.call(t),r=t[0];return this._ns&&n.push(this._ns),typeof r=="string"&&r.indexOf(".")!==-1&&(t.shift(),[].unshift.apply(t,r.split("."))),[].push.apply(n,t),e.apply(this,n)},get:function(){return this._callMethod(s,arguments)},set:function(){var t=arguments.length,n=arguments,r=n[0];if(t<1||!e.isPlainObject(r)&&t<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(e.isPlainObject(r)&&this._ns){for(var i in r)o(this._type,this._ns,i,r[i]);return r}var s=this._callMethod(o,n);return this._ns?s[r.split(".")[0]]:s},remove:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(u,arguments)},removeAll:function(e){return this._ns?(o(this._type,this._ns,{}),!0):a(this._type,e)},isEmpty:function(){return this._callMethod(f,arguments)},isSet:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(l,arguments)},keys:function(){return this._callMethod(c,arguments)}};if(e.cookie){window.name||(window.name=Math.floor(Math.random()*1e8));var m={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(t,n){e.cookie(this._prefix+t,n,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(t){return e.cookie(this._prefix+t)},removeItem:function(t){return e.removeCookie(this._prefix+t)},clear:function(){for(var t in e.cookie())t!=""&&(!this._prefix&&t.indexOf(r)===-1&&t.indexOf(i)===-1||this._prefix&&t.indexOf(this._prefix)===0)&&e.removeCookie(t)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};d||(window.localCookieStorage=e.extend({},m,{_prefix:r,_expires:3650}),window.sessionCookieStorage=e.extend({},m,{_prefix:i+window.name+"_"})),window.cookieStorage=e.extend({},m),e.cookieStorage=e.extend({},v,{_type:"cookieStorage",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}e.initNamespaceStorage=function(e){return h(e)},d?(e.localStorage=e.extend({},v,{_type:"localStorage"}),e.sessionStorage=e.extend({},v,{_type:"sessionStorage"})):(e.localStorage=e.extend({},v,{_type:"localCookieStorage"}),e.sessionStorage=e.extend({},v,{_type:"sessionCookieStorage"})),e.namespaceStorages={},e.removeAllStorages=function(t){e.localStorage.removeAll(t),e.sessionStorage.removeAll(t),e.cookieStorage&&e.cookieStorage.removeAll(t),t||(e.namespaceStorages={})};var v={version:"v1223.01",dd:function(){var t=e.localStorage;return t},remove:function(e){this.dd().remove(e)},clearAll:function(){for(var e in window.localStorage)if(window.localStorage.hasOwnProperty(e)&&e!="alert_version"&&e!="init_app"&&e!="bubbleStyle"&&e!="selectedChannel"&&e!="help_read"&&e!="signincheck"&&e!="mod_sound"&&e!="tour_read"&&e!="lastSeen"&&e!="cachedTask"&&e!="ma_token"&&e!="no-desktop-notif"){if(e.substring(0,1)=="_")return!0;this.dd()!=undefined&&this.dd()!=null&&this.dd().remove(e)}},set:function(e,t){e=="pb-conversationId"&&(t=this.evalue(t,"761201")),this.dd().set(e,t)},get:function(e){var t=this.dd().get(e);return t==null?t:e=="pb-conversationId"?this.evalue(t,"761201"):t},evalue:function(e,t){var n="",r="";r=e.toString();for(var i=0;i<e.length;i++){var s=e.charCodeAt(i),o=s^t;n+=String.fromCharCode(o)}return n}};return v}),pubblebot.define("utils/appConfig",["jQueryPB","utils/storage"],function(e,t){var n=window.jQueryPBm,r={get:function(e){var n=window.pubbleLoader;if(undefined!=n&&n.apps){var i=n.apps;for(var s=0;s<i.length;s++){var o=i[s];if(o.appType==e){window.lpQA||(lpQA={}),lpQA.config||(lpQA.config={});for(var u in o)lpQA.config[u]=o[u];r.config=o,r.invitePushed=0,r.config.pageURL=n.utils.Url.encode(window.location.href),r.servers=n.servers,r.config.appID=r.config.parameters.appId,r.config.communityId=="888"&&(r.isPubble=1);var a=t.get("visitor-id-"+r.config.appID);return a!=null&&(r.config.visitorId=a),r.config.eventCategory="pubble-messenger",r.config.appID}}}else r.config=lpQA.config,r.servers=lpQA.servers;return null}};return r}),pubblebot.define("utils/utils",["jQueryPB","utils/appConfig","utils/storage"],function(e,t,n){var e=window.jQueryPBm;Array.prototype.includes||(Array.prototype.includes=function(e){if(this==null)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(n===0)return!1;var r=parseInt(arguments[1],10)||0,i;r>=0?i=r:(i=n+r,i<0&&(i=0));var s;while(i<n){s=t[i];if(e===s||e!==e&&s!==s)return!0;i++}return!1}),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)}),String.prototype.contains||(String.prototype.contains=function(e){return this.indexOf(e)>-1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();if(typeof t!="number"||!isFinite(t)||Math.floor(t)!==t||t>n.length)t=n.length;t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t});var r={myAddEvent:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},safeContent:function(e){return e&&(e=e.replace("onerror=prompt(/XSSPOSED/)",""),e=e.replace("onload=prompt(/XSSPOSED/)",""),e=e.replace("prompt(/XSSPOSED/)","")),e},getFilterLandingPage:function(){var e=window.location.href;try{top.location!=location&&(e=parent.window.site_url)}catch(t){e=window.location.href}return e=decodeURIComponent(e.replace(/\+/g,"%20")),e=r.filterPubbleParas(e),e},filterPubbleParas:function(e){return e=this.removeParameter(e,"PPBCID"),e=this.removeParameter(e,"visitor"),e=this.removeParameter(e,"PPBUID"),e=this.removeParameter(e,"PPBLINK"),e=this.removeParameter(e,"myenquiry"),e=this.removeParameter(e,"PPBCT"),e=this.removeParameter(e,"PPBCT"),e=this.removeParameter(e,"PPBLINK"),e=this.removeParameter(e,"PPBAID"),e=e.replace("#myenquiry",""),e=e.replace(/\?\s*$/,""),e},removeParameter:function(e,t){var n=e.split("#"),r=new RegExp("([?&])"+t+"=.*?(&|#|$)","i");return n[0].match(r)&&(e=n[0].replace(r,"$1"),e=e.replace(/([?&])$/,""),typeof n[1]!="undefined"&&n[1]!==null&&(e+="#"+n[1])),e},isInside:function(e,t,n){return e.parents(t).length==1||e.hasClass(t)||e.hasClass(n)},getTempId:function(){return Math.floor(Math.random()*999999999)},contains:function(e,t){if(!e)return!1;var n=e.length;while(n--)if(e[n]===t)return!0;return!1},fixMobileBody:function(t){r.isMobile()&&(t?r.addClass(e("body"),"pubble-mobile-body"):e("body").removeClass("pubble-mobile-body"))},getRefer:function(){var e="";try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(n){e=""}}return e===""&&(e=document.referrer),e},getURL:function(){var e=window.parent?window.parent.location.href:window.location.href;return e},isMobile:function(){var e=0;return function(t){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|android|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))e=1}(navigator.userAgent||navigator.vendor||window.opera),e},mixlog:function(e,t,n){return!1},handleUrlVal:function(e){return e=e.replace(/PPBUID\=([^&]+)/,"").replace(/PPBCID\=([^&]+)/,"").replace(/visitor\=false/,"").replace(/PPBLINK\=([^&]+)/,"").replace(/PPBPID\=([^&]+)/,""),e.endsWith("&")&&(e=e.substring(0,e.length-1)),e.endsWith("&")&&(e=e.substring(0,e.length-1)),e.endsWith("&")&&(e=e.substring(0,e.length-1)),e.endsWith("&")&&(e=e.substring(0,e.length-1)),e.endsWith("?")&&(e=e.substring(0,e.length-1)),e},handleURL:function(e){if(!e)return"";var t=/\[(.*)\|(.*?)\]/g,t=/\[(.*?)\|(.*?)\]/g;return e=e.replace(t,'<a href="$1" target="_blank">$2</a>'),e},getAppIdFromUrl:function(){var e=window.location.href;e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));var t=new RegExp("PPBAID=([^&]+)?","i");if(t.test(e)){var n=RegExp.$1;return n.indexOf("PPBAID")>-1?(t.test(n),RegExp.$1):n}return-1},getAppId:function(){var e=window.location.href;e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));var t=new RegExp("PPBAID=([^&]+)?","i");if(t.test(e)){var n=RegExp.$1;return n.indexOf("PPBAID")>-1?(t.test(n),RegExp.$1):n}return-1},getConverationToken:function(){var e=window.location.href,t=r.getRefer();if(t!=undefined&&t!=""){var n=window.location;return n.search.indexOf("PPBCT")!=-1&&(e=e.replace(/PPBCT([_a-z0-9=]+)/g,"")),e=e.replace("&&",""),e=e.replace("?&","?"),history.replaceState&&history.replaceState({},"",e),-1}e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));var i=new RegExp("PPBCT=([^&]+)?","i");if(i.test(e)){var s=RegExp.$1,o="-1";return s.indexOf("PPBCT")>-1&&(i.test(s),o=RegExp.$1),o=s,unescape(o)}return-1},getConversationID:function(){var e=window.location.href,t=r.getRefer();if(t!=undefined&&t!=""){var n=window.location;return n.search.indexOf("PPBCID")!=-1&&(e=e.replace(/PPBCID([_a-z0-9=]+)/g,"")),n.search.indexOf("PPBAID")!=-1&&(e=e.replace(/PPBAID([_a-z0-9=]+)/g,"")),n.search.indexOf("PPBPID")!=-1&&(e=e.replace(/PPBPID([_a-z0-9=]+)/g,"")),n.search.indexOf("PPBUID")!=-1&&(e=e.replace(/PPBUID([_a-z0-9=]+)/g,"")),n.search.indexOf("PPBLINK")!=-1&&(e=e.replace(/PPBLINK([_a-z0-9=]+)/g,"")),e=e.replace("&&",""),e=e.replace("&&",""),e=e.replace("&&",""),e=e.replace("?&","?"),history.replaceState&&history.replaceState({},"",e),-1}e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));var i=new RegExp("PPBCID=([^&]+)?","i");if(i.test(e)){var s=RegExp.$1;return s.indexOf("PPBCID")>-1?(i.test(s),RegExp.$1):s}return-1},getPPBUID:function(){var e=new RegExp("PPBUID=([^&]+)","i");if(e.test(window.location.href)){var t=RegExp.$1;return t.indexOf("PPBUID")>-1?(e.test(t),RegExp.$1):t}return""},getPPBPID:function(){var e=new RegExp("PPBPID=([^&]+)","i");if(e.test(window.location.href)){var t=RegExp.$1;return t.indexOf("PPBPID")>-1?(e.test(t),RegExp.$1):t}return""},getPPBLINK:function(){var e=new RegExp("PPBLINK=([^&]+)","i");if(e.test(window.location.href)){var t=RegExp.$1;return t.indexOf("PPBLINK")>-1?(e.test(t),RegExp.$1):t}return""},addClass:function(e,t){e.hasClass(t)||e.addClass(t)},getTime:function(){var e=new Date;return this.formatAMPM(e)},escapeHtml:function(e){return e=this.htmlStep1(e),e=this.htmlStep2(e),e},htmlStep2:function(e){return e=e.replaceAll("&amp;lt;","&lt;"),e=e.replaceAll("&amp;quot;","&quot;"),e=e.replaceAll("&amp;#39;","&#39;"),e=e.replaceAll("&amp;#x2F;","&#x2F;"),e=e.replaceAll("&amp;gt;","&gt;"),e},htmlStep1:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>"']/g,function(e){return t[e]})},gettext:function(e){return t.config.strings[e]&&t.config.strings[e]!==null&&t.config.strings[e]!==""?t.config.strings[e]:e},removeBr:function(e){return e=this.ReplaceAll(e,"<br />","\n"),e=this.ReplaceAll(e,"<br><br>","\n"),e=this.ReplaceAll(e,"<br/><br/>","\n"),e=this.ReplaceAll(e,"<br />","\n"),e},getEndpoints:function(){var e={conversation:t.servers.actionDomain+"/api/v2/stream/conversation",post:t.servers.actionDomain+"/api/v2/post/new",editName:t.servers.actionDomain+"/api/v2/post/update/name",editEmail:t.servers.actionDomain+"/api/v2/post/update/email",replying:t.servers.actionDomain+"/api/v2/post/replying",seq:t.servers.actionDomain+"/api/v2/post/seq",faq:t.servers.actionDomain+"/api/v2/post/seq",editPhone:t.servers.actionDomain+"/api/v2/post/update/phone",interaction:t.servers.actionDomain+"/api/v2/faq/interaction",close:t.servers.actionDomain+"/api/v2/post/close",openp:t.servers.actionDomain+"/api/v2/post/open",qinteraction:t.servers.actionDomain+"/api/v2/conversation/interaction",visitor:t.servers.actionDomain+"/api/v2/conversation/visitor",backvisit:t.servers.actionDomain+"/api/v2/stat/conversation/return",setCookie:t.servers.actionDomain+"/api/v2/account/cookie/reset",loadFaqs:t.servers.actionDomain+"/api/v2/faq/stream",assignees:t.servers.actionDomain+"/api/v2/stream/conversation/assignees",getIp:"https://media.pubble.io/ipsq/",tokenReset:t.servers.actionDomain+"/api/v2/conversation/token/reset",cookieDelete:t.servers.actionDomain+"/api/v2/cookie/delete"};return e},handleCommunityAvtar:function(e){return e&&e.avatar?e.avatar:t.servers.actionDomain+"/resources/pubblebot/mod/img/community-default-ico.png"},getTimeFormat:function(){var e={seconds:"just now",minutes:"%2m",hours:"%3h",days:"%4 days",months:"%5 months",years:"%6 year"};return e},timediff:function(e){if(e==undefined||e==null)return"";var t={seconds:((new Date).getTime()-e)/1e3},n=new Date(e);t.seconds<0&&(t.seconds=1),t.minutes=Math.round(t.seconds/60);if(typeof lpQA.Messages=="function"){var r=lpQA.Messages(n);return typeof r=="string"?[r,6e4]:["",5256e5]}return typeof this.getTimeFormat()=="object"?t.seconds<60?[this.formatDate(n,this.getTimeFormat().seconds,t)]:t.minutes<60?[this.formatDate(n,this.getTimeFormat().minutes,t)]+" ago":t.minutes<1440?[this.formatDate(n,this.getTimeFormat().hours,t)]+" ago":[this.formatDateTime(n)]+" ":[""]},date_format_regex:new RegExp(/(%[a-zA-Z0-9])/g),formatDate:function(e,t,n){var r=t,i=t.match(this.date_format_regex);if(i!==null)for(var s=0,o=i.length;s<o;s++)switch(i[s]){case"%1":r=r.replace("%1",Math.round(n.seconds));break;case"%2":r=r.replace("%2",n.minutes).replace("minutes",n.minutes==1?"minute":"minutes");break;case"%3":var u=Math.round(n.minutes/60);r=r.replace("%3",u).replace("hours",u==1?"hour":"hours");break;case"%4":var a=Math.round(n.minutes/1440);r=r.replace("%4",a).replace("days",a==1?"day":"days");break;case"%5":var f=Math.round(n.minutes/43200);r=r.replace("%5",f).replace("months",f==1?"month":"months");break;case"%6":r=r.replace("%6",Math.round(n.minutes/525600));break;case"%a":r=r.replace("%a",this.weekdays[e.getDay()][0]);break;case"%A":r=r.replace("%A",this.weekdays[e.getDay()][1]);break;case"%b":r=r.replace("%b",this.months[e.getMonth()-1][0]);break;case"%B":r=r.replace("%B",this.months[e.getMonth()-1][1]);break;case"%c":r=r.replace("%c",e.toLocaleString());break;case"%d":r=r.replace("%d",e.getDate());break;case"%H":r=r.replace("%H",e.getHours());break;case"%I":var u=e.getHours()+1;u>12&&(u-=12),r=r.replace("%I",u);break;case"%m":r=r.replace("%m","0"+(e.getMonth()+1));break;case"%M":var l=e.getMinutes();l<10&&(l="0"+l),r=r.replace("%M",l);break;case"%n":r=r.replace("%n",e.getMinutes());break;case"%p":var c="AM";e.getHours()>11&&(c="PM"),r=r.replace("%p",c);break;case"%s":r=r.replace("%s",e.getSeconds());break;case"%S":var l=e.getSeconds();l<10&&(l="0"+l),r=r.replace("%S",l);break;case"%w":r=r.replace("%w",e.getDay());break;case"%x":r=r.replace("%x",e.toLocaleDateString());break;case"%X":r=r.replace("%X",e.toLocaleTimeString());break;case"%y":r=r.replace("%y",e.getFullYear().toString().substring(2));break;case"%Y":r=r.replace("%Y",e.getFullYear())}return r},formatAMPM:function(e){var t=e.getHours(),n=e.getMinutes(),r="";n=n<10?"0"+n:n;var i=t+":"+n+" "+r;return i},formatDateTime:function(e){var t=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),n=e.getDate(),r=e.getMonth();return n+" "+t[r]},handleImg:function(e,n,r){return e==null?n&&n!=""?"https://media.pubble.io/pubble-avatars/?name="+n+"&amp;size="+r:"http://cdn.pubble.io/pubblebot/anon.png":e?e.indexOf("anon.gif")!=-1||e.indexOf("img_who@2x")!=-1?n&&n!=""?"https://media.pubble.io/pubble-avatars/?name="+n+"&amp;size="+r:"http://cdn.pubble.io/pubblebot/anon.png":e.startsWith("/")&&!e.startsWith("//www.pubble.co")?t.servers.mediaDomain+e+"?100":e.startsWith("resources")?t.servers.mediaDomain+"/"+e+"?100":e:e==""?n&&n!=""?"https://media.pubble.io/pubble-avatars/?name="+n+"&amp;size="+r:"http://cdn.pubble.io/pubblebot/anon.png":"http://cdn.pubble.io/pubblebot/anon.png"},isValidEmail:function(e){if(e==null)return 0;var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,10})$/;return e==""||e.length<3||t.test(e)==0?0:1},checkDate:function(e,n){var r=pubblebot.require("app");if(e==undefined||e==null)return"";var i=e.split("T")[0],s=e.split("T")[1];if(i==null||s==null)return"";var o=new Date(i.split("-")[0],i.split("-")[1]-1,i.split("-")[2],s.split(":")[0],s.split(":")[1],s.split(":")[2].split("+")[0]);o.setMinutes(o.getMinutes()-(new Date).getTimezoneOffset());var u={seconds:((new Date).getTime()-o.getTime())/1e3};u.seconds<0&&(u.seconds=1),u.minutes=Math.round(u.seconds/60);if(typeof t.Messages=="function"){var a=t.Messages(o);return typeof a=="string"?[a,6e4]:["",5256e5]}return typeof this.getTimeFormat()=="object"?u.seconds<60?[this.formatDate(o,this.getTimeFormat().seconds,u)]:u.minutes<60?[this.formatDate(o,this.getTimeFormat().minutes,u)]:u.minutes<1440?[this.formatDate(o,this.getTimeFormat().hours,u)]:[this.formatDateTime(o)]:[""]},XDR:function(t,n,r,i,s){e.ajax({url:t,data:n,type:"GET",cache:0,dataType:"jsonp",success:function(e){var t="success";e.code&&e.code>299&&(t="error"),r(e,s,t)},error:i})},setSessionCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+18e5),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";Path=/"},isAuthor:function(e,t){var n=0;if(e.config.user.uid>0&&e.config.user.uid==t.id||e.config.user.cookieId==t.cookieId||r.getCookie("pubble_gen_uid")==t.cookieId)n=1;return n},setShortCookie:function(e,t){var n=30,r=new Date;r.setTime(r.getTime()+18e5),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()+";Path=/"},setCookieValue:function(e,t){n.set(e,t)},getCookieValue:function(e,t){var i=n.get(e);return i==null?r.getCookie(e):i},setCookie:function(e,t){var n=30,r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()+";Path=/"},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return t!=null?unescape(t[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var n=getCookie(e);n!=null&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},Url:{encode:function(e){return escape(this._utf8_encode(e))},decode:function(e){return this._utf8_decode(unescape(e))},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}}};return r}),pubblebot.define("models/app",["backbone","utils/utils"],function(e,t){var n=window.$pubbBackbone.noConflict(),r=n.Model.extend({defaults:{threadInfo:"How can we help?",currentConversation:0,comment_text:"",available:1,moderators:[],textlimit:150,logo:1,botAvatar:"",visitorAvatar:""},toJSON:function(){var e=window.$UScore.clone(this.attributes);return e}});return r}),pubblebot.define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),pubblebot.define("text!templates/app.tpl",[],function(){return'<!-- START CONACT BOT -->\r\n<div class="pubble-cw pubble-cw-contactbot">\r\n\r\n    <div class="pubble-sb-clientsize pubble-sb-br pubble-sb-br-s" id="pb_sidebar">\r\n        <div class="pubble-sb-button-mask pubble-sb-animated pubble-sb-bounceIn">\r\n            <div class="pubble-sb-button pubble-sb-clientbgcolor">\r\n                <div class="pubble-sb-logo"></div>\r\n                <div class="pubble-sb-close">\r\n        \r\n                <span class="pubble-sb-controls-close-ico pubble-sb-controls-close-ico-thick"></span>\r\n\r\n   \r\n                \r\n                </div>\r\n                <div class="pubble-sb-avatar pubble-sb-clientbgcolor pubble-off">\r\n\r\n\r\n\r\n                </div>\r\n                <div class="pubble-sb-logo-text"></div>\r\n                \r\n                <div class="pubble-sb-text">Questions\r\n                    <br> Comment or Message</div>\r\n            </div>\r\n            <div class="pubble-sb-nr-pos-mask pubble-off">\r\n                <div class="pubble-sb-nr-pos pubble-sb-clientnumbercolor">\r\n                    <div class="pubble-sb-nr-s pb_qa_count"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n<!--\r\n        <div class="pubble-sb-bubble pubble-move">\r\n            <div class="pubble-sb-bubble-text-wrapper">\r\n            <div class="pubble-sb-bubble-text pubble-sb-clearfix">\r\n\r\n\r\n\r\n                <div></div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n-->\r\n\r\n\r\n\r\n        <div class="pubble-sb-notif pubble-off"><div class="pubble-sb-notif-nr"></div></div>\r\n\r\n\r\n    </div>\r\n\r\n\r\n\r\n<div class="pubble-sb-bubble pubble-move">\r\n    <div class="pubble-sb-bubble-close"></div>\r\n    <div class="pubble-sb-bubble-item-list">\r\n        <div class="pubble-sb-bubble-item-one">\r\n           \r\n        </div>  \r\n        <div class="pubble-sb-bubble-item-two">\r\n        </div> \r\n    </div>\r\n    <div class="pubble-sb-bubble-textarea">\r\n        <div class="pubble-sb-bubble-textarea-text">Message...</div>\r\n        <div class="pubble-sb-bubble-textarea-emoji"></div> \r\n        <div class="pubble-sb-bubble-textarea-att"></div> \r\n    </div>    \r\n\r\n</div>\r\n\r\n\r\n</div>\r\n<!--   END CONACT BOT -->\r\n\r\n<!-- START MODAL -->\r\n<div class="pubble-cw pubble-cw-modal pubble-hide">\r\n    <div class="pubble-cw pubble-cw-modal-shade"></div>\r\n    <div class="pubble-cw-modal-bar">\r\n        <div class="pubble-cw-modal-close-button"></div>\r\n    </div>\r\n    \r\n    <div class="pubble-cw-modal-media-container pubble-cw-modal-img-container pubble-off">\r\n        <div class="pubble-cw-modal-img">\r\n            <!-- add img here -->\r\n        </div>    \r\n    </div>\r\n    \r\n    <div class="pubble-cw-modal-media-container pubble-cw-modal-video-container pubble-off">\r\n        <div class="pubble-cw-modal-video">\r\n            <!-- add vid here -->\r\n        </div>    \r\n        <div class="pubble-cw-modal-video-button"></div>   \r\n    </div>\r\n    \r\n</div>\r\n<!-- END MODAL -->\r\n\r\n<!-- START PANEL -->\r\n<div class="pubble-cw-shadow pubble-hide"></div>\r\n\r\n<div class="pubble-cw pubble-cw-panel pubble-move pubble-off">\r\n    <div class="pubble-cw-modal-cover pubble-cw-modal-expire pubble-hide">\r\n        <div class="pubble-cw-expire-step1 pubble-show">\r\n            <div class="pubble-cw-expire-text">For security reasons and to help protect your data, the conversation link has expired.<br/>\r\nPlease use the button below to generate a new secure link (which will be sent to you via email or SMS), or ask a new question.</div>\r\n            <div class="pubble-cw-expire-actionbar">\r\n                <div class="pubble-cw-expire-newlink">Generate link</div>\r\n                <div class="pubble-cw-expire-newquestion">Ask new question</div>\r\n            </div>\r\n        </div>\r\n        <div class="pubble-cw-expire-step2 pubble-hide">\r\n            <div class="pubble-cw-expire-text">A new secure link to the conversation was sent to you. Please access it from your email/SMS to continue the conversation.</div>\r\n            <div class="pubble-cw-expire-actionbar">\r\n               <div class="pubble-cw-expire-killsession pubble-disabled">Close (<span class="pubble-cw-killsession-timer">5</span>)</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="pubble-cw-gdprmodal pubble-hide">\r\n        <div class="pubble-cw-gdprmodal-close"></div>\r\n        <div class="pubble-cw-gdprmodal-title">\r\nGDPR Privacy and Compliance\r\n        </div>\r\n        <div class="pubble-cw-gdprmodal-text">\r\n            \r\n          \r\n\r\n        \r\n        </div>\r\n                <div class="pubble-cw-gdprmodal-deleteme">\r\n            <div class="pubble-cw-gdprmodal-deleteme-text">In accordence with GDPR privacy law listed above u can remove any contact details and personal data stored with Pubble system and a request will be sent to all our data sharing services to do the same.<br/><br/>To complete the delete me procedure please follow the simple steps in the email/sms sent to you\r\n            </div>\r\n            <div class="pubble-cw-gdprmodal-deleteme-btn">Delete me</div>\r\n            <div class="pubble-cw-gdprmodal-deleteme-confirm pubble-hide">An email/SMS was sent to you. If u want to continue the "delet me" process please follow instructions in that message</div>\r\n        </div>\r\n    </div>\r\n    <div class="pubble-cw-powered-container">\r\n    <div class="pubble-cw-powered">\r\n                        <a class="pubble-cw-powered-link" >\r\n                            </a>\r\n</div>\r\n    </div>\r\n    <!-- START PANEL NOTIFICATIONS -->\r\n    \r\n    <div class="pubble-cw-panel-notifications">\r\n        <div class="pubble-cw-panel-notif-container">\r\n            <div class="pubble-cw-panel-notif-author"></div>\r\n            <div class="pubble-cw-panel-notif-message"></div>\r\n            <!-- can also be "question marked as resolved" or "image posted" -->\r\n        </div>\r\n    </div>\r\n    <!-- END PANEL NOTIFICATIONS -->\r\n\r\n    <!-- START PANEL CONTROLS -->\r\n    <div class="pubble-cw-panel-controls">\r\n         <!-- START PANEL TOP -->\r\n        \r\n            \r\n        <div class="pubble-cw-panel-top">\r\n            <div class="pubble-cw-top-list pubble-cw-top pubble-off">\r\n                <div class="pubble-cw-top-primary">Previous conversations</div>\r\n                <div class="pubble-cw-top-secondary pubble-cw-top-secondary-1">with CommunityName</div>\r\n            </div>\r\n            <div class="pubble-cw-top-assign pubble-cw-top pubble-off">\r\n                <div class="pubble-cw-top-primary">Contact a group or person below</div>\r\n                <div class="pubble-cw-top-secondary pubble-off">click tile to start messaging</div>\r\n            </div>\r\n\r\n            <div class="pubble-cw-top-conv pubble-cw-conv pubble-off">\r\n\r\n                <div class="pubble-cw-top-title pubble-client-color"></div>\r\n                <div class="pubble-cw-top-status"></div>\r\n                <div class="pubble-cw-top-status-community pubble-off">Community name</div>\r\n                <div class="pubble-cw-top-branding pubble-cw-ispubble"></div>\r\n\r\n           </div>\r\n\r\n        </div>\r\n        <!--   END PANEL TOP -->\r\n        \r\n        <div class="pubble-cw-panel-info-container">\r\n            <div class="pubble-cw-panel-info pubble-cw-panel-info-list pubble-hide">Revisit old conversations</div>\r\n            <div class="pubble-cw-panel-info pubble-cw-panel-info-new pubble-hide">Want to ask a new question?</div>\r\n            <div class="pubble-cw-panel-info pubble-cw-panel-info-activity pubble-hide">You have a new reply to another question</div>\r\n        </div>\r\n\r\n        <!-- START PANEL CONTROLS - MENU -->\r\n        <!--\r\n            <div class="pubble-cw-panel-controls-menu">\r\n            \r\n               \r\n            </div>\r\n            -->\r\n        <!--   END PANEL CONTROLS - MENU -->\r\n\r\n       \r\n        \r\n         <!-- START PANEL CONTROLS - NEWQ -->\r\n        <div class="pubble-cw-panel-controls-newq">\r\n            <div class="pubble-cw-panel-controls-newq-bgico">\r\n                <span></span>\r\n            </div>\r\n            <div class="pubble-cw-panel-controls-newq-newico"></div>\r\n            <div class="pubble-cw-panel-controls-newq-number"></div>\r\n            <div class="pubble-cw-panel-controls-newq-add">+</div>\r\n            <div class="pubble-cw-panel-controls-newq-notif"></div>\r\n\r\n        </div>\r\n        <!--   END PANEL CONTROLS - NEWQ -->\r\n        \r\n          <!-- START PANEL HELPTEXT  -->\r\n        <div class="pubble-cw-panel-helptext">\r\n            <div class="pubble-cw-panel-helptext-bubble pubble-cw-panel-helptext-new pubble-hide">\r\n                <span>Click here to ask a new question</span>\r\n            </div>\r\n             <div class="pubble-cw-panel-helptext-bubble pubble-cw-panel-helptext-list pubble-hide">\r\n                <span>Click to view your previous asked questions or ask a new one</span>\r\n            </div>\r\n        </div>\r\n        <!--   END PANEL HELPTEXT -->\r\n\r\n\r\n        <!-- START PANEL CONTROLS - HIDE -->\r\n        <div class="pubble-cw-panel-controls-hide">\r\n\r\n\r\n        </div>\r\n\r\n        <!--   END PANEL CONTROLS - HIDE -->\r\n\r\n      \r\n        <!--   END PANEL CONTROLS - HIDE -->\r\n        \r\n          <!-- START PANEL CONTROLS - NOTIF -->\r\n        <div class="pubble-cw-getnotif-handle pubble-off">\r\n                    <div class="pubble-cw-getnotif-handle-ico-notif"></div>\r\n                    <div class="pubble-cw-getnotif-handle-ico-hide"></div>\r\n                    <!--<div class="pubble-cw-getnotif-handle-ico-avatar"></div>-->\r\n\r\n\r\n                </div>\r\n        <!--   END PANEL CONTROLS - NOTIF -->\r\n\r\n        <!-- START PANEL CONTROLS - CLOSE -->\r\n        <div class="pubble-cw-panel-controls-close">\r\n                <span class="pubble-cw-panel-controls-close-ico pubble-cw-panel-controls-close-ico-thick"></span>\r\n\r\n        </div>\r\n        <!--   END PANEL CONTROLS - CLOSE -->\r\n    </div>\r\n    <!--   END PANEL CONTROLS-->\r\n\r\n    <!-- START PANEL CONTENT -->\r\n    <div class="pubble-cw-panel-content">\r\n        \r\n        <!-- START PANEL MAIN - GET NOTIFICATION -->\r\n            <div class="pubble-cw-getnotif pubble-cw-getnotif-off">\r\n                <div class="pubble-cw-getnotif-drawer">\r\n                    <div class="pubble-cw-getnotif-content">\r\n                        <div class="pubble-cw-getnotif-content-logged">\r\n                            <div class="pubble-cw-logged-avatar"></div>\r\n                            <div class="pubble-cw-logged-username">Ioan Stanicu</div>\r\n                            <div class="pubble-cw-logged-text">You are a member of NAME community on pubble and are currently logged in</div>\r\n                            <div class="pubble-cw-logged-back">Back</div>\r\n                        </div>    \r\n\r\n                        <div class="pubble-cw-getnotif-content-main">\r\n                            \r\n                            <div class="pubble-cw-getnotif-text">\r\n                                Get notified when you receive a message to the questions you ask\r\n                            </div>\r\n                            <div class="pubble-cw-getnotif-card">\r\n                   \r\n                                \r\n                            </div>\r\n                            \r\n                            <div class="pubble-cw-getnotif-link pubble-off">\r\n                                <div class="pubble-cw-notif-text2">You can revisit conversation by using this link </div>\r\n                                <div class="pubble-cw-notif-link"></div>\r\n                            </div>\r\n                            \r\n                            <div class="pubble-cw-getnotif-notme pubble-off">\r\n                                <div class="pubble-cw-getnotif-notme-text">If you are not this user you can clear all the data and all converations and ask a new question</div>\r\n                                <div class="pubble-cw-getnotif-notme-btm">This is not me. Clear data.</div>\r\n                            </div>\r\n                            \r\n                            \r\n\r\n                        </div>\r\n                        \r\n                        <div class="pubble-cw-getnotif-content-close">\r\n                            <div class="pubble-cw-getnotif-content-close-btn">Close</div>\r\n                        </div>    \r\n\r\n\r\n                       \r\n                       \r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- END PANEL MAIN - GET NOTIFICATION -->\r\n        \r\n        \r\n        <!-- START PANEL TOP \r\n        <div class="pubble-cw-panel-top">\r\n            <div class="pubble-cw-top-title"></div>\r\n            <div class="pubble-cw-top-status"></div>\r\n            <div class="pubble-cw-top-branding pubble-cw-ispubble"></div>\r\n\r\n        </div>-->\r\n        <!--   END PANEL TOP -->\r\n        \r\n        \r\n        \r\n        \r\n        <!-- START PANEL CONTENT FORM -->\r\n       <div class="pubble-cw-panel-main pubble-cw-form-container pubble-hide">\r\n\r\n\r\n       \r\n     \r\n\r\n        </div> \r\n        <!-- END PANEL CONTENT FORM -->\r\n        \r\n        \r\n        \r\n        <div class="pubble-cw-panel-main pubble-cw-chat-container">\r\n\r\n            <!-- START PANEL MAIN - CHAT -->\r\n            <div class="pubble-cw-chat">\r\n\r\n                <!-- START PANEL CHAT - MIDDLE -->\r\n                <div class="pubble-cw-panel-middle">\r\n\r\n                    <!-- START PANEL CHAT - DIALOG -->\r\n                    <div class="pubble-cw-panel-dialog">\r\n\r\n                    </div>\r\n                    <!--   END PANEL CHAT - DIALOG -->\r\n                    \r\n                </div>\r\n                <!--   END PANEL CHAT - MIDDLE -->\r\n                <!-- START NEW ITEM (INVALIDQ) - BOTTOM -->\r\n                 <div class="pubble-cw-panel-bottom pubble-cw-invalidq">\r\n                   \r\n                    <div class="pubble-cw-btn-newquestion pubble-cw-btn-newquestion-btn3 pubble-cw-btn-main">Ask a new question</div>\r\n                    \r\n                </div>\r\n                \r\n                \r\n                <!-- END NEW ITEM (INVALIDQ) - BOTTOM -->\r\n                <!-- START PANEL CHAT - BOTTOM -->\r\n                <div class="pubble-cw-panel-bottom pubble-cw-chatbox">\r\n                    <div class="pubble-cw-input-presence pubble-hide">\r\n                        <div class="pubble-cw-input-presence-avatar"></div>\r\n                        <div class="pubble-cw-input-presence-typing">\r\n                            <span class="pubble-cw-input-presence-username"></span>\r\n                            is typing...\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- START PANEL CHAT - INPUT SECTION -->\r\n                    <!-- START UPLOAD SECTION -->\r\n                    <div class="pubble-cw-input-waiting">\r\n                        <div class="pubble-cw-input-waiting-left-progress-bar">\r\n                            <span class="pubble-cw-input-waiting-left-bar">\r\n                                <span class="pubble-cw-input-waiting-left-progress pubble-cw-background"></span>\r\n                            </span>\r\n                        </div>\r\n                        <div class="pubble-cw-input-waiting-right-progress-bar">\r\n                            <span class="pubble-cw-input-waiting-right-bar">\r\n                                <span class="pubble-cw-input-waiting-right-progress pubble-cw-background"></span>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="pubble-cw-input-progress">\r\n                        <div class="pubble-cw-input-progress-default"></div>\r\n                        <div class="pubble-cw-input-progress-ie9"></div>\r\n                    </div>\r\n           <!-- UPLOAD HIDDEN\r\n              <div class="pubble-cw-input-upload">\r\n              \r\n                  <div class="pubble-cw-input-trigger" id="pubble-cw-input-trigger"></div>\r\n                  \r\n              </div>\r\n-->\r\n              <div class="pubble-cw-input-filelist" style="display:none"></div>\r\n\r\n                        <!-- END END UPLOAD SECTION -->\r\n\r\n                    \r\n\r\n\r\n                     <div class="pubble-cw-input-actions">\r\n                        <div class="pubble-cw-input-actions-list-left">\r\n                            <div class="pubble-cw-input-actions-item pubble-cw-action-emoji">\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-actions-item pubble-cw-action-screenbrag">\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-actions-item pubble-cw-action-location">\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                        <div class="pubble-cw-input-actions-list-right">\r\n                            <div class="pubble-cw-input-actions-item pubble-cw-action-att pubble-show">\r\n                                 <div class="pubble-cw-input-upload">\r\n                                        <div class="pubble-cw-input-trigger" id="pubble-cw-input-trigger"></div>\r\n                                </div>\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-actions-item pubble-cw-action-post pubble-hide">\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </div>\r\n                        </div>     \r\n                    </div>\r\n\r\n\r\n                      <div class="pubble-cw-input-textarea-emoji-list-container pubble-hide">\r\n                          <!--\r\n                          <div class="pubble-cw-input-textarea-emoji-list ">\r\n                              <ul>\r\n                                  \r\n                              </ul>\r\n                          </div>\r\n-->\r\n                          <!-- INJECTED -->\r\n                          <div class="pubble-emoji-list-container">\r\n                            <ul class="pubble-emoji-list">\r\n                                \r\n                                \r\n                              \r\n                            </ul>\r\n                          \r\n                          </div>\r\n                          <!-- END INJECTED -->\r\n                          \r\n                       <div class="pubble-cw-input-textarea-emoji-hover">\r\n                           <div class="pubble-cw-input-textarea-emoji-hover-default">Emoji</div>\r\n                           <div class="pubble-cw-input-textarea-emoji-hover-content pubble-off">\r\n                                   <div class="pubble-cw-input-textarea-emoji-hover-ico"></div>\r\n                                   <div class="pubble-cw-input-textarea-emoji-hover-code"></div>\r\n                          </div>\r\n                      </div>\r\n\r\n </div>\r\n                    \r\n                    <div class="pubble-cw-input-container pubble-cw-input-default ">\r\n                        <div class="pubble-cw-input">\r\n                            <!--\r\n                            <div class="pubble-cw-input-textarea-placeholder">Message…</div>\r\n-->                            \r\n                            <div class="pubble-cw-input-textarea-actual">\r\n                                <pre></pre>\r\n                                <textarea  placeholder="Message..." class="pubble-cw-input-textarea" style="height:20px !important;"> </textarea>\r\n                                \r\n                            </div>\r\n                             <div class="pubble-cw-input-textarea-skip pubble-cw-input-textarea-skip-disabled pubble-cw-button-color-2">Skip</div>\r\n                            <div class="pubble-cw-input-textarea-send pubble-cw-input-textarea-send-disabled pubble-cw-button-color-1 pubble-cw-btn-main">Send</div>\r\n\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="pubble-cw-input-container pubble-cw-input-iscredentials pubble-off">\r\n                        <div class="pubble-cw-input-buttonbar">\r\n                            <div class="pubble-cw-input-button-sms pubble-cw-button-color-1 pubble-cw-btn-main">\r\n                                <div class="pubble-cw-input-button-ico"></div>\r\n                                <div class="pubble-cw-input-button-text">SMS</div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-button-email pubble-cw-button-color-1 pubble-cw-btn-main">\r\n                                <div class="pubble-cw-input-button-ico"></div>\r\n                                <div class="pubble-cw-input-button-text">E-mail</div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-button-link pubble-cw-button-color-2 pubble-cw-btn-main">\r\n                                <div class="pubble-cw-input-button-ico"></div>\r\n                                <div class="pubble-cw-input-button-text">Link</div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-button-skip pubble-cw-button-color-2">\r\n                                <div class="pubble-cw-input-button-ico"></div>\r\n                                <div class="pubble-cw-input-button-text">Skip</div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class="pubble-cw-input-buttonbar-sms pubble-gdpr-parent  pubble-md-gdpr-off pubble-off">\r\n                            <div class="pubble-cw-input-buttonbar-back pubble-cw-button-color-2 pubble-cw-btn-main"><div class="pubble-cw-input-buttonbar-back-ico"></div></div>\r\n                            <div class="pubble-cw-input-buttonbar-content">\r\n                                <div class="pubble-cw-input-buttonbar-phonewidget">\r\n\r\n                                    <input type="text" placeholder="enter your phone" name="telphone" id="mobile-number" class="pubble-cw-mobile-number"/>\r\n                                    <div class="pubble-cw-input-phone-fail pubble-off">Please add a valid number</div>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-buttonbar-submit pubble-cw-button-color-1 pubble-cw-input-buttonbar-phone-submit  pubble-cw-btn-main">Submit</div>\r\n                            <div class="pubble-gdpr">\r\n                    <div class="pubble-gdpr-error pubble-hide">\r\nIn order to submit contact details you have to agree to GDPR listed below\r\n                    </div>\r\n                    <div class="pubble-gdpr-action">\r\n                    </div>\r\n                    <div class="pubble-gdpr-text">\r\n<span>I consent that any personal data I provide can be processed in accordance with the <span class="pubble-gdpr-text-link pubble-md-gdprmodal">Privacy Statement</span>.</span>\r\n                    </div>\r\n                </div>\r\n                           \r\n                        </div>\r\n\r\n                        <div class="pubble-cw-input-buttonbar-email pubble-gdpr-parent  pubble-md-gdpr-off  pubble-off">\r\n                            <div class="pubble-cw-input-buttonbar-back pubble-cw-button-color-2 pubble-cw-btn-main"><div class="pubble-cw-input-buttonbar-back-ico"></div></div>\r\n                            <div class="pubble-cw-input-buttonbar-content">\r\n                                <div class="pubble-cw-input-ico"></div>\r\n                                <div class="pubble-cw-input-email">\r\n                                    <input type="text" placeholder="enter email" name="email">\r\n                                    <div class="pubble-cw-input-email-fail pubble-off">Please provide a valid email!</div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-email-submit pubble-cw-button-color-1 pubble-client-bg pubble-cw-btn-main">Submit</div>\r\n                            <div class="pubble-gdpr">\r\n                    <div class="pubble-gdpr-error pubble-hide">\r\nIn order to submit contact details you have to agree to GDPR listed below\r\n                    </div>\r\n                    <div class="pubble-gdpr-action">\r\n                    </div>\r\n                    <div class="pubble-gdpr-text">\r\n<span>I consent that any personal data I provide can be processed in accordance with the <span class="pubble-gdpr-text-link pubble-md-gdprmodal">Privacy Statement</span>.</span>\r\n                    </div>\r\n                </div>\r\n\r\n                        </div>\r\n\r\n                        <div class="pubble-cw-input-buttonbar-link pubble-off">\r\n                            <div class="pubble-cw-input-buttonbar-content"></div>\r\n                            <div class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-got-submit pubble-cw-button-color-1 pubble-client-bg">Got it</div>\r\n                            <div class="pubble-cw-input-buttonbar-back pubble-cw-button-color-2 pubble-off">Back</div>\r\n                        </div>\r\n\r\n\r\n\r\n\r\n                        <!--   END PANEL CHAT - INPUT SECTION -->\r\n\r\n                    </div>\r\n                    \r\n                    \r\n                    \r\n                      <div class="pubble-cw-input-container pubble-cw-input-processing pubble-off ">\r\n                           <div class="pubble-cw-input-processing-container ">\r\n                            <div class="pubble-cw-input-processing-ico-dot ">\r\n                          \r\n                    </div>   \r\n                           <div class="pubble-cw-input-processing-ico ">\r\n                          \r\n                    </div>\r\n                                <div class="pubble-cw-input-processing-text ">\r\n                         Processing\r\n                    </div>\r\n                    </div>\r\n                    </div>\r\n                    \r\n                    \r\n                      \r\n                      <div class="pubble-cw-input-container pubble-cw-input-faqhelp pubble-off ">                       \r\n                          <div class="pubble-cw-input-infoico"></div>\r\n                           <div class="pubble-cw-input-buttonbar-content">Did any of the FAQ\'s help</div>\r\n                            <div class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-yes pubble-cw-input-buttonbar-faq-yes pubble-cw-button-color-1 pubble-cw-btn-main">Yes</div>\r\n                              <div class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-no pubble-cw-input-buttonbar-faq-no pubble-cw-button-color-3">No</div>\r\n                           \r\n                      </div>\r\n                    \r\n                        <div class="pubble-cw-input-container pubble-cw-input-anythingelse pubble-off ">\r\n                            <div class="pubble-cw-input-infoico"></div>\r\n                           <div class="pubble-cw-input-buttonbar-content">Anything else?</div>\r\n                            <div class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-yes pubble-cw-input-buttonbar-any-yes pubble-cw-button-color-1 pubble-cw-btn-main">Yes</div>\r\n                              <div class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-no pubble-cw-input-buttonbar-any-no pubble-cw-button-color-3">No</div>\r\n                    </div>\r\n                    \r\n                        <div class="pubble-cw-input-container pubble-cw-input-location pubble-off ">\r\n                            <div class="pubble-cw-input-infoico"></div>\r\n                           <div class="pubble-cw-input-buttonbar-content">This will share your location with the moderator. Continue?</div>\r\n                            <div class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-yes pubble-cw-input-buttonbar-any-yes pubble-cw-button-color-1 pubble-cw-btn-main">Yes</div>\r\n                              <div class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-no pubble-cw-input-buttonbar-any-no pubble-cw-button-color-3">Cancel</div>\r\n                    </div>\r\n                    <!--   END PANEL CHAT - BOTTOM -->\r\n\r\n                    \r\n\r\n\r\n\r\n\r\n                    <div class="pubble-cw-panel-bottom pubble-cw-endconv pubble-off">\r\n                        <!—- START END-CONVERSATION -->\r\n\r\n\r\n\r\n                        <div class="pubble-cw-input-container">\r\n                            <div class="pubble-cw-input">\r\n                                <div class="pubble-cw-input-endconv-text">Chat Closed\r\n                                  </div>\r\n                                 <!--<div class="pubble-cw-input-endconv-reopen pubble-cw-reopen pubble-cw-button-color-1 pubble-cw-btn-main">Reopen Conversation</div>-->\r\n                                <div class="pubble-cw-input-endconv-create pubble-cw-startnew pubble-cw-button-color-1 pubble-cw-btn-main">New Chat</div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                       <!--  <div class="pubble-cw-powered">\r\n                            <a class="pubble-cw-powered-link" href="http://pubble.io" target="_blank">\r\n                            </a>\r\n\r\n                        </div>\r\n                          END END-CONVERSATION -->\r\n\r\n                    </div>\r\n\r\n\r\n\r\n\r\n                </div>\r\n                <!--   END PANEL MAIN - CHAT -->\r\n\r\n                <!-- START PANEL MAIN - NEWQ -->\r\n                <div class="pubble-cw-newq pubble-off">\r\n\r\n                    <!-- START PANEL NEWQ - MIDDLE -->\r\n                    <div class="pubble-cw-panel-middle">\r\n\r\n                        <!-- START PANEL NEWQ - TEXT -->\r\n                        <div class="pubble-cw-panel-newq-text">\r\n                            Opening a new conversation will close this one permanently. Are you sure?\r\n                        </div>\r\n                        <!--   END PANEL NEWQ - TEXT -->\r\n\r\n\r\n                    </div>\r\n                    <!--   END PANEL NEWQ - MIDDLE -->\r\n\r\n                    <!-- START PANEL NEWQ - BOTTOM -->\r\n                    <div class="pubble-cw-panel-bottom">\r\n                        <!-- START PANEL CHAT - INPUT SECTION -->\r\n                        \r\n                        \r\n                        \r\n\r\n                        <div class="pubble-cw-input-container">\r\n                            <div class="pubble-cw-input">\r\n                                <div class="pubble-cw-input-newq-cancel pubble-cw-button-color-2">Cancel</div>\r\n                                <div class="pubble-cw-input-newq-create pubble-cw-startnew pubble-cw-button-color-1 pubble-client-bg">New Question</div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                       <div class="pubble-cw-powered">\r\n                            <a class="pubble-cw-powered-link" >\r\n                            </a>\r\n\r\n                        </div>\r\n                          <!--  END PANEL NEWQ - INPUT SECTION -->\r\n\r\n                    </div>\r\n                    <!--   END PANEL NEWQ - BOTTOM -->\r\n\r\n                </div>\r\n                <!--   END PANEL MAIN - NEWQ-->\r\n\r\n            </div>\r\n        </div>\r\n        <!--   END PANEL CONTENT -->\r\n        \r\n        <!-- LOADING DIV -->   \r\n         <div class="pubble-cw-chatlist-loading pubble-off">\r\n                 <div class="pubble-cw-chatlist-loading-ico">\r\n                     <div class="pubble-cw-dialog-item-waiting-ico">\r\n                         <div class="pubble-cw-dialog-item-waiting-ico-dots pubble-client-bg"></div>\r\n                     </div>\r\n                </div> \r\n            </div>    \r\n        <!-- END LOADING DIV -->    \r\n        \r\n      \r\n        <!-- CHAT LIST -->\r\n        <div class="pubble-cw-panel-main pubble-cw-chatlist-container pubble-hide">\r\n           \r\n            <div class="pubble-cw-chatlist-holder">\r\n                <div class="pubble-cw-panel-middle">\r\n                    \r\n                    <div class="pubble-cw-chat-list">\r\n                        <!-- REPETITIVE CHAT ITEM -->\r\n\r\n                        <!-- \r\npubble-cw-chat-mod pubble-cw-chat-mod-isperson - if mod is person\r\npubble-cw-chat-mod pubble-cw-chat-mod-ischannel - if mod is channel\r\npubble-cw-chat-mod pubble-cw-chat-mod-iscommunity - if mod is community (default)\r\npubble-cw-chat-last pubble-cw-chat-last-ismod - if last chat in there is from mod\r\npubble-cw-chat-last pubble-cw-chat-last-isvisitor - if last chat in there is from visitor\r\n<div class="pubble-cw-btn-newquestion-btn"></div>\r\n-->\r\n                        \r\n                        <!-- END CHAT ITEM -->\r\n                    </div>\r\n                </div>\r\n                <div class="pubble-cw-panel-bottom">\r\n                    <div class="pubble-cw-btn-newquestion-btn" style="displaye:none"></div>\r\n                    <div class="pubble-cw-btn-newquestion pubble-cw-btn-newquestion-btn1 pubble-cw-btn-main">Ask a new question</div>\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- END CHAT LIST -->\r\n        \r\n        \r\n        <!-- CONTACT LIST -->\r\n        <div class="pubble-cw-panel-main pubble-cw-contactlist-container pubble-hide">\r\n            <div class="pubble-cw-contactlist-holder">\r\n                <div class="pubble-cw-panel-middle">\r\n                    \r\n                    <div class="pubble-cw-contact-list">\r\n                        \r\n                        <!-- REPETITIVE CONTACT ITEM -->\r\n                        \r\n                        <!-- END CONTACT ITEM -->\r\n                        \r\n                    </div>\r\n                </div>\r\n                <div class="pubble-cw-panel-bottom">\r\n                    <div class="pubble-cw-btn-newquestion pubble-cw-btn-newquestion-btn2 pubble-cw-btn-main">Ask community</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- END CONTACT LIST -->\r\n        \r\n        \r\n    </div>\r\n    \r\n    <div class="pubble-cw-contactbot-custom">\r\n    </div>\r\n\r\n    <!-- start Mixpanel \r\n    <script type="text/javascript">\r\n        (function (f, b) {\r\n            if (!b.__SV) {\r\n                var a, e, i, g;\r\n                window.mixpanel = b;\r\n                b._i = [];\r\n                b.init = function (a, e, d) {\r\n                    function f(b, h) {\r\n                        var a = h.split(".");\r\n                        2 == a.length && (b = b[a[0]], h = a[1]);\r\n                        b[h] = function () {\r\n                            b.push([h].concat(Array.prototype.slice.call(arguments, 0)))\r\n                        }\r\n                    }\r\n                    var c = b;\r\n                    "undefined" !== typeof d ? c = b[d] = [] : d = "mixpanel";\r\n                    c.people = c.people || [];\r\n                    c.toString = function (b) {\r\n                        var a = "mixpanel";\r\n                        "mixpanel" !== d && (a += "." + d);\r\n                        b || (a += " (stub)");\r\n                        return a\r\n                    };\r\n                    c.people.toString = function () {\r\n                        return c.toString(1) + ".people (stub)"\r\n                    };\r\n                    i = "disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");\r\n                    for (g = 0; g < i.length; g++) f(c, i[g]);\r\n                    b._i.push([a, e, d])\r\n                };\r\n                b.__SV = 1.2;\r\n                a = f.createElement("script");\r\n                a.type = "text/javascript";\r\n                a.async = !0;\r\n                a.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";\r\n                e = f.getElementsByTagName("script")[0];\r\n                e.parentNode.insertBefore(a, e)\r\n            }\r\n        })(document, window.mixpanel || []);\r\n        mixpanel.init("76db2e2bde9dc0445f42c2b3d88526c8", {}, "mixpb");\r\n    </script>-->\r\n    <!-- end Mixpanel c01c75f46e1004ae6565f4df22fb093f-->\r\n\r\n\r\n</div>\r\n<!--   END PANEL -->'}),pubblebot.define("text!templates/message.tpl",[],function(){return'<div class="pubble-cw-dialog-item-maindot">\r\n    <div class="pubble-cw-dialog-item-dot"></div>\r\n    <div class="pubble-cw-dialog-item-pulse"></div>\r\n</div>\r\n\r\n<div class="pubble-cw-dialog-item-avatar">\r\n  <img src="<%= avatar%>">\r\n</div>\r\n     <div class="pubble-cw-dialog-item-header">\r\n        <div class="pubble-cw-dialog-item-name"><%= alias%></div>\r\n    </div>  \r\n<div class="pubble-cw-dialog-item-content">\r\n    <div class="pubble-cw-dialog-item-time"><%= time%></div>   \r\n    <div class="pubble-cw-dialog-item-middle">    \r\n        <div class="pubble-cw-dialog-item-text"><%= content%></div>\r\n        <div class="pubble-cw-att-container pubble-off"></div>\r\n    </div>\r\n       \r\n</div>   \r\n \r\n<div class="pubble-cw-dialog-item-footer">\r\n           \r\n    \r\n        <div class="pubble-cw-dialog-item-ticks pubble-off">\r\n            <div class="pubble-cw-dialog-item-tick pubble-cw-tick-pending"></div>\r\n            <!-- Use for coding pubble-cw-tick-server-off and pubble-cw-tick-server-on -->\r\n            <div class="pubble-cw-dialog-item-tick  <%if(!read){%>pubble-cw-tick-server-off<%}else{%> pubble-cw-tick-server-on<%}%> pubble-cw-tick-server"></div>\r\n            <!-- Use for coding pubble-cw-tick-mod-off and pubble-cw-tick-mod-on  -->\r\n            <div class="pubble-cw-dialog-item-tick  <%if(read){%>pubble-cw-tick-mod-on<%}else{%> pubble-cw-tick-mod-off<%}%><%if(!posted){%> pubble-off<%}%>  pubble-cw-tick-mod"></div>\r\n        </div>  \r\n        \r\n        <div class="pubble-cw-dialog-item-status"><%if(!posted){%>Sending...<%}else{%> <%if(!read){%>Not seen yet<%}else{%>Seen<%}%>   <%}%></div> \r\n        \r\n    </div>'}),pubblebot.define("text!templates/conversation.tpl",[],function(){return'                     \n  <!--\n                                        pubble-cw-chat-replymarker + pubble-cw-chat-replymarker-mod OR pubble-cw-chat-replymarker-visitor\n                                        pubble-cw-chat-replymarker + (default empty) / pubble-cw-chat-replymarker-unread\n                                -->\n<div class="pubble-cw-chat-avatar">\n                                    <div class="pubble-cw-chat-avatar-img"><img src="<%= avatar%>"></div> \n                                    <div class="pubble-cw-chat-avatar-marker"></div> \n                                </div> \n    <div class="pubble-cw-chat-item-container">\n                                <div class="pubble-cw-chat-replymarker"></div> \n                                \n                                    \n                                <div class="pubble-cw-chat-mod"><%= alias%></div>  \n                                <div class="pubble-cw-chat-time"><%=timediff%></div>    \n                                <!-- <div class="pubble-cw-chat-first"><%= content%></div>-->\n                                <%if(replied){%>  \n                                     <div class="pubble-cw-chat-last <%if(moderator_reply){%>pubble-cw-chat-last-ismod pubble-client-color<%}else{%>pubble-cw-chat-last-isvisitor<%}%>"><%= reply_content%></div> \n                                <%}else {%>\n            <div class="pubble-cw-chat-last pubble-cw-chat-last-isvisitor"><%= content%></div> \n                                <%}%>\n</div>'}),pubblebot.define("text!templates/contactCard.tpl",[],function(){return'<div class="pubble-cw-getnotif-tab-bar">\n    <div class="pubble-cw-getnotif-bar-options">\n        <div class="pubble-cw-getnotif-bar-option pubble-cw-isemail pubble-isselected">Email</div>\n        <div class="pubble-cw-getnotif-bar-option pubble-cw-issms">SMS</div>\n        <div class="pubble-cw-getnotif-bar-option pubble-cw-iswhy"></div>\n    </div>\n    <div class="pubble-cw-getnotif-bar-line"></div>\n</div>\n<div class="pubble-cw-getnotif-tabs">\n                                    <div class="pubble-cw-getnotif-tab pubble-cw-tab-issms pubble-hide">\n                                        <div class="pubble-cw-getnotif-content-buttonbar-action pubble-cw-issms">\n                                            <div class="pubble-cw-getnotif-content-buttonbar-action-cancel"></div>\n                                            \n                                            <div class="pubble-cw-getnotif-content-buttonbar-row">\n                                                <div class="pubble-cw-getnotif-content-buttonbar-action-inputbox pubble-cw-getnotif-content-buttonbar-action-inputbox-sms">\n                                                    <input type="text" placeholder="enter your phone" name="telphone" class="pubble-cw-mobile-number"/>\n                                                </div>\n                                                <div class="pubble-cw-getnotif-content-buttonbar-action-button pubble-cw-getnotif-content-buttonbar-action-button-sms pubble-cw-button-color-1 pubble-cw-btn-main">\n                                                    <div class="pubble-cw-getnotif-content-buttonbar-action-button-ico"></div>\n                                                </div>\n                                            </div>\n                                            <div class="pubble-cw-getnotif-content-buttonbar-action-done pubble-cw-button-color-1 pubble-client-bg">Thanks!</div>\n                                            <div class="pubble-cw-getnotif-content-buttonbar-action-fail pubble-cw-getnotif-content-buttonbar-action-fail-sms">Not a valid phone number. Please try again.</div>\n                                        </div>\n                                    </div>\n                                    <div class="pubble-cw-getnotif-tab pubble-cw-tab-isemail pubble-show">\n                                        <div class="pubble-cw-getnotif-content-buttonbar-action pubble-cw-isemail">\n                                            <div class="pubble-cw-getnotif-content-buttonbar-action-cancel"></div>\n                                            \n                                            <div class="pubble-cw-getnotif-content-buttonbar-row">\n                                                <div class="pubble-cw-getnotif-content-buttonbar-action-inputbox pubble-cw-getnotif-content-buttonbar-action-inputbox-email">\n                                                     <input type="text" placeholder="enter your email" name="email" class="pubble-cw-email-input"/>\n                                                </div>\n                                                <div class="pubble-cw-getnotif-content-buttonbar-action-button pubble-cw-getnotif-content-buttonbar-action-button-email pubble-cw-button-color-1 pubble-cw-btn-main">\n                                                    <div class="pubble-cw-getnotif-content-buttonbar-action-button-ico"></div>\n                                                </div>\n                                            </div>\n                                            <div class="pubble-cw-getnotif-content-buttonbar-action-done pubble-cw-button-color-1">Thanks!</div>\n                                            <div class="pubble-cw-getnotif-content-buttonbar-action-fail pubble-cw-getnotif-content-buttonbar-action-fail-email">Not a valid email. Please try again.</div>\n                                        </div>\n                                    </div>\n                                    <div class="pubble-cw-getnotif-tab pubble-cw-tab-iswhy pubble-hide">\n                                        <div class="pubble-cw-tab-iswhy-txt">Please provide a way (email or SMS) for us to contact you with an answer</div>\n                                    </div>\n                                </div>\n<div class="pubble-gdpr">\n    <div class="pubble-gdpr-error pubble-hide"> As you are submitting personal data, you must agree to consent before continuing. </div>\n    <div class="pubble-gdpr-action"> </div>\n    <div class="pubble-gdpr-text"> <span>I consent that any personal data I provide can be processed in accordance with the <span class="pubble-gdpr-text-link pubble-md-gdprmodal">Privacy Statement</span>.</span>\n    </div>\n                    \n</div>\n<div class="pubble-cw-links">\n<div class="pubble-cw-link pubble-gdpr-link pubble-hide">\n    <div class="pubble-gdpr-text"> <span>Review <span class="pubble-gdpr-text-link pubble-md-gdprmodal">Privacy Statement</span></span>\n    </div>\n</div>\n<div class="pubble-cw-link pubble-cw-notme">Clear history</div>    \n</div>\n<div class="pubble-cw-notme-container pubble-off">\n    <div class="pubble-cw-notme-text">This will clear your current session from this browser. You may not be able to access your conversations again. Are you sure?</div>\n    <div class="pubble-cw-notme-actions">\n        <div class="pubble-cw-notme-action-logout">Confirm</div>\n        <div class="pubble-cw-notme-action-back">Go back</div>\n    </div>  \n</div>'}),pubblebot.define("views/contactCard",["backbone","underscore","utils/utils","text!templates/contactCard.tpl","utils/appConfig","utils/storage"],function(e,t,n,r,i,s){var o=window.jQueryPBm,u=window.$pubbBackbone.noConflict(),a=u.View.extend({template:$UScore.template(r),className:"pubble-cw-getnotif-credentials pubble-gdpr-parent pubble-md-gdpr-off",initialize:function(e){var t=this;$UScore.bindAll(this,"render"),this.app=e.app},render:function(){var e=this,t=this;this.$el.html(this.template()),i.config.parameters.enableGdpr||e.$el.find(".pubble-gdpr-parent").removeClass("pubble-md-gdpr-off").removeClass("pubble-md-gdpr-on"),i.config.parameters.smsOption||this.$el.find(".pubble-cw-issms").remove(),e.$el.find(".pubble-cw-notme").on("click",function(){var t=e.$el.find(".pubble-cw-notme-container");t.removeClass("pubble-off"),n.addClass(t,"pubble-on"),n.addClass(e.$el.parents(".pubble-cw-panel").find(".pubble-cw-getnotif-text"),"pubble-off")}),e.$el.find(".pubble-cw-notme-action-back").on("click",function(){var t=e.$el.find(".pubble-cw-notme-container");t.removeClass("pubble-on"),n.addClass(t,"pubble-off"),e.$el.parents(".pubble-cw-panel").find(".pubble-cw-getnotif-text").removeClass("pubble-off")}),e.$el.find(".pubble-cw-notme-action-logout").on("click",function(t){s.remove("visitor-id-"+i.config.appID),s.remove("pb-conversationId"),s.remove("pb-iflistPrompted"),e.$el.parents(".pubble-cw-panel").find(".pubble-cw-getnotif-text").removeClass("pubble-off");var r={contentType:"JSONP"};n.XDR(n.getEndpoints().cookieDelete,r,function(e){window.location.reload()})}),this.$el.find(".pubble-gdpr-action").on("click",function(){var t=e.$el,r=e.$el.find(".pubble-gdpr-error");t.hasClass("pubble-md-gdpr-off")?(t.removeClass("pubble-md-gdpr-off"),n.addClass(t,"pubble-md-gdpr-on"),r.removeClass("pubble-show"),n.addClass(r,"pubble-hide")):(t.removeClass("pubble-md-gdpr-on"),n.addClass(t,"pubble-md-gdpr-off"))}),this.$el.find(".pubble-gdpr-text-link").on("click",function(){return window.open(i.config.parameters.privacyPolicyUrl,"_blank"),!1});var r=i.config.parameters.iso3166,u=[];window.pubble_ip_country&&window.pubble_ip_country!=""&&u.push(window.pubble_ip_country),r?(u.push(r),r=="gb"?(u.push("ie"),u.push("us")):r=="ie"?(u.push("gb"),u.push("us")):r=="us"&&(u.push("gb"),u.push("us"))):u=["ie","gb","us"],this.$el.find(".pubble-cw-mobile-number").intlTelInput({nationalMode:!0,numberType:"MOBILE",preferredCountries:u}),t.app.email&&t.app.email!=""&&t.app.email!="anon@pubble.co"&&t.$el.find(".pubble-cw-email-input").val(t.app.email),setTimeout(function(){t.app.sms&&t.app.sms!=""?t.app.handleSMS(t.app.sms):window.pubble_ip_country&&window.pubble_ip_country!=""&&window.pubble_ip_country!="-"&&t.app.setDefaultCountry(window.pubble_ip_country+"")},50),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-email").on("click",function(e){var t=o(e.target),r=t.parents(".pubble-cw-isemail");n.addClass(r.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email"),"pubble-off")}),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms").on("click",function(e){var t=o(e.target),r=t.parents(".pubble-cw-issms");n.addClass(r.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off")});var a=0;t.app.email&&t.app.email!=""&&t.app.email!="anon@pubble.co"?a=1:t.app.sms&&t.app.sms!=""&&(a=1);var f=e.$el.find(".pubble-gdpr"),l=e.$el.find(".pubble-gdpr-link");return a?(n.addClass(f,"pubble-hide"),l.removeClass("pubble-hide"),this.$el.removeClass("pubble-md-gdpr-off"),n.addClass(this.$el,"pubble-md-gdpr-on")):(n.addClass(l,"pubble-hide"),f.removeClass("pubble-hide"),this.$el.removeClass("pubble-md-gdpr-on"),n.addClass(this.$el,"pubble-md-gdpr-off")),i.config.parameters.enableGdpr||(n.addClass(f,"pubble-hide"),n.addClass(l,"pubble-hide")),this.$el.find(".pubble-cw-isemail").on("click",function(){e.$el.find(".pubble-cw-iswhy").removeClass("pubble-isselected"),n.addClass(e.$el.find(".pubble-cw-isemail"),"pubble-isselected"),e.$el.find(".pubble-cw-issms").removeClass("pubble-isselected");var t=e.$el.find(".pubble-cw-tab-isemail");n.addClass(t,"pubble-show"),t.removeClass("pubble-hide");var t=e.$el.find(".pubble-cw-tab-iswhy");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show");var t=e.$el.find(".pubble-cw-tab-issms");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show")}),e.$el.find(".pubble-cw-issms").on("click",function(){e.$el.find(".pubble-cw-iswhy").removeClass("pubble-isselected"),e.$el.find(".pubble-cw-isemail").removeClass("pubble-isselected"),n.addClass(e.$el.find(".pubble-cw-issms"),"pubble-isselected");var t=e.$el.find(".pubble-cw-tab-iswhy");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show");var t=e.$el.find(".pubble-cw-tab-issms");n.addClass(t,"pubble-show"),t.removeClass("pubble-hide");var t=e.$el.find(".pubble-cw-tab-isemail");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show")}),e.$el.find("input").on("keypress",function(e){e.stopPropagation();var t=e.target||e.srcElement,n=-1;if(e.shiftKey&&e.which==13)n=2;else if(e.keyCode==13||e.keyCode==10)n=1;if(n>0)return e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),o(t).parent().next().trigger("click"),!1}),e.$el.find(".pubble-cw-getnotif-text").html("Get notified from "+i.config.communityName+" when you receive a message to the questions you asked"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email"),"pubble-off"),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail").on("click",function(){}),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button-email").on("click",function(){var r=t.$el,u=t.$el.find(".pubble-gdpr-error");if(i.config.parameters.enableGdpr){if(r.hasClass("pubble-md-gdpr-off"))return u.removeClass("pubble-hide"),n.addClass(u,"pubble-show"),!1;u.removeClass("pubble-show"),n.addClass(u,"pubble-hide")}var a=e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-email").find("input").val();if(!e.app.conversationId)return!1;if(n.isValidEmail(a)){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email"),"pubble-off"),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done").removeClass("pubble-off"),n.mixlog("cw-credential-alert-success",{landingPage:i.config.pageURL,communityId:i.config.communityId,appId:i.config.appID,conversationId:e.app.conversationId,type:"email"},e.app.track),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button"),"pubble-off");var f={contentType:"JSONP",email:a,anon:!0,conversationId:e.app.conversationId,postNotification:!1,postUrlSeq:!1,systemNotification:!0},l={};e.$el.parents(".pubble-cw-getnotif").length>0&&(f.postNotification=!1),i.config.parameters.enableGdpr&&(f.agreePrivacyPolicy=!0);if(a){if(a.toLowerCase().match("<.*onerr")!=null||a.toLowerCase().match("<.*onload")!=null)return e.app.warning(a,e.app.conversationId),!1;if(a.indexOf("prompt(/XSSPOSED/")!=-1)return e.app.warning(a,e.app.conversationId),!1}n.XDR(n.getEndpoints().editEmail,f,function(r){if(r.code!="200")return!1;window.location.href.indexOf("visitor=false")==-1&&r.data.type=="visitor"&&(t.visitorId=r.data.id,s.set("visitor-id-"+i.config.appID,r.data.id)),e.app.vent.trigger("pubble:messenger:contact",e.app.conversationId),e.app.handleGDPR("email"),e.app.emailProvied=!0,e.app.email=f.email,o(".pubble-cw-email-input").val(a),setTimeout(function(){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail"),"pubble-off");var t=o(".pubble-cw-getnotif-content-main");t.removeClass("pubble-off"),n.addClass(t,"pubble-on");var r=o(".pubble-cw-getnotif");n.addClass(r,"pubble-cw-getnotif-off"),o(".pubble-cw-getnotif-content-buttonbar-action-inputbox").removeClass("pubble-off"),o(".pubble-cw-getnotif-content-buttonbar-action-button").removeClass("pubble-off")},2e3)},function(){},l)}else e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email").removeClass("pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.mixlog("bot-cw-email-stick-edit",{landingPage:i.config.pageURL,communityId:i.config.communityId,appId:i.config.appID,valid:!1},e.app.track)}),this.$el.find(".pubble-cw-iswhy").on("click",function(){e.$el.find(".pubble-cw-issms").removeClass("pubble-isselected"),e.$el.find(".pubble-cw-isemail").removeClass("pubble-isselected"),n.addClass(e.$el.find(".pubble-cw-iswhy"),"pubble-isselected");var t=e.$el.find(".pubble-cw-tab-iswhy");n.addClass(t,"pubble-show"),t.removeClass("pubble-hide");var t=e.$el.find(".pubble-cw-tab-issms");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show");var t=e.$el.find(".pubble-cw-tab-isemail");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show")}),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms").find(".pubble-cw-mobile-number").on("keyup change",function(e){var t=o(e.target),n=t.val().replace(/[^-0-9]/gi,"");t.val(n)}),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button-sms").on("click",function(r){r.stopPropagation();var u=t.$el,a=t.$el.find(".pubble-gdpr-error");if(i.config.parameters.enableGdpr){if(u.hasClass("pubble-md-gdpr-off"))return a.removeClass("pubble-hide"),n.addClass(a,"pubble-show"),!1;a.removeClass("pubble-show"),n.addClass(a,"pubble-hide")}var f=e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms"),l=f.find(".pubble-cw-mobile-number"),c=l.val(),h=l.val().replace(/[^-0-9]/gi,""),p=f.find(".selected-flag"),d=p.attr("title").trim(),v=d.substring(d.indexOf("+"),d.length)+"-"+h;if(!e.app.conversationId)return!1;if(v==""||v.length<5||c.indexOf("*")>-1)return e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms").removeClass("pubble-off"),!1;n.mixlog("cw-credential-alert-success",{landingPage:i.config.pageURL,communityId:i.config.communityId,appId:i.config.appID,conversationId:e.app.conversationId,type:"sms"},e.app.track),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off"),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done").removeClass("pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button"),"pubble-off");var m={contentType:"JSONP",phone:v,anon:!0,conversationId:e.app.conversationId,postNotification:!1,postUrlSeq:!1,systemNotification:!0};e.$el.parents(".pubble-cw-getnotif").length>0&&(m.postNotification=!1);var g={};e.app.sms=v,i.config.parameters.enableGdpr&&(m.agreePrivacyPolicy=!0),t.app.handleSMS(t.app.sms);if(v){if(v.toLowerCase().match("<.*onerr")!=null||v.toLowerCase().match("<.*onload")!=null)return e.app.warning(v,e.app.conversationId),!1;if(v.indexOf("prompt(/XSSPOSED/")!=-1)return e.app.warning(v,e.app.conversationId),!1}n.XDR(n.getEndpoints().editPhone,m,function(r){e.app.vent.trigger("pubble:messenger:contact",e.app.conversationId),e.app.telProvied=!0,window.location.href.indexOf("visitor=false")==-1&&r.data.type=="visitor"&&(t.visitorId=r.data.id,s.set("visitor-id-"+i.config.appID,r.data.id)),e.app.handleGDPR("phone"),setTimeout(function(){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off");var t=e.$el.find(".pubble-cw-issms"),r=o(".pubble-cw-getnotif-content-main");r.removeClass("pubble-off"),n.addClass(r,"pubble-on");var i=o(".pubble-cw-getnotif");n.addClass(i,"pubble-cw-getnotif-off"),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox").removeClass("pubble-off")},2e3)},function(){},g)}),t.$el.find(".pubble-cw-getnotif-text").html("Get notified from "+i.config.communityName+" when you receive a message to the questions you asked"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off"),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail").on("click",function(){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email"),"pubble-off")}),e}});return a}),pubblebot.define("views/post",["backbone","underscore","utils/utils","text!templates/message.tpl","text!templates/conversation.tpl","views/contactCard"],function(e,t,n,r,i,s){var o=window.$pubbBackbone.noConflict(),u=window.jQueryPBm,a=o.View.extend({template:null,className:"pubble-cw-panel-dialog-item",attributes:function(){return{id:"PBMSG"+this.model.get("id")}},initialize:function(e){var t=this;window.$UScore.bindAll(this,"render"),this._id=e.model.get("id"),this.model=e.model,this.model.get("type")=="CV"?this.template=$UScore.template(i):this.template=$UScore.template(r)},render:function(){var e=this;this.$el.html(this.template(this.model.toJSON()));if(this.model.get("author")){if(this.model.get("author").id!=0&&this.model.get("author").alias!="Pubblebot"){n.addClass(this.$el,"pubble-cw-isadmin");var t=this.model.get("author").id+"",r=t.charAt(t.length-1),i=Math.ceil(r/2)+1;this.model.get("visitor")||n.addClass(this.$el,"pubble-cw-ismod-"+i)}this.model.get("content").indexOf("The Pubble team are busy right now, in the meantime d")!==-1&&n.addClass(this.$el,"pubble-cw-faq-prompted")}if(this.model.get("type")=="K"){n.addClass(this.$el,"pubble-cw-isbot pubble-cw-contact-skip");var o=pubblebot.require("app"),u=new s({app:o}),a=u.render().$el;a.find(".pubble-cw-notme").remove(),this.$el.html(a)}return e}});return a}),pubblebot.define("models/post",["underscore","backbone","utils/utils"],function(e,t,n){var r=window.$pubbBackbone.noConflict(),i=r.Model.extend({idAttribute:"postID",defaults:{approvable:0,guestMode:0,postID:0,callback:0,isAdmin:0,conversationID:0,posted:0,read:0,replied:0,accountAssigned:!1,communityAssigned:!1,groupAssigned:!1,lastPostFromModerator:!1,lastPostFromVisitor:!1,moderator_reply:!1},mtype:function(){},initialize:function(){var e=this.get("postID")},select:function(){this.trigger("post:selected",this)}});return i}),pubblebot.define("models/attachment",["underscore","backbone"],function(e,t,n){var r=window.$pubbBackbone.noConflict(),i=r.Model.extend({defaults:{id:0,read:1,ext:""},to_json:function(e){var t=this.toJSON();return t}});return i}),pubblebot.define("converters/converter",["utils/utils","models/attachment","utils/appConfig","utils/sizedecoder"],function(utils,matt,appConfig,sizedecoder){var $=window.jQueryPBm,converter={getEmoj:function(){return this.emojs},stringToJson:function(str){var json=eval("("+str+")");return json},setAtt:function(e,t){e.set("id",t.id),e.set("src",t.src),e.set("title",utils.safeContent(t.title)),e.set("count",t.count),e.set("customStyle","");if(t.type=="question"||t.type=="link"||t.type=="photo"||t.type=="video"||t.type=="post"||t.type=="faq"||t.type=="tweet")e.set("attType",t.type);else if(t.type=="email"||t.type=="phone"||t.type=="skip")e.set("attType",t.type);else{e.set("attType","file");if(t.src&&t.src!==null){var n=t.src.split("/"),r=n[n.length-1];(t.title==null||t.title=="")&&e.set("title",r);if(r){var i=r.split(".");i.length>1&&e.set("ext",i[1].toUpperCase())}}}e.set("desc",utils.safeContent(t.desc));if(t.src&&t.src.indexOf("amazonaws.")>-1){var s=new RegExp(/upload-images(-ss)?\/.*\/.*_(.*?).png/),o=t.src.match(s);e.set("thumbnail",t.src),e.set("imgsrc",t.src.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images")),e.set("customStyle","");var u=t.src;if(o!=null&&o[2]!=undefined){var a=o[2],f=sizedecoder.decode(a);if(f&&f.length>1){var l=280;utils.isMobile()&&(l=200);if(f[0]<=l&&f[1]<f[0])e.set("customStyle","width:"+f[0]+"px!important;height:"+f[1]+"px!important"),e.set("thumbnail",u.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images")),e.set("imgsrc",u.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images"));else if(f[0]<f[1]&&f[1]<=l)e.set("customStyle","width:"+f[0]+"px!important;height:"+f[1]+"px!important"),e.set("thumbnail",u.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images")),e.set("imgsrc",u.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images"));else if(f[0]>l&&f[1]<=f[0]){var c=Math.floor(f[1]*(l/f[0]));e.set("customStyle","width:"+l+"px!important;height:"+c+"px!important")}else if(f[0]<f[1]&&f[1]>l){var c=Math.floor(f[0]*(l/f[1]));e.set("customStyle","height:"+l+"px!important;width:"+c+"px!important")}}}}else t.src&&t.src.indexOf("media.pubble.io")!==-1?e.set("thumbnail",t.src+"?300"):e.set("thumbnail",t.thumbnail);e.set("thumbnail2",e.get("thumbnail")),t.src&&t.src.indexOf("/upload-images-s")>-1&&(e.set("thumbnail",t.src),e.set("thumbnail2",t.src.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images"))),e.set("provider",t.provider),e.set("html",t.html),e.set("authorUrl",t.authorUrl),e.set("targetId",t.targetId),e.set("pattern",t.pattern),e.set("question",t.question);var h=utils.handleURL(t.answer).replace("<.*?>","").replace(/(?:\r\n|\r|\n)/g,"<br />");return h&&(h=h.replace("&lt;p&gt;","").replace("&lt;/p&gt","")),t.answer?e.set("answer",h):e.set("answer",t.answer),e},setUser:function(e,t){return e.set("avatar",utils.handleImg(t.avatar,t.alias,"48")),e.set("id",t.id),e.set("email",t.email),e.set("shortName",t.shortName),e.set("cookieId",t.cookieId),e.set("name",t.alias),appConfig.config.parameters.postAsCommunity?e.set("alias",appConfig.config.communityName):e.set("alias",t.alias),e.set("id",t.id),e.set("title",""),e.set("bot",t.bot),t.bio!==undefined&&t.bio!==null?t.bio.length>20?e.set("title",t.bio.substring(0,20)+"..."):e.set("title",t.bio):e.set("title",""),e},setPost2:function(e,t,n){e.set("id",t.id);var r=t.content;e.set("content2",r),r=r.replaceAll("\n\n+","\n\n"),r=r.replaceAll("<","&lt;"),r=r.replaceAll(">","&gt;"),r=utils.safeContent(r);try{r=decodeURI(r)}catch(i){}r=r.replace("#@$","%"),e.set("assignees",t.assignees),e.set("status",t.status),e.set("tilelink",""),e.set("tilelinktype",""),e.set("attachments",t.attachments),e.set("count",t.count);var s=[];return r=r.replaceAll("&lt;%","<%").replaceAll("%&gt;","%>"),t.attachments&&$.each(t.attachments,function(t,i){if(i.type=="post")e.set("tilelink",i.targetId),e.set("tilelinktype","post"),e.set("tilepattern",i.pattern),r=r.replaceAll(i.pattern.replace("|","\\|"),i.fallback);else if(i.type=="account"){var o=i.html;n&&$.each(n.models,function(e,t){if(t.get("id")==i.targetId)return o=t.get("alias"),!0}),r=r.replaceAll(i.pattern,'<a class="bot-post-user" data="'+i.targetId+'">'+o+"</a>")}else if(i.type=="faq")r=r.replace(i.pattern,"");else{var u=new matt;u=converter.setAtt(u,i),s.push(u)}}),e.set("atts",s),n&&$.each(n.models,function(n,r){if(r.get("id")==t.author.id)return t.author.alias=r.get("alias"),t.author.avatar=r.get("avatar"),e.set("user",r),!0}),e.set("content",utils.handleURL(r)),e.set("conversationId",t.conversationId),e.set("dateCreated",t.dateCreated),e.set("lastUpdated",t.lastUpdated),e.set("type",t.type),e.set("voted",t.voted),e.set("votes",t.votes),e.set("author",t.author),e.set("avatar",utils.handleImg(t.author.avatar+"?72",t.author.alias,"48")),e.set("anonymous",t.anonymous),e.set("timer2",t.lastUpdated),e.set("time2",utils.formatAMPM(new Date(t.lastUpdated)),"r"),e.set("timer",t.dateCreated),e.set("time",utils.formatAMPM(new Date(t.dateCreated)),"r"),e.set("appId",t.appId),e.set("tempId",t.tempId),t.landingPage?e.set("landingPage",t.landingPage.replace("%3A",":")):e.set("landingPage",""),e},setContent:function(e){e=e.replaceAll("\n\n+","\n\n"),e=e.replaceAll("<","&lt;"),e=e.replaceAll(">","&gt;");try{e=decodeURI(e)}catch(t){}return e=e.replace("#@$","%"),e=e.replaceAll("\n","<br/>"),e=utils.handleURL(e),e=utils.safeContent(e),e},setPost:function(e,t,n){e.set("id",t.id),e.set("postID",t.id);var r=t.content;if(t.type=="E"||t.type=="S"||t.type=="P")t.visitor=1;r=r.replaceAll("<","&lt;"),r=r.replaceAll(">","&gt;"),r=r.replaceAll("\n\n+","\n\n"),r=r.replaceAll("<script","&lt;script"),r=r.replaceAll("<div","&lt;div"),r=r.replaceAll("></div>","&gt;&lt;/div&gt;"),r=r.replaceAll("<iframe>","&lt;iframe&gt;"),r=r.replaceAll("<style>","&lt;style&gt;"),r=r.replaceAll("<frame>","&lt;frame&gt;"),r=r.replaceAll("</style>","&lt;/style&gt;"),r=r.replaceAll("</script>","&lt;/script&gt;"),r=r.replaceAll("</iframe>","&lt;/iframe&gt;"),r=r.replaceAll("</frame>","&lt;/frame&gt;"),r=r.replaceAll("&#x2F;","/"),r=r.replace("%","#@$"),r=r.replaceAll("\n","<br/>"),r=r.replaceAll("&lt;%","<%").replaceAll("%&gt;","%>"),r=utils.safeContent(r);try{r=decodeURI(r)}catch(i){}r=r.replace("#@$","%"),r=emjos.shortnameToImage(r),e.set("assignees",t.assignees),e.set("status",t.status),e.set("read",t.read),e.set("tilelink",""),e.set("tilelinktype",""),e.set("count",t.count),e.set("attachments",t.attachments);var s=[];return r=r.replaceAll("&lt;%","<%").replaceAll("%&gt;","%>"),t.attachments&&$.each(t.attachments,function(t,i){if(i.type=="post")e.set("tilelink",i.targetId),e.set("tilelinktype","post"),e.set("tilepattern",i.pattern),r=r.replaceAll(i.pattern.replace("|","\\|"),i.fallback);else if(i.type=="account"){var o=i.html;n&&$.each(n.models,function(e,t){if(t.get("id")==i.targetId)return o=t.get("alias"),!0}),r=r.replace(i.pattern,'<a class="bot-post-user" data="'+i.targetId+'">@'+o+"</a>")}else{i.type=="faq"&&(r=r.replace(i.pattern,'<span class="pubble-mod-faqid"><span class="pubble-mod-faqid-mark-id">'+i.fallback+"</span></span>"));var u=new matt;u=converter.setAtt(u,i);var a=[],f=i.attachments;f&&$.each(f,function(e,t){var n=new matt;n=converter.setAtt(n,t),a.push(n)}),u.set("attachments",a),s.push(u)}}),e.set("atts",s),n&&$.each(n.models,function(n,r){if(r.get("id")==t.author.id)return t.author.alias=r.get("alias"),t.author.avatar=r.get("avatar"),e.set("user",r),!0}),e.set("content",utils.handleURL(r)),e.set("conversationId",t.conversationId),e.set("dateCreated",t.dateCreated),e.set("lastUpdated",t.lastUpdated),e.set("timediff",utils.timediff(t.lastUpdated)),e.set("type",t.type),e.set("voted",t.voted),e.set("votes",t.votes),e.set("author",t.author),e.set("lastPostFromModerator",t.lastPostFromModerator),e.set("lastPostFromVisitor",t.lastPostFromVisitor),e.set("subscriber",t.subscriber),e.set("avatar",utils.handleImg(t.author.avatar,t.author.alias,"48")),t.visitor?(e.set("alias","You"),e.set("visitor",!0)):t.moderator?(appConfig.config.parameters.postAsCommunity?e.set("alias",appConfig.config.communityName):e.set("alias",t.author.alias),e.set("visitor",t.visitor)):(e.set("alias",t.author.alias),e.set("visitor",t.visitor)),t.visitor||e.get("type")!="Q"&&appConfig.config.parameters.postAsCommunity&&(e.get("author").alias=appConfig.config.communityName,e.set("alias",appConfig.config.communityName),e.set("isAppModerator",1),e.set("avatar",utils.handleCommunityAvtar(appConfig.config.parameters.community))),t.content=="//contact"&&!e.get("visitor")&&(e.set("type","K"),e.set("content"," requested contact details")),e.set("anonymous",t.anonymous),e.set("timer",t.dateCreated),e.set("time",utils.formatAMPM(new Date(t.dateCreated))),e.set("appId",t.appId),e.set("tempId",t.tempId),e.set("shortUrl",t.shortUrl),e}},emjos=new Object;emjos.put=function(e,t){emjos[e]=t},emjos.get=function(e){return emjos[e]},emjos.list="smile,tongue-out,big-smile,joy,sleeping,confused,smiling-imp,innocent,zipper-mouth,frowning,hushed,wink,relaxed,yum,rolling-eyes,heart-eyes,sunglasses,money-face,scream,worried,sob,angry-imp,weary,sweat,thinking,grimacing,sick,star,running,beer,lunch,pistol,bomb,see-no-evil,hear-no-evil,speak-no-evil,thumbsup,thumbsdown,ok-hand,the-horns,raised-hands,clap,wave,pray,secret,coffee,lucky,calendar,idea,celebrating,flower,broken-heart,heart,sun";var ll=emjos.list.split(",");for(var i=0;i<ll.length;i++)emjos.put(":"+ll[i]+":",ll[i]);return emjos.getEmoji=function(e){return emjos[e]},emjos.shortnameToImage=function(e){var t,n,r,i=":([-+\\w]+):";return i=":([a-zA-Z-]+):",e=e.replace(new RegExp("("+i+")","gi"),function(e){return typeof e=="undefined"||e===""||emjos.getEmoji(e)==undefined?(t='<span class="pubble-emoji-ico-text pubble-emoji-smile"></span>',t):(n=emjos.getEmoji(e),t='<span class="pubble-emoji-ico-text pubble-emoji-'+n+'"></span>',t)}),e},converter.emjos=emjos,converter}),pubblebot.define("text!templates/attachment.tpl",[],function(){return'<%if(attType =="faq"){%><div class="pubble-cw-dialog-item-att-faq"><div class="pubble-cw-dialog-item-att-ico"></div><div class="pubble-cw-dialog-item-att-q"><%=question%></div><div class="pubble-cw-dialog-item-att-details pubble-off"><div class="pubble-cw-dialog-item-att-a" id="pb-faq-<%=targetId%>"><%=answer%></div>\n<div class="pubble-att-container">\n    \n</div>\n<div class="pubble-cw-dialog-item-att-like pubble-cw-btn-main">Answers my question!</div><div class="pubble-cw-dialog-item-att-collapse">Collapse</div>\n</div></div><%}%><%if(attType =="link"){%><div class="pubble-cw-dialog-item-att-info"><div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div></div><div class="pubble-cw-dialog-item-att-content"><div class="pubble-cw-dialog-item-att-link-name"><%=src%></div><div class="pubble-cw-dialog-item-att-link-title"><%=title%></div><div class="pubble-cw-dialog-item-att-link-description"><%=desc%></div>\n</div><%}%>\n    <%if(attType =="file"){%><div class="pubble-cw-dialog-item-att-info"><div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div><div class="pubble-cw-dialog-item-att-file-ico"><%=ext%></div><div class="pubble-cw-dialog-item-att-file-name"><%=title%></div></div><div class="pubble-cw-dialog-item-att-content"><div class="pubble-cw-dialog-item-att-file-description"></div></div><%}%><%if(attType =="video"){%><div class="pubble-cw-dialog-item-att-info"><div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div><div class="pubble-cw-dialog-item-att-video-name"><%=title%></div></div><div class="pubble-cw-dialog-item-att-content"><div class="pubble-cw-dialog-item-att-video-canvas"><img src="<%=thumbnail%>"></div></div><%}%><%if(attType =="photo"){%><div class="pubble-cw-dialog-item-att-info"><div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div><div class="pubble-cw-dialog-item-att-image-name"><%if(title){%><%=title%><%}%></div></div><div class="pubble-cw-dialog-item-att-content"><div class="pubble-cw-dialog-item-att-image-canvas"<%if(customStyle!=\'\'){%>style=\'<%=customStyle%>\'<%}%>><img src="<%=thumbnail%>"></div></div><%}%><%if(attType =="post"){%><div class="pubble-cw-dialog-item-att-info"><div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div><div class="pubble-cw-dialog-item-att-question-name"><div class="pubble-cw-dialog-item-att-question-ico"></div>Qid34243</div></div><div class="pubble-cw-dialog-item-att-content"><div class="pubble-cw-dialog-item-att-question-text">How are u today? All ok?</div></div><%}%> '}),pubblebot.define("views/attachment",["backbone","underscore","utils/utils","text!templates/attachment.tpl"],function(e,t,n,r){var i=window.jQueryPBm,s=window.$pubbBackbone.noConflict(),o=s.View.extend({template:$UScore.template(r),className:"pubble-cw-att",attributes:function(){return{id:"att"+this.model.get("id")}},initialize:function(e){var t=this;$UScore.bindAll(this,"render"),this._id=e.model.get("id"),this.model=e.model},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.model.get("attType")=="link"?this.$el.addClass("pubble-cw-att-islink"):this.model.get("attType")=="file"?this.$el.addClass("pubble-cw-att-isfile"):this.model.get("attType")=="video"?this.$el.addClass("pubble-cw-att-isvideo"):this.model.get("attType")=="photo"?this.$el.addClass("pubble-cw-att-isimage"):this.model.get("attType")=="question"&&this.$el.addClass("pubble-cw-att-isquestion"),this.model.get("attType")=="faq"?(this.$el.find(".pubble-cw-dialog-item-att-a").find("img").on("click",function(e){e.stopPropagation();var t=i(".pubble-cw-modal");t.removeClass("pubble-hide"),n.addClass(t,"pubble-show"),t.find(".pubble-cw-modal-img").html("<image class='' src='"+i(e.target).attr("src")+"'/>"),n.addClass(t.find(".pubble-cw-modal-video-container"),"pubble-off"),t.find(".pubble-cw-modal-img-container").removeClass("pubble-off")}),this.$el.find(".pubble-cw-dialog-item-att-q").on("click",function(){var t=i(".pubble-cw-dialog-item-att-details");if(!e.model.get("clicked")){var r=pubblebot.require("app");r.faqExpand(e.model),e.model.set("clicked","true")}i.each(t,function(t,r){(!window.faqclicked||window.faqclicked!==e.model.get("targetId"))&&n.addClass(i(r),"pubble-off")}),i.each(i(".pubble-cw-isexpanded"),function(t,n){(!window.faqclicked||window.faqclicked!==e.model.get("targetId"))&&i(n).removeClass("pubble-cw-isexpanded")});var s=e.$el.find(".pubble-cw-dialog-item-att-details");e.$el.hasClass("pubble-cw-isexpanded")?(n.addClass(s,"pubble-off"),e.$el.removeClass("pubble-cw-isexpanded")):(s.removeClass("pubble-off"),n.addClass(e.$el,"pubble-cw-isexpanded")),window.faqclicked=e.model.get("targetId")}),this.$el.find(".pubble-cw-dialog-item-att-like").on("click",function(t){var n=pubblebot.require("app");e.$el.find(".pubble-cw-dialog-item-att-like").slideUp(),n.resolveQuestion(e.model.get("targetId"))})):this.$el.on("click",function(){if(e.model.get("attType")=="video"){var t=i(".pubble-cw-modal");t.removeClass("pubble-hide"),n.addClass(t,"pubble-show"),t.find(".pubble-cw-modal-video").html(e.model.get("html")),t.find(".pubble-mod-att-isvideo").find(".embedly-embed").attr("height","auto").attr("width","100%"),n.addClass(t.find(".pubble-cw-modal-img-container"),"pubble-off"),t.find(".pubble-cw-modal-video-container").removeClass("pubble-off")}else{if(e.model.get("attType")!="photo")return window.open(e.model.get("src")),!1;var t=i(".pubble-cw-modal");t.removeClass("pubble-hide"),n.addClass(t,"pubble-show"),t.find(".pubble-cw-modal-img").html("<image class='' src='"+e.model.get("thumbnail2")+"'/>"),n.addClass(t.find(".pubble-cw-modal-video-container"),"pubble-off"),t.find(".pubble-cw-modal-img-container").removeClass("pubble-off")}}),e}});return o}),pubblebot.define("utils/tel",["jQueryPB"],function(){function f(t,n){this.element=t,this.options=e.extend({},o,n),this._defaults=o,this.ns="."+i+s++,this.isGoodBrowser=Boolean(t.setSelectionRange),this.hadInitialPlaceholder=Boolean(e(t).attr("placeholder")),this._name=i}var e=window.jQueryPBm,t=[["Afghanistan (‫افغانستان‬‎)","af","93"],["Albania (Shqipëri)","al","355"],["Algeria (‫الجزائر‬‎)","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia (Հայաստան)","am","374"],["Aruba","aw","297"],["Australia","au","61"],["Austria (Österreich)","at","43"],["Azerbaijan (Azərbaycan)","az","994"],["Bahamas","bs","1242"],["Bahrain (‫البحرين‬‎)","bh","973"],["Bangladesh (বাংলাদেশ)","bd","880"],["Barbados","bb","1246"],["Belarus (Беларусь)","by","375"],["Belgium (België)","be","32"],["Belize","bz","501"],["Benin (Bénin)","bj","229"],["Bermuda","bm","1441"],["Bhutan (འབྲུག)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (Босна и Херцеговина)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria (България)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (កម្ពុជា)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1],["Cayman Islands","ky","1345"],["Central African Republic (République centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (中国)","cn","86"],["Colombia","co","57"],["Comoros (‫جزر القمر‬‎)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Côte d’Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599",0],["Cyprus (Κύπρος)","cy","357"],["Czech Republic (Česká republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic (República Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (‫مصر‬‎)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Føroyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358"],["France","fr","33"],["French Guiana (Guyane française)","gf","594"],["French Polynesia (Polynésie française)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (საქართველო)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (Ελλάδα)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590",0],["Guam","gu","1671"],["Guatemala","gt","502"],["Guinea (Guinée)","gn","224"],["Guinea-Bissau (Guiné Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (香港)","hk","852"],["Hungary (Magyarország)","hu","36"],["Iceland (Ísland)","is","354"],["India (भारत)","in","91"],["Indonesia","id","62"],["Iran (‫ایران‬‎)","ir","98"],["Iraq (‫العراق‬‎)","iq","964"],["Ireland","ie","353"],["Israel (‫ישראל‬‎)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1876"],["Japan (日本)","jp","81"],["Jordan (‫الأردن‬‎)","jo","962"],["Kazakhstan (Казахстан)","kz","7",1],["Kenya","ke","254"],["Kiribati","ki","686"],["Kuwait (‫الكويت‬‎)","kw","965"],["Kyrgyzstan (Кыргызстан)","kg","996"],["Laos (ລາວ)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (‫لبنان‬‎)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (‫ليبيا‬‎)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (澳門)","mo","853"],["Macedonia (FYROM) (Македонија)","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (‫موريتانيا‬‎)","mr","222"],["Mauritius (Moris)","mu","230"],["Mexico (México)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (Монгол)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1664"],["Morocco (‫المغرب‬‎)","ma","212"],["Mozambique (Moçambique)","mz","258"],["Myanmar (Burma) (မြန်မာ)","mm","95"],["Namibia (Namibië)","na","264"],["Nauru","nr","674"],["Nepal (नेपाल)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Calédonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (조선 민주주의 인민 공화국)","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway (Norge)","no","47"],["Oman (‫عُمان‬‎)","om","968"],["Pakistan (‫پاکستان‬‎)","pk","92"],["Palau","pw","680"],["Palestine (‫فلسطين‬‎)","ps","970"],["Panama (Panamá)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Perú)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (‫قطر‬‎)","qa","974"],["Réunion (La Réunion)","re","262"],["Romania (România)","ro","40"],["Russia (Россия)","ru","7",0],["Rwanda","rw","250"],["Saint Barthélemy (Saint-Barthélemy)","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin (Saint-Martin (partie française))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe (São Tomé e Príncipe)","st","239"],["Saudi Arabia (‫المملكة العربية السعودية‬‎)","sa","966"],["Senegal (Sénégal)","sn","221"],["Serbia (Србија)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1721"],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (대한민국)","kr","82"],["South Sudan (‫جنوب السودان‬‎)","ss","211"],["Spain (España)","es","34"],["Sri Lanka (ශ්‍රී ලංකාව)","lk","94"],["Sudan (‫السودان‬‎)","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (‫سوريا‬‎)","sy","963"],["Taiwan (台灣)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (ไทย)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia (‫تونس‬‎)","tn","216"],["Turkey (Türkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine (Україна)","ua","380"],["United Arab Emirates (‫الإمارات العربية المتحدة‬‎)","ae","971"],["United Kingdom","gb","44"],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Oʻzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Città del Vaticano)","va","39",1],["Venezuela","ve","58"],["Vietnam (Việt Nam)","vn","84"],["Wallis and Futuna","wf","681"],["Yemen (‫اليمن‬‎)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]];for(var n=0;n<t.length;n++){var r=t[n];t[n]={name:r[0],iso2:r[1],dialCode:r[2],priority:r[3]||0,areaCodes:r[4]||null}}var i="intlTelInput",s=1,o={allowExtensions:!1,autoFormat:!0,autoHideDialCode:!0,autoPlaceholder:!0,defaultCountry:"",geoIpLookup:null,nationalMode:!0,numberType:"MOBILE",onlyCountries:[],preferredCountries:["us","gb"],utilsScript:""},u={UP:38,DOWN:40,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,ZERO:48,NINE:57,SPACE:32,BSPACE:8,TAB:9,DEL:46,CTRL:17,CMD1:91,CMD2:224},a=!1;e(window).load(function(){a=!0}),f.prototype={_init:function(){return this.options.nationalMode&&(this.options.autoHideDialCode=!1),navigator.userAgent.match(/IEMobile/i)&&(this.options.autoFormat=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.autoCountryDeferred=new e.Deferred,this.utilsScriptDeferred=new e.Deferred,this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests(),[this.autoCountryDeferred,this.utilsScriptDeferred]},_processCountryData:function(){this._setInstanceCountryData(),this._setPreferredCountries()},_addCountryCode:function(e,t,n){t in this.countryCodes||(this.countryCodes[t]=[]);var r=n||0;this.countryCodes[t][r]=e},_setInstanceCountryData:function(){var n;if(this.options.onlyCountries.length){for(n=0;n<this.options.onlyCountries.length;n++)this.options.onlyCountries[n]=this.options.onlyCountries[n].toLowerCase();this.countries=[];for(n=0;n<t.length;n++)e.inArray(t[n].iso2,this.options.onlyCountries)!=-1&&this.countries.push(t[n])}else this.countries=t;this.countryCodes={};for(n=0;n<this.countries.length;n++){var r=this.countries[n];this._addCountryCode(r.iso2,r.dialCode,r.priority);if(r.areaCodes)for(var i=0;i<r.areaCodes.length;i++)this._addCountryCode(r.iso2,r.dialCode+r.areaCodes[i])}},_setPreferredCountries:function(){this.preferredCountries=[];for(var e=0;e<this.options.preferredCountries.length;e++){var t=this.options.preferredCountries[e].toLowerCase(),n=this._getCountryData(t,!1,!0);n&&this.preferredCountries.push(n)}},_generateMarkup:function(){this.telInput=e(this.element),this.telInput.attr("autocomplete","off"),this.telInput.wrap(e("<div>",{"class":"intl-tel-input"})),this.flagsContainer=e("<div>",{"class":"flag-dropdown"}).insertBefore(this.telInput);var t=e("<div>",{tabindex:"0","class":"selected-flag"}).appendTo(this.flagsContainer);this.selectedFlagInner=e("<div>",{"class":"iti-flag"}).appendTo(t),e("<div>",{"class":"arrow"}).appendTo(t),this.isMobile?this.countryList=e("<select>",{"class":"iti-mobile-select"}).appendTo(this.flagsContainer):(this.countryList=e("<ul>",{"class":"country-list v-hide"}).appendTo(this.flagsContainer),this.preferredCountries.length&&!this.isMobile&&(this._appendListItems(this.preferredCountries,"preferred"),e("<li>",{"class":"divider"}).appendTo(this.countryList))),this._appendListItems(this.countries,""),this.isMobile||(this.dropdownHeight=this.countryList.outerHeight(),this.countryList.removeClass("v-hide").addClass("hide"),this.countryListItems=this.countryList.children(".country"))},_appendListItems:function(e,t){var n="";for(var r=0;r<e.length;r++){var i=e[r];this.isMobile?(n+="<option data-dial-code='"+i.dialCode+"' value='"+i.iso2+"'>",n+=i.name+" +"+i.dialCode,n+="</option>"):(n+="<li class='country "+t+"' data-dial-code='"+i.dialCode+"' data-country-code='"+i.iso2+"'>",n+="<div class='flag'><div class='iti-flag "+i.iso2+"'>+"+i.dialCode+"</div></div>",n+="<span class='country-name'>"+i.name+"</span>",n+="<span class='dial-code'>+"+i.dialCode+"</span>",n+="</li>")}this.countryList.append(n)},_setInitialState:function(){var e=this.telInput.val();this._getDialCode(e)?this._updateFlagFromNumber(e,!0):this.options.defaultCountry!="auto"&&(this.options.defaultCountry?this.options.defaultCountry=this._getCountryData(this.options.defaultCountry.toLowerCase(),!1,!1):this.options.defaultCountry=this.preferredCountries.length?this.preferredCountries[0]:this.countries[0],this._selectFlag(this.options.defaultCountry.iso2),e||this._updateDialCode(this.options.defaultCountry.dialCode,!1)),e&&this._updateVal(e)},_initListeners:function(){var t=this;this._initKeyListeners(),(this.options.autoHideDialCode||this.options.autoFormat)&&this._initFocusListeners();if(this.isMobile)this.countryList.on("change"+this.ns,function(n){t._selectListItem(e(this).find("option:selected"))});else{var n=this.telInput.closest("label");n.length&&n.on("click"+this.ns,function(e){t.countryList.hasClass("hide")?t.telInput.focus():e.preventDefault()});var r=this.selectedFlagInner.parent();r.on("click"+this.ns,function(e){t.countryList.hasClass("hide")&&!t.telInput.prop("disabled")&&!t.telInput.prop("readonly")&&t._showDropdown()})}this.flagsContainer.on("keydown"+t.ns,function(e){var n=t.countryList.hasClass("hide");n&&(e.which==u.UP||e.which==u.DOWN||e.which==u.SPACE||e.which==u.ENTER)&&(e.preventDefault(),e.stopPropagation(),t._showDropdown()),e.which==u.TAB&&t._closeDropdown()})},_initRequests:function(){var t=this;this.options.utilsScript?a?this.loadUtils():e(window).load(function(){t.loadUtils()}):this.utilsScriptDeferred.resolve(),this.options.defaultCountry=="auto"?this._loadAutoCountry():this.autoCountryDeferred.resolve()},_loadAutoCountry:function(){var t=this,n=e.cookie?e.cookie("itiAutoCountry"):"";n&&(e.fn[i].autoCountry=n),e.fn[i].autoCountry?this.autoCountryLoaded():e.fn[i].startedLoadingAutoCountry||(e.fn[i].startedLoadingAutoCountry=!0,typeof this.options.geoIpLookup=="function"&&this.options.geoIpLookup(function(t){e.fn[i].autoCountry=t.toLowerCase(),e.cookie&&e.cookie("itiAutoCountry",e.fn[i].autoCountry,{path:"/"}),setTimeout(function(){e(".intl-tel-input input").intlTelInput("autoCountryLoaded")})}))},_initKeyListeners:function(){var e=this;this.options.autoFormat&&this.telInput.on("keypress"+this.ns,function(t){if(t.which>=u.SPACE&&!t.ctrlKey&&!t.metaKey&&window.intlTelInputUtils&&!e.telInput.prop("readonly")){t.preventDefault();var n=t.which>=u.ZERO&&t.which<=u.NINE||t.which==u.PLUS,r=e.telInput[0],i=e.isGoodBrowser&&r.selectionStart==r.selectionEnd,s=e.telInput.attr("maxlength"),o=e.telInput.val(),a=s?o.length<s:!0;if(a&&(n||i)){var f=n?String.fromCharCode(t.which):null;e._handleInputKey(f,!0,n),o!=e.telInput.val()&&e.telInput.trigger("input")}n||e._handleInvalidKey()}}),this.telInput.on("cut"+this.ns+" paste"+this.ns,function(){setTimeout(function(){if(e.options.autoFormat&&window.intlTelInputUtils){var t=e.isGoodBrowser&&e.telInput[0].selectionStart==e.telInput.val().length;e._handleInputKey(null,t),e._ensurePlus()}else e._updateFlagFromNumber(e.telInput.val())})}),this.telInput.on("keyup"+this.ns,function(t){if(t.which!=u.ENTER&&!e.telInput.prop("readonly"))if(e.options.autoFormat&&window.intlTelInputUtils){var n=e.isGoodBrowser&&e.telInput[0].selectionStart==e.telInput.val().length;e.telInput.val()?(t.which==u.DEL&&!n||t.which==u.BSPACE)&&e._handleInputKey():e._updateFlagFromNumber("",!1),e._ensurePlus()}else e._updateFlagFromNumber(e.telInput.val(),!1)})},_ensurePlus:function(){if(!this.options.nationalMode){var e=this.telInput.val(),t=this.telInput[0];if(e.charAt(0)!="+"){var n=this.isGoodBrowser?t.selectionStart+1:0;this.telInput.val("+"+e),this.isGoodBrowser&&t.setSelectionRange(n,n)}}},_handleInvalidKey:function(){var e=this;this.telInput.trigger("invalidkey").addClass("iti-invalid-key"),setTimeout(function(){e.telInput.removeClass("iti-invalid-key")},100)},_handleInputKey:function(e,t,n){var r=this.telInput.val(),i=this._getClean(r),s,o=this.telInput[0],u=0;this.isGoodBrowser?(u=this._getDigitsOnRight(r,o.selectionEnd),e?r=r.substr(0,o.selectionStart)+e+r.substring(o.selectionEnd,r.length):s=r.substr(o.selectionStart-2,2)):e&&(r+=e),this.setNumber(r,null,t,!0,n);if(this.isGoodBrowser){var a;r=this.telInput.val(),u?(a=this._getCursorFromDigitsOnRight(r,u),e||(a=this._getCursorFromLeftChar(r,a,s))):a=r.length,o.setSelectionRange(a,a)}},_getCursorFromLeftChar:function(t,n,r){for(var i=n;i>0;i--){var s=t.charAt(i-1);if(e.isNumeric(s)||t.substr(i-2,2)==r)return i}return 0},_getCursorFromDigitsOnRight:function(t,n){for(var r=t.length-1;r>=0;r--)if(e.isNumeric(t.charAt(r))&&--n===0)return r;return 0},_getDigitsOnRight:function(t,n){var r=0;for(var i=n;i<t.length;i++)e.isNumeric(t.charAt(i))&&r++;return r},_initFocusListeners:function(){var e=this;this.options.autoHideDialCode&&this.telInput.on("mousedown"+this.ns,function(t){!e.telInput.is(":focus")&&!e.telInput.val()&&(t.preventDefault(),e.telInput.focus())}),this.telInput.on("focus"+this.ns,function(t){var n=e.telInput.val();e.telInput.data("focusVal",n),e.options.autoHideDialCode&&!n&&!e.telInput.prop("readonly")&&e.selectedCountryData.dialCode&&(e._updateVal("+"+e.selectedCountryData.dialCode,null,!0),e.telInput.one("keypress.plus"+e.ns,function(t){if(t.which==u.PLUS){var n=e.options.autoFormat&&window.intlTelInputUtils?"+":"";e.telInput.val(n)}}),setTimeout(function(){var t=e.telInput[0];if(e.isGoodBrowser){var n=e.telInput.val().length;t.setSelectionRange(n,n)}}))}),this.telInput.on("blur"+this.ns,function(){if(e.options.autoHideDialCode){var t=e.telInput.val(),n=t.charAt(0)=="+";if(n){var r=e._getNumeric(t);(!r||e.selectedCountryData.dialCode==r)&&e.telInput.val("")}e.telInput.off("keypress.plus"+e.ns)}e.options.autoFormat&&window.intlTelInputUtils&&e.telInput.val()!=e.telInput.data("focusVal")&&e.telInput.trigger("change")})},_getNumeric:function(e){return e.replace(/\D/g,"")},_getClean:function(e){var t=e.charAt(0)=="+"?"+":"";return t+this._getNumeric(e)},_showDropdown:function(){this._setDropdownPosition();var e=this.countryList.children(".active");e.length&&this._highlightListItem(e),this.countryList.removeClass("hide"),e.length&&this._scrollTo(e),this._bindDropdownListeners(),this.selectedFlagInner.children(".arrow").addClass("up")},_setDropdownPosition:function(){var t=this.telInput.offset().top,n=e(window).scrollTop(),r=t+this.telInput.outerHeight()+this.dropdownHeight<n+e(window).height(),i=t-this.dropdownHeight>n,s=!r&&i?"-"+(this.dropdownHeight-1)+"px":"";this.countryList.css("top",s)},_bindDropdownListeners:function(){var t=this;this.countryList.on("mouseover"+this.ns,".country",function(n){t._highlightListItem(e(this))}),this.countryList.on("click"+this.ns,".country",function(n){t._selectListItem(e(this))});var n=!0;e("html").on("click"+this.ns,function(e){n||t._closeDropdown(),n=!1});var r="",i=null;e(document).on("keydown"+this.ns,function(e){e.preventDefault();if(e.which==u.UP||e.which==u.DOWN)t._handleUpDownKey(e.which);else if(e.which==u.ENTER)t._handleEnterKey();else if(e.which==u.ESC)t._closeDropdown();else if(e.which>=u.A&&e.which<=u.Z||e.which==u.SPACE)i&&clearTimeout(i),r+=String.fromCharCode(e.which),t._searchForCountry(r),i=setTimeout(function(){r=""},1e3)})},_handleUpDownKey:function(e){var t=this.countryList.children(".highlight").first(),n=e==u.UP?t.prev():t.next();n.length&&(n.hasClass("divider")&&(n=e==u.UP?n.prev():n.next()),this._highlightListItem(n),this._scrollTo(n))},_handleEnterKey:function(){var e=this.countryList.children(".highlight").first();e.length&&this._selectListItem(e)},_searchForCountry:function(e){for(var t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,e)){var n=this.countryList.children("[data-country-code="+this.countries[t].iso2+"]").not(".preferred");this._highlightListItem(n),this._scrollTo(n,!0);break}},_startsWith:function(e,t){return e.substr(0,t.length).toUpperCase()==t},_updateVal:function(e,t,n,r,i){var s;if(this.options.autoFormat&&window.intlTelInputUtils&&this.selectedCountryData){typeof t=="number"&&intlTelInputUtils.isValidNumber(e,this.selectedCountryData.iso2)?s=intlTelInputUtils.formatNumberByType(e,this.selectedCountryData.iso2,t):!r&&this.options.nationalMode&&e.charAt(0)=="+"&&intlTelInputUtils.isValidNumber(e,this.selectedCountryData.iso2)?s=intlTelInputUtils.formatNumberByType(e,this.selectedCountryData.iso2,intlTelInputUtils.numberFormat.NATIONAL):s=intlTelInputUtils.formatNumber(e,this.selectedCountryData.iso2,n,this.options.allowExtensions,i);var o=this.telInput.attr("maxlength");o&&s.length>o&&(s=s.substr(0,o))}else s=e;this.telInput.val(s)},_updateFlagFromNumber:function(t,n){t&&this.options.nationalMode&&this.selectedCountryData&&this.selectedCountryData.dialCode=="1"&&t.charAt(0)!="+"&&(t.charAt(0)!="1"&&(t="1"+t),t="+"+t);var r=this._getDialCode(t),i=null;if(r){var s=this.countryCodes[this._getNumeric(r)],o=this.selectedCountryData&&e.inArray(this.selectedCountryData.iso2,s)!=-1;if(!o||this._isUnknownNanp(t,r))for(var u=0;u<s.length;u++)if(s[u]){i=s[u];break}}else t.charAt(0)=="+"&&this._getNumeric(t).length?i="":!t||t=="+";i!==null&&this._selectFlag(i,n)},_isUnknownNanp:function(e,t){return t=="+1"&&this._getNumeric(e).length>=4},_highlightListItem:function(e){this.countryListItems.removeClass("highlight"),e.addClass("highlight")},_getCountryData:function(e,n,r){var i=n?t:this.countries;for(var s=0;s<i.length;s++)if(i[s].iso2==e)return i[s];if(r)return null;throw new Error("No country data for '"+e+"'")},_selectFlag:function(t,n){this.selectedCountryData=t?this._getCountryData(t,!1,!1):{},n&&this.selectedCountryData.iso2&&(this.options.defaultCountry={iso2:this.selectedCountryData.iso2}),this.selectedFlagInner.attr("class","iti-flag "+t),t&&this.selectedFlagInner.html(""),this.selectedFlagInner.parent().find(".iti-flag-pubble-nr").remove(),e("<div class='iti-flag-pubble-nr'>+"+this.selectedCountryData.dialCode+"</div>").insertAfter(this.selectedFlagInner);var r=t?this.selectedCountryData.name+": +"+this.selectedCountryData.dialCode:"Unknown";this.selectedFlagInner.parent().attr("title",r),this._updatePlaceholder(),this.isMobile?this.countryList.val(t):(this.countryListItems.removeClass("active"),t&&this.countryListItems.find(".iti-flag."+t).first().closest(".country").addClass("active"))},_updatePlaceholder:function(){if(window.intlTelInputUtils&&!this.hadInitialPlaceholder&&this.options.autoPlaceholder&&this.selectedCountryData){var e=this.selectedCountryData.iso2,t=intlTelInputUtils.numberType[this.options.numberType||"FIXED_LINE"],n=e?intlTelInputUtils.getExampleNumber(e,this.options.nationalMode,t):"";typeof this.options.customPlaceholder=="function"&&(n=this.options.customPlaceholder(n,this.selectedCountryData)),this.telInput.attr("placeholder",n)}},_selectListItem:function(e){var t=this.isMobile?"value":"data-country-code";this._selectFlag(e.attr(t),!0),this.isMobile||this._closeDropdown(),this._updateDialCode(e.attr("data-dial-code"),!0),this.telInput.trigger("change"),this.telInput.focus();if(this.isGoodBrowser){var n=this.telInput.val().length;this.telInput[0].setSelectionRange(n,n)}},_closeDropdown:function(){this.countryList.addClass("hide"),this.selectedFlagInner.children(".arrow").removeClass("up"),e(document).off(this.ns),e("html").off(this.ns),this.countryList.off(this.ns)},_scrollTo:function(e,t){var n=this.countryList,r=n.height(),i=n.offset().top,s=i+r,o=e.outerHeight(),u=e.offset().top,a=u+o,f=u-i+n.scrollTop(),l=r/2-o/2;if(u<i)t&&(f-=l),n.scrollTop(f);else if(a>s){t&&(f+=l);var c=r-o;n.scrollTop(f-c)}},_updateDialCode:function(t,n){var r=this.telInput.val(),i;t="+"+t;if(this.options.nationalMode&&r.charAt(0)!="+")i=r;else if(r){var s=this._getDialCode(r);if(s.length>1)i=r.replace(s,t);else{var o=r.charAt(0)!="+"?e.trim(r):"";i=t+o}}else i=!this.options.autoHideDialCode||n?t:"";this._updateVal(i,null,n)},_getDialCode:function(t){var n="";if(t.charAt(0)=="+"){var r="";for(var i=0;i<t.length;i++){var s=t.charAt(i);if(e.isNumeric(s)){r+=s,this.countryCodes[r]&&(n=t.substr(0,i+1));if(r.length==4)break}}}return n},autoCountryLoaded:function(){this.options.defaultCountry=="auto"&&(this.options.defaultCountry=e.fn[i].autoCountry,this._setInitialState(),this.autoCountryDeferred.resolve())},destroy:function(){this.isMobile||this._closeDropdown(),this.telInput.off(this.ns),this.isMobile?this.countryList.off(this.ns):(this.selectedFlagInner.parent().off(this.ns),this.telInput.closest("label").off(this.ns));var e=this.telInput.parent();e.before(this.telInput).remove()},getExtension:function(){return this.telInput.val().split(" ext. ")[1]||""},getNumber:function(e){return window.intlTelInputUtils?intlTelInputUtils.formatNumberByType(this.telInput.val(),this.selectedCountryData.iso2,e):""},getNumberType:function(){return window.intlTelInputUtils?intlTelInputUtils.getNumberType(this.telInput.val(),this.selectedCountryData.iso2):-99},getSelectedCountryData:function(){return this.selectedCountryData||{}},getValidationError:function(){return window.intlTelInputUtils?intlTelInputUtils.getValidationError(this.telInput.val(),this.selectedCountryData.iso2):-99},isValidNumber:function(){var t=e.trim(this.telInput.val()),n=this.options.nationalMode?this.selectedCountryData.iso2:"";return window.intlTelInputUtils?intlTelInputUtils.isValidNumber(t,n):!1},loadUtils:function(t){var n=this,r=t||this.options.utilsScript;!e.fn[i].loadedUtilsScript&&r?(e.fn[i].loadedUtilsScript=!0,e.ajax({url:r,success:function(){e(".intl-tel-input input").intlTelInput("utilsLoaded")},complete:function(){n.utilsScriptDeferred.resolve()},dataType:"script",cache:!0})):this.utilsScriptDeferred.resolve()},selectCountry:function(e){e=e.toLowerCase(),this.selectedFlagInner.hasClass(e)||(this._selectFlag(e,!0),this._updateDialCode(this.selectedCountryData.dialCode,!1))},setNumber:function(e,t,n,r,i){!this.options.nationalMode&&e.charAt(0)!="+"&&(e="+"+e),this._updateFlagFromNumber(e),this._updateVal(e,t,n,r,i)},utilsLoaded:function(){this.options.autoFormat&&this.telInput.val()&&this._updateVal(this.telInput.val()),this._updatePlaceholder()}},e.fn[i]=function(t){var n=arguments;if(t===undefined||typeof t=="object"){var r=[];return this.each(function(){if(!e.data(this,"plugin_"+i)){var n=new f(this,t),s=n._init();r.push(s[0]),r.push(s[1]),e.data(this,"plugin_"+i,n)}}),e.when.apply(null,r)}if(typeof t=="string"&&t[0]!=="_"){var s;return this.each(function(){var r=e.data(this,"plugin_"+i);r instanceof f&&typeof r[t]=="function"&&(s=r[t].apply(r,Array.prototype.slice.call(n,1))),t==="destroy"&&e.data(this,"plugin_"+i,null)}),s!==undefined?s:this}},e.fn[i].getCountryData=function(){return t},e.fn[i].version="<%= version %>"}),pubblebot.define("utils/uploader",["utils/utils"],function(e){var t=window.jQueryPBm;(function(t){if(t.fn.ajaxForm==undefined){var n={};n.fileapi=t("<input type='file'/>").get(0).files!==undefined,n.formdata=window.FormData!==undefined;var r=!!t.fn.prop;t.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function k(n){var r=t.param(n,e.traditional).split("&"),i=r.length,s=[],o,u;for(o=0;o<i;o++)r[o]=r[o].replace(/\+/g," "),u=r[o].split("="),s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])]);return s}function L(n){var r=new FormData;for(var s=0;s<n.length;s++)r.append(n[s].name,n[s].value);if(e.extraData){var o=k(e.extraData);for(s=0;s<o.length;s++)o[s]&&r.append(o[s][0],o[s][1])}e.data=null;var u=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});e.uploadProgress&&(u.xhr=function(){var n=t.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(t){var n=0,r=t.loaded||t.position,i=t.total;t.lengthComputable&&(n=Math.ceil(r/i*100)),e.uploadProgress(t,r,i,n)},!1),n}),u.data=null;var a=u.beforeSend;return u.beforeSend=function(t,n){e.formData?n.data=e.formData:n.data=r,a&&a.call(this,t,n)},t.ajax(u)}function A(n){function T(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){o("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){o("cannot get iframe.contentDocument: "+n),t=e.document}return t}function k(){function f(){try{var e=T(v).readyState;o("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(f,50)}catch(t){o("Server abort: ",t," (",t.name,")"),_(x),w&&clearTimeout(w),w=undefined}}var e=a.attr2("target"),n=a.attr2("action"),r="multipart/form-data",u=a.attr("enctype")||a.attr("encoding")||r;s.setAttribute("target",p),(!i||/post/i.test(i))&&s.setAttribute("method","POST"),n!=l.url&&s.setAttribute("action",l.url),!l.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){b=!0,_(S)},l.timeout));var c=[];try{if(l.extraData)for(var h in l.extraData)l.extraData.hasOwnProperty(h)&&(t.isPlainObject(l.extraData[h])&&l.extraData[h].hasOwnProperty("name")&&l.extraData[h].hasOwnProperty("value")?c.push(t('<input type="hidden" name="'+l.extraData[h].name+'">').val(l.extraData[h].value).appendTo(s)[0]):c.push(t('<input type="hidden" name="'+h+'">').val(l.extraData[h]).appendTo(s)[0]));l.iframeTarget||d.appendTo("body"),v.attachEvent?v.attachEvent("onload",_):v.addEventListener("load",_,!1),setTimeout(f,15);try{s.submit()}catch(m){var g=document.createElement("form").submit;g.apply(s)}}finally{s.setAttribute("action",n),s.setAttribute("enctype",u),e?s.setAttribute("target",e):a.removeAttr("target"),t(c).remove()}}function _(e){if(m.aborted||M)return;A=T(v),A||(o("cannot access response document"),e=x);if(e===S&&m){m.abort("timeout"),E.reject(m,"timeout");return}if(e==x&&m){m.abort("server abort"),E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc)if(!b)return;v.detachEvent?v.detachEvent("onload",_):v.removeEventListener("load",_,!1);var n="success",r;try{if(b)throw"timeout";var i=l.dataType=="xml"||A.XMLDocument||t.isXMLDoc(A);o("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){o("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var s=A.body?A.body:A.documentElement;m.responseText=s?s.innerHTML:null,m.responseXML=A.XMLDocument?A.XMLDocument:A,i&&(l.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e.toLowerCase()]},s&&(m.status=Number(s.getAttribute("status"))||m.status,m.statusText=s.getAttribute("statusText")||m.statusText);var u=(l.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)m.responseText=f.value,m.status=Number(f.getAttribute("status"))||m.status,m.statusText=f.getAttribute("statusText")||m.statusText;else if(a){var c=A.getElementsByTagName("pre")[0],p=A.getElementsByTagName("body")[0];c?m.responseText=c.textContent?c.textContent:c.innerText:p&&(m.responseText=p.textContent?p.textContent:p.innerText)}}else u=="xml"&&!m.responseXML&&m.responseText&&(m.responseXML=D(m.responseText));try{L=H(m,u,l)}catch(g){n="parsererror",m.error=r=g||n}}catch(g){o("error caught: ",g),n="error",m.error=r=g||n}m.aborted&&(o("upload aborted"),n=null),m.status&&(n=m.status>=200&&m.status<300||m.status===304?"success":"error"),n==="success"?(l.success&&l.success.call(l.context,L,"success",m),E.resolve(m.responseText,"success",m),h&&t.event.trigger("ajaxSuccess",[m,l])):n&&(r===undefined&&(r=m.statusText),l.error&&l.error.call(l.context,m,n,r),E.reject(m,"error",r),h&&t.event.trigger("ajaxError",[m,l,r])),h&&t.event.trigger("ajaxComplete",[m,l]),h&&!--t.active&&t.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,n),M=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),m.responseXML=null},100)}var s=a[0],u,f,l,h,p,d,v,m,g,y,b,w,E=t.Deferred();E.abort=function(e){m.abort(e)};if(n)for(f=0;f<c.length;f++)u=t(c[f]),r?u.prop("disabled",!1):u.removeAttr("disabled");l=t.extend(!0,{},t.ajaxSettings,e),l.context=l.context||l,p="jqFormIO"+(new Date).getTime(),l.iframeTarget?(d=t(l.iframeTarget),y=d.attr2("name"),y?p=y:d.attr2("name",p)):(d=t('<iframe name="'+p+'" src="'+l.iframeSrc+'" />'),d.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=d[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n=e==="timeout"?"timeout":"aborted";o("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}d.attr("src",l.iframeSrc),m.error=n,l.error&&l.error.call(l.context,m,n,e),h&&t.event.trigger("ajaxError",[m,l,n]),l.complete&&l.complete.call(l.context,m,n)}},h=l.global,h&&0===t.active++&&t.event.trigger("ajaxStart"),h&&t.event.trigger("ajaxSend",[m,l]);if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===!1)return l.global&&t.active--,E.reject(),E;if(m.aborted)return E.reject(),E;g=s.clk,g&&(y=g.name,y&&!g.disabled&&(l.extraData=l.extraData||{},l.extraData[y]=g.value,g.type=="image"&&(l.extraData[y+".x"]=s.clk_x,l.extraData[y+".y"]=s.clk_y)));var S=1,x=2,N=t("meta[name=csrf-token]").attr("content"),C=t("meta[name=csrf-param]").attr("content");C&&N&&(l.extraData=l.extraData||{},l.extraData[C]=N),l.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=t.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=t.parseJSON||function(e){return window.eval("("+e+")")},H=function(e,n,r){var i=e.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?e.responseXML:e.responseText;return s&&o.documentElement.nodeName==="parsererror"&&t.error&&t.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&t.globalEval(o)),o};return E}if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var i,s,u,a=this;typeof e=="function"?e={success:e}:e===undefined&&(e={}),i=e.type||this.attr2("method"),s=e.url||this.attr2("action"),u=typeof s=="string"?t.trim(s):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:u,success:t.ajaxSettings.success,type:i||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var f={};this.trigger("form-pre-serialize",[this,e,f]);if(f.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=e.traditional;l===undefined&&(l=t.ajaxSettings.traditional);var c=[],h,p=this.formToArray(e.semantic,c);e.data&&(e.extraData=e.data,h=t.param(e.data,l));if(e.beforeSubmit&&e.beforeSubmit(p,this,e)===!1)return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,e,f]);if(f.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=t.param(p,l);h&&(d=d?d+"&"+h:h),e.type.toUpperCase()=="GET"?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+d,e.data=null):e.data=d;var v=[];e.resetForm&&v.push(function(){a.resetForm()}),e.clearForm&&v.push(function(){a.clearForm(e.includeHidden)});if(!e.dataType&&e.target){var m=e.success||function(){};v.push(function(n){var r=e.replaceTarget?"replaceWith":"html";t(e.target)[r](n).each(m,arguments)})}else e.success&&v.push(e.success);e.success=function(t,n,r){var i=e.context||this;for(var s=0,o=v.length;s<o;s++)v[s].apply(i,[t,n,r||a,a])};if(e.error){var g=e.error;e.error=function(t,n,r){var i=e.context||this;g.apply(i,[t,n,r,a])}}if(e.complete){var y=e.complete;e.complete=function(t,n){var r=e.context||this;y.apply(r,[t,n,a])}}var b=t("input[type=file]:enabled",this).filter(function(){return t(this).val()!==""}),w=b.length>0,E="multipart/form-data",S=a.attr("enctype")==E||a.attr("encoding")==E,x=n.fileapi&&n.formdata;o("fileAPI :"+x);var T=(w||S)&&!x,N;e.iframe!==!1&&(e.iframe||T)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){N=A(p)}):N=A(p):(w||S)&&x?N=L(p):N=t.ajax(e),a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++)c[C]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(e){e=e||{},e.delegation=e.delegation&&t.isFunction(t.fn.on);if(!e.delegation&&this.length===0){var n={s:this.selector,c:this.context};return!t.isReady&&n.s?(o("DOM not ready, queuing ajaxForm"),t(function(){t(n.s,n.c).ajaxForm(e)}),this):(o("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,s).on("submit.form-plugin",this.selector,e,i).on("click.form-plugin",this.selector,e,s),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,i).bind("click.form-plugin",e,s)};function i(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(n))}function s(e){var n=e.target,r=t(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(e.offsetX!==undefined)s.clk_x=e.offsetX,s.clk_y=e.offsetY;else if(typeof t.fn.offset=="function"){var o=r.offset();s.clk_x=e.pageX-o.left,s.clk_y=e.pageY-o.top}else s.clk_x=e.pageX-n.offsetLeft,s.clk_y=e.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,r){var i=[];if(this.length===0)return i;var s=this[0],o=this.attr("id"),u=e?s.getElementsByTagName("*"):s.elements,a;u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=t(u).get()),o&&(a=t(':input[form="'+o+'"]').get(),a.length&&(u=(u||[]).concat(a)));if(!u||!u.length)return i;var f,l,c,h,p,d,v;for(f=0,d=u.length;f<d;f++){p=u[f],c=p.name;if(!c||p.disabled)continue;if(e&&s.clk&&p.type=="image"){s.clk==p&&(i.push({name:c,value:t(p).val(),type:p.type}),i.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}));continue}h=t.fieldValue(p,!0);if(h&&h.constructor==Array){r&&r.push(p);for(l=0,v=h.length;l<v;l++)i.push({name:c,value:h[l]})}else if(n.fileapi&&p.type=="file"){r&&r.push(p);var m=p.files;if(m.length)for(l=0;l<m.length;l++)i.push({name:c,value:m[l],type:p.type});else i.push({name:c,value:"",type:p.type})}else h!==null&&typeof h!="undefined"&&(r&&r.push(p),i.push({name:c,value:h,type:p.type,required:p.required}))}if(!e&&s.clk){var g=t(s.clk),y=g[0];c=y.name,c&&!y.disabled&&y.type=="image"&&(i.push({name:c,value:g.val()}),i.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}))}return i},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=t.fieldValue(this,e);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=t.fieldValue(s,e);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?t.merge(n,o):n.push(o)}return n},t.fieldValue=function(e,n){var r=e.name,i=e.type,s=e.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||e.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!e.checked||(i=="submit"||i=="image")&&e.form&&e.form.clk!=e||s=="select"&&e.selectedIndex==-1))return null;if(s=="select"){var o=e.selectedIndex;if(o<0)return null;var u=[],a=e.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(r)||typeof e=="string"&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},t.fn.selected=function(e){return e===undefined&&(e=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=e;else if(this.tagName.toLowerCase()=="option"){var r=t(this).parent("select");e&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1;function o(){if(!t.fn.ajaxSubmit.debug)return;var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var n={};n.fileapi=t("<input type='file'/>").get(0).files!==undefined,n.formdata=window.FormData!==undefined,t.fn.uploadFile=function(r){function c(){if(l)return;l=!0,function e(){i.sequential||(i.sequentialCount=99999);if(a.length==0&&f.length==0)i.afterUploadAll&&i.afterUploadAll(o),l=!1;else{if(f.length<i.sequentialCount){var t=a.shift();t!=undefined&&(f.push(t),t.removeClass(o.formGroup),t.submit())}window.setTimeout(e,100)}}()}function h(e,n,r){r.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),t(this).addClass(n.dragDropHoverClass)}),r.on("dragover",function(e){e.stopPropagation(),e.preventDefault();var r=t(this);r.hasClass(n.dragDropContainerClass)&&!r.hasClass(n.dragDropHoverClass)&&r.addClass(n.dragDropHoverClass)}),r.on("drop",function(r,i){r.preventDefault(),t(this).removeClass(n.dragDropHoverClass),r.orginaEvent||(r=i),e.errorLog.html("");var s=r.originalEvent.dataTransfer.files;if(!n.multiple&&s.length>1){n.showError&&t("<div class='"+n.errorClass+"'>"+n.multiDragErrorStr+"</div>").appendTo(e.errorLog);return}if(n.onSelect(s)==0)return;m(n,e,s)}),r.on("dragleave",function(e){t(this).removeClass(n.dragDropHoverClass)}),t(document).on("dragenter",function(e){e.stopPropagation(),e.preventDefault()}),t(document).on("dragover",function(e){e.stopPropagation(),e.preventDefault();var r=t(this);r.hasClass(n.dragDropContainerClass)||r.removeClass(n.dragDropHoverClass)}),t(document).on("drop",function(e){e.stopPropagation(),e.preventDefault(),t(this).removeClass(n.dragDropHoverClass)})}function p(e){var t="",n=e/1024;if(parseInt(n)>1024){var r=n/1024;t=r.toFixed(2)+" MB"}else t=n.toFixed(2)+" KB";return t}function d(e){var n=[];t.type(e)=="string"?n=e.split("&"):n=t.param(e).split("&");var r=n.length,i=[],s,o;for(s=0;s<r;s++)n[s]=n[s].replace(/\+/g," "),o=n[s].split("="),i.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return i}function v(e,n,r){var i=e,s=new FormData,o=[],u=e.fileName.replace("[]",""),a="";for(var f=0;f<r.length;f++){if(!g(n,e,r[f].name)){e.showError&&t("<div><font color='red'>"+e.extErrorStr+e.allowedTypes+"</font></div>").appendTo(n.errorLog);continue}if(e.maxFileSize!=-1&&r[f].size>e.maxFileSize){e.showError&&t("<div><font color='red'><b>"+r[f].name+"</b> "+e.sizeErrorStr+p(e.maxFileSize)+"</font></div>").appendTo(n.errorLog);continue}s.append(u+"[]",r[f]),o.push(r[f].name),a+=n.fileCounter+"). "+r[f].name+"<br>",n.fileCounter++}if(o.length==0)return;var l=e.formData;if(l){var c=d(l);for(var h=0;h<c.length;h++)c[h]&&s.append(c[h][0],c[h][1])}i.fileData=s;var v=new T(n,e);v.filename.html(a);var m=t("<form style='display:block; position:absolute;left: 150px;' class='"+n.formGroup+"' method='"+e.method+"' action='"+e.url+"' enctype='"+e.enctype+"'></form>");m.appendTo("body"),N(m,i,v,o,n)}function m(e,n,r){for(var i=0;i<r.length;i++){if(!g(n,e,r[i].name)){if(e.showError){var s=t("<div class='"+e.errorClass+"'><b>"+r[i].name+"</b> "+e.extErrorStr+e.allowedTypes+"</div>");s.on("click",function(){s.addClass("pubble-off"),t(".pubble-cw-input-textarea").focus()}),s.appendTo(n.errorLog)}continue}if(!e.allowDuplicates&&y(n,r[i].name)){if(e.showError){var s=t("<div class='"+e.errorClass+"'><b>"+r[i].name+"</b> "+e.duplicateErrorStr+"</div>");s.on("click",function(){s.addClass("pubble-off"),t(".pubble-cw-input-textarea").focus()}),s.appendTo(n.errorLog)}continue}if(e.maxFileSize!=-1&&r[i].size>e.maxFileSize){if(e.showError){var s=t("<div class='"+e.errorClass+"'><b>"+r[i].name+"</b> "+e.sizeErrorStr+p(e.maxFileSize)+"</div>");s.on("click",function(){s.addClass("pubble-off"),t(".pubble-cw-input-textarea").focus()}),s.appendTo(n.errorLog)}continue}if(e.maxFileCount!=-1&&n.selectedFiles>=e.maxFileCount){if(e.showError){var s=t("<div class='"+e.errorClass+"'><b>"+r[i].name+"</b> "+e.maxFileCountErrorStr+e.maxFileCount+"</div>");s.on("click",function(){s.addClass("pubble-off"),t(".pubble-cw-input-textarea").focus()}),s.appendTo(n.errorLog)}continue}n.selectedFiles++,n.existingFileNames.push(r[i].name);var o=e,u=new FormData,a=e.fileName.replace("[]","");u.append(a,r[i]);var f=e.formData;if(f){var l=d(f);for(var c=0;c<l.length;c++)l[c]&&u.append(l[c][0],l[c][1])}o.fileData=u;var h=new T(n,e),v="";e.showFileCounter?v=n.fileCounter+e.fileCounterStyle+r[i].name:v=r[i].name,e.showFileSize&&(v+=" ("+p(r[i].size)+")"),h.filename.html(v);var m=t("<form style='display:block; position:absolute;left: 150px;' class='"+n.formGroup+"' method='"+e.method+"' action='"+e.url+"' enctype='"+e.enctype+"'></form>");m.appendTo("body");var b=[];b.push(r[i].name),N(m,o,h,b,n,r[i]),n.fileCounter++}}function g(e,n,r){var i=n.allowedTypes.toLowerCase().split(/[\s,]+/g),s=r.split(".").pop().toLowerCase();return n.allowedTypes!="*"&&t.inArray(s,i)<0?!1:!0}function y(e,t){var n=!1;if(e.existingFileNames.length)for(var r=0;r<e.existingFileNames.length;r++)if(e.existingFileNames[r]==t||i.duplicateStrict&&e.existingFileNames[r].toLowerCase()==t.toLowerCase())n=!0;return n}function b(e,t){if(e.existingFileNames.length)for(var n=0;n<t.length;n++){var r=e.existingFileNames.indexOf(t[n]);r!=-1&&e.existingFileNames.splice(r,1)}}function w(e,t){if(e){t.show();var n=new FileReader;n.onload=function(e){t.attr("src",e.target.result)},n.readAsDataURL(e)}}function E(e,n){if(e.showFileCounter){var r=t(n.container).find(".ajax-file-upload-filename").length;n.fileCounter=r+1,t(n.container).find(".ajax-file-upload-filename").each(function(n,i){var s=t(this).html().split(e.fileCounterStyle),o=parseInt(s[0])-1,u=r+e.fileCounterStyle+s[1];t(this).html(u),r--})}}function S(e,r,i,s){var o="ajax-upload-id-"+(new Date).getTime(),u=t("<form method='"+i.method+"' action='"+i.url+"' enctype='"+i.enctype+"'><label for='"+o+"'>Upload</label></form>"),a="<input type='file' id='"+o+"' name='"+i.fileName+"' accept='"+i.acceptFiles+"'/>";i.multiple&&(i.fileName.indexOf("[]")!=i.fileName.length-2&&(i.fileName+="[]"),a="<input type='file' id='"+o+"' name='"+i.fileName+"' accept='"+i.acceptFiles+"' multiple/>");var f=t(a).appendTo(u);f.change(function(){e.errorLog.html("");var o=i.allowedTypes.toLowerCase().split(","),a=[];if(this.files){for(d=0;d<this.files.length;d++)a.push(this.files[d].name);if(i.onSelect(this.files)==0)return}else{var f=t(this).val(),l=[];a.push(f);if(!g(e,i,f)){if(i.showError){var c=t("<div class='"+i.errorClass+"'><b>"+f+"</b> "+i.extErrorStr+i.allowedTypes+"</div>");c.on("click",function(){c.addClass("pubble-off")}),c.appendTo(e.errorLog)}return}l.push({name:f,size:"NA"});if(i.onSelect(l)==0)return}E(i,e),s.unbind("click"),u.hide(),S(e,r,i,s),u.addClass(r);if(i.serialize&&n.fileapi&&n.formdata){u.removeClass(r);var h=this.files;u.remove(),m(i,e,h)}else{var p="";for(var d=0;d<a.length;d++)i.showFileCounter?p+=e.fileCounter+i.fileCounterStyle+a[d]+"<br>":p+=a[d]+"<br>",e.fileCounter++;if(i.maxFileCount!=-1&&e.selectedFiles+a.length>i.maxFileCount){i.showError&&t("<div class='"+i.errorClass+"'><b>"+p+"</b> "+i.maxFileCountErrorStr+i.maxFileCount+"</div>").appendTo(e.errorLog);return}e.selectedFiles+=a.length;var v=new T(e,i);v.filename.html(p),N(u,i,v,a,e,null)}}),i.nestedForms?(u.css({margin:0,padding:0}),s.css({position:"relative",overflow:"hidden",cursor:"default"}),f.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),u.appendTo(s)):(u.appendTo(t("body")),u.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),navigator.appVersion.indexOf("MSIE ")!=-1?s.attr("for",o):s.click(function(){f.click()}))}function x(e,n){return this.statusbar=t("<div class='ajax-file-upload-statusbar'></div>").width(n.statusBarWidth),this.preview=t("<img class='ajax-file-upload-preview' />").width(n.previewWidth).height(n.previewHeight).appendTo(this.statusbar).hide(),this.filename=t("<div class='ajax-file-upload-filename'></div>").appendTo(this.statusbar),this.progressDiv=t("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide(),this.progressbar=t("<div class='ajax-file-upload-bar'></div>").appendTo(this.progressDiv),this.abort=t("<div>"+n.abortStr+"</div>").appendTo(this.statusbar).hide(),this.cancel=t("<div>"+n.cancelStr+"</div>").appendTo(this.statusbar).hide(),this.done=t("<div>"+n.doneStr+"</div>").appendTo(this.statusbar).hide(),this.download=t("<div>"+n.downloadStr+"</div>").appendTo(this.statusbar).hide(),this.del=t("<div>"+n.deletelStr+"</div>").appendTo(this.statusbar).hide(),this.abort.addClass("ajax-file-upload-red"),this.done.addClass("ajax-file-upload-green"),this.download.addClass("ajax-file-upload-green"),this.cancel.addClass("ajax-file-upload-red"),this.del.addClass("ajax-file-upload-red"),this}function T(n,r){var i=null;r.customProgressBar?i=new r.customProgressBar(n,r):i=new x(n,r),i.abort.addClass(n.formGroup),i.abort.addClass(r.abortButtonClass),i.cancel.addClass(n.formGroup),i.cancel.addClass(r.cancelButtonClass),r.extraHTML&&(i.extraHTML=t("<div class='extrahtml'>"+r.extraHTML()+"</div>").insertAfter(i.filename));var s=t(".pubble-cw-input-progress-default"),o=t(".pubble-cw-input-progress");return s.html(i.statusbar),e.addClass(o,"pubble-cw-isactive"),i}function N(e,r,i,s,o,u){var l=null,h={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:r.method,data:r.formData,formData:r.fileData,dataType:r.returnType,beforeSubmit:function(n,u,f){if(r.onSubmit.call(this,s)!=0){if(r.dynamicFormData){var l=d(r.dynamicFormData());if(l)for(var c=0;c<l.length;c++)l[c]&&(r.fileData!=undefined?f.formData.append(l[c][0],l[c][1]):f.data[l[c][0]]=l[c][1])}return r.extraHTML&&t(i.extraHTML).find("input,select,textarea").each(function(e,n){r.fileData!=undefined?f.formData.append(t(this).attr("name"),t(this).val()):f.data[t(this).attr("name")]=t(this).val()}),!0}return i.statusbar.append("<div class='"+r.errorClass+"'>"+r.uploadErrorStr+"</div>"),i.cancel.show(),e.remove(),i.cancel.click(function(){a.splice(a.indexOf(e),1),b(o,s),i.statusbar.remove(),t(".pubble-cw-input-progress").removeClass("pubble-cw-isactive"),r.onCancel.call(o,s,i),o.selectedFiles-=s.length,E(r,o)}),!1},beforeSend:function(e,t){i.progressDiv.show(),i.cancel.hide(),i.done.hide(),r.showAbort&&(i.abort.show(),i.abort.click(function(){b(o,s),e.abort(),o.selectedFiles-=s.length,r.onAbort.call(o,s,i)})),n.formdata?i.progressbar.width("1%"):i.progressbar.width("5%")},uploadProgress:function(e,t,n,s){s>98&&(s=98);var o=s+"%";s>1&&i.progressbar.width(o),r.showProgress&&(i.progressbar.html(o),i.progressbar.css("text-align","center"))},success:function(n,u,a){i.cancel.remove(),f.pop(),t(".pubble-cw-input-progress").removeClass("pubble-cw-isactive");if(r.returnType=="json"&&t.type(n)=="object"&&n.hasOwnProperty(r.customErrorKeyStr)){i.abort.hide();var l=n[r.customErrorKeyStr];r.onError.call(this,s,200,l,i),r.showStatusAfterError?(i.progressDiv.hide(),i.statusbar.append("<span class='"+r.errorClass+"'>ERROR: "+l+"</span>")):(i.statusbar.hide(),i.statusbar.remove()),o.selectedFiles-=s.length,e.remove();return}o.responses.push(n),i.progressbar.width("100%"),r.showProgress&&(i.progressbar.html("100%"),i.progressbar.css("text-align","center")),i.abort.hide(),r.onSuccess.call(this,s,n,a,i),r.showStatusAfterSuccess?(r.showDone?(i.done.show(),i.done.click(function(){i.statusbar.hide("slow"),i.statusbar.remove()})):i.done.hide(),r.showDelete?(i.del.show(),i.del.click(function(){b(o,s),i.statusbar.hide().remove(),r.deleteCallback&&r.deleteCallback.call(this,n,i),o.selectedFiles-=s.length,E(r,o)})):i.del.hide()):(i.statusbar.hide("slow"),i.statusbar.remove()),r.showDownload&&(i.download.show(),i.download.click(function(){r.downloadCallback&&r.downloadCallback(n)})),e.remove()},error:function(n,u,a){i.cancel.remove(),f.pop(),i.abort.hide(),n.statusText=="abort"?(i.statusbar.hide("slow").remove(),E(r,o)):(r.onError.call(this,s,u,a,i),r.showStatusAfterError?(i.progressDiv.hide(),i.statusbar.append("<span class='"+r.errorClass+"'>ERROR: "+a+"</span>")):(i.statusbar.hide(),i.statusbar.remove(),t(".pubble-cw-input-progress").removeClass("pubble-cw-isactive")),o.selectedFiles-=s.length),e.remove()}};r.showPreview&&u!=null&&u.type.toLowerCase().split("/").shift()=="image"&&w(u,i.preview),r.autoSubmit?(e.ajaxForm(h),a.push(e),c()):(r.showCancel&&(i.cancel.show(),i.cancel.click(function(){a.splice(a.indexOf(e),1),b(o,s),e.remove(),i.statusbar.remove(),t(".pubble-cw-input-progress").removeClass("pubble-cw-isactive"),r.onCancel.call(o,s,i),o.selectedFiles-=s.length,E(r,o)})),e.ajaxForm(h))}var i=t.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:-1,maxFileCount:-1,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(e){},onSelect:function(e){return!0},onSubmit:function(e,t){},onSuccess:function(e,t,n,r){},onError:function(e,t,n,r){},onCancel:function(e,t){},onAbort:function(e,t){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b>Drag &amp; Drop Files</b></span>",uploadStr:"",abortStr:"Abort",cancelStr:"Cancel",deletelStr:"Delete",doneStr:"Done",multiDragErrorStr:"Multiple File Drag &amp; Drop is not allowed.",extErrorStr:"is not allowed. Allowed extensions: ",duplicateErrorStr:"is not allowed. File already exists.",sizeErrorStr:"is not allowed. Allowed Max size: ",uploadErrorStr:"Upload is not allowed",maxFileCountErrorStr:" is not allowed. Maximum allowed files are:",downloadStr:"Download",customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:400,dragdropWidth:400,showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueueOrder:"top"},r);this.fileCounter=1,this.selectedFiles=0;var s="ajax-file-upload-"+(new Date).getTime();this.formGroup=s,this.errorLog=t("<div></div>"),this.responses=[],this.existingFileNames=[],n.formdata||(i.dragDrop=!1);if(!n.formdata||i.maxFileCount===1)i.multiple=!1;t(this).html("");var o=this,u=t("<div>"+i.uploadStr+"</div>");t(u).addClass(i.uploadButtonClass),function C(){if(t.fn.ajaxForm){if(i.dragDrop){var e=t('<div class="'+i.dragDropContainerClass+'" style="vertical-align:top;"></div>').width(i.dragdropWidth);t(o).append(e),t(e).append(u),t(e).append(t(i.dragDropStr)),h(o,i,e)}else t(o).append(u);t(o).append(o.errorLog),i.showQueueDiv?o.container=t("#"+i.showQueueDiv):o.container=t("<div class='ajax-file-upload-container'></div>").insertAfter(t(o)),i.onLoad.call(this,o),S(o,s,i,u)}else window.setTimeout(C,10)}(),this.startUpload=function(){t("form").each(function(e,n){t(this).hasClass(o.formGroup)&&a.push(t(this))}),a.length>=1&&c()},this.getFileCount=function(){return o.selectedFiles},this.stopUpload=function(){t("."+i.abortButtonClass).each(function(e,n){t(this).hasClass(o.formGroup)&&t(this).click()}),t("."+i.cancelButtonClass).each(function(e,n){t(this).hasClass(o.formGroup)&&t(this).click()})},this.cancelAll=function(){t("."+i.cancelButtonClass).each(function(e,n){t(this).hasClass(o.formGroup)&&t(this).click()})},this.update=function(e){i=t.extend(i,e)},this.reset=function(e){o.fileCounter=1,o.selectedFiles=0,o.errorLog.html(""),e!=0&&o.container.html("")},this.remove=function(){o.container.html(""),t(o).remove()},this.createProgress=function(e,t,n){var r=new T(this,i);r.progressDiv.show(),r.progressbar.width("100%");var s="";return i.showFileCounter?s=o.fileCounter+i.fileCounterStyle+e:s=e,i.showFileSize&&(s+=" ("+p(n)+")"),r.filename.html(s),o.fileCounter++,o.selectedFiles++,i.showPreview&&(r.preview.attr("src",t),r.preview.show()),i.showDownload&&(r.download.show(),r.download.click(function(){i.downloadCallback&&i.downloadCallback.call(o,[e])})),i.showDelete&&(r.del.show(),r.del.click(function(){r.statusbar.hide().remove();var t=[e];i.deleteCallback&&i.deleteCallback.call(this,t,r),o.selectedFiles-=1,E(i,o)})),r},this.getResponses=function(){return this.responses};var a=[],f=[],l=!1;return this}})(t);var n={isBadIE:function(){return navigator.appVersion.indexOf("MSIE 7.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1||navigator.appVersion.indexOf("MSIE 9.")!=-1},uploadAvatarCallback:function(n,r){var i=n+"",s="";i.indexOf("amazonaws.")>-1?s=i:s="https://media.pubble.io"+i+"",t("#mod-avatar").attr("src",s);var o={},n={contentType:"JSONP"};n.accountId=r.id,n.alias=r.alias,n.avatar=s,e.XDR(e.getEndpoints().profile,n,function(e){},new function(){},o)},uploadImg:function(r,i,s,o,u,a){var f=!0;r=="mod-avatar-upload-x"&&(f=!1);var l={};l.rndid=(new Date).getTime()+""+Math.floor(Math.random()*1001),a&&(l.custom=JSON.stringify(a)),o||(o=t("#uploading_text_updates"));var c="http://upload.pubble.io";"https:"==document.location.protocol&&(c="https://upload.pubble.io"),t("#"+r).uploadFile({url:c,allowedTypes:"png,gif,jpg,jpeg,pdf,doc,docx,xls,xlsx,ppt,pptx,zip,rar,txt,mp3,csv",formData:l,showAbort:!1,maxFileSize:3584e4,showDone:!1,dragDrop:!1,multiple:!1,onSubmit:function(e){var n=t(o);window.pb_uploaded_fileName=e[0],n.removeClass("pubble-off")},onError:function(n,r,i){var s=pubblebot.require("app");s.vent.trigger("app:stream:chatbox",s.box),e.addClass(t(o),"pubble-off"),t(".ajax-file-upload-statusbar").remove()},onSuccess:function(r,s,a){window.pb_uploaded_fileName=r[0],t(".ajax-file-upload-error").html(""),t(".ajax-file-upload-statusbar").remove(),t("#uploading_text_updates").html(""),n.isBadIE()?t.ajax({url:"https://media.pubble.io/imgurl/media_"+l.rndid,type:"GET",dataType:"jsonp",cache:0,success:function(n){i(n.data),t(".ajax-file-upload-statusbar").remove(),e.addClass(t(o),"pubble-off")},error:function(n){i(n.data),t(".ajax-file-upload-statusbar").remove(),e.addClass(t(o),"pubble-off")}}):(i(s,u),t(".ajax-file-upload-statusbar").remove())}})}};return n}),pubblebot.define("views/conversation",["backbone","underscore","utils/utils","text!templates/conversation.tpl","utils/appConfig"],function(e,t,n,r,i){var s=window.jQueryPBm,o=window.$pubbBackbone.noConflict(),u=o.View.extend({template:$UScore.template(r),className:"pubble-cw-chat-item",initialize:function(e){var t=this;window.$UScore.bindAll(this,"render","tileChange"),this._id=e.model.get("id"),this.model=e.model,this.model.on("change:avatar",this.tileChange,this),this.model.on("change:alias",this.tileChange,this),this.model.on("change:content",this.tileChange,this),this.model.on("change:read",this.tileChange,this),this.model.on("change:reply_content",this.tileChange,this),this.model.on("change:replied",this.tileChange,this),this.model.on("change:moderator_reply",this.tileChange,this)},tileChange:function(){var e=this.$el.find(".pubble-cw-chat-mod");this.$el.find(".pubble-cw-chat-avatar-img").find("img").attr("src",this.model.get("avatar")),e.html(this.model.get("alias")),this.$el.find(".pubble-cw-chat-last").html(this.model.get("reply_content")),this.model.get("accountAssigned")?(n.addClass(e,"pubble-cw-chat-mod-isperson"),e.removeClass("pubble-cw-chat-mod-ischannel"),e.removeClass("pubble-cw-chat-mod-iscommunity")):this.model.get("groupAssigned")?(n.addClass(e,"pubble-cw-chat-mod-ischannel"),e.removeClass("pubble-cw-chat-mod-isperson"),e.removeClass("pubble-cw-chat-mod-iscommunity")):this.model.get("communityAssigned")&&(n.addClass(e,"pubble-cw-chat-mod-iscommunity"),e.removeClass("pubble-cw-chat-mod-ischannel"),e.removeClass("pubble-cw-chat-mod-isperson")),this.model.get("moderator_reply")?(n.addClass(this.$el.find(".pubble-cw-chat-last"),"pubble-cw-chat-last-ismod"),this.$el.find(".pubble-cw-chat-last").removeClass("pubble-cw-chat-last-isvisitor")):(this.$el.find(".pubble-cw-chat-last").removeClass("pubble-cw-chat-last-ismod"),n.addClass(this.$el.find(".pubble-cw-chat-last"),"pubble-cw-chat-last-isvisitor")),this.model.get("read")?this.$el.removeClass("pubble-cw-chat-item-unread"):n.addClass(this.$el,"pubble-cw-chat-item-unread")},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.tileChange(),this.$el.on("click",function(){var t=pubblebot.require("app");e.model.set("read",1),e.model.get("type")!="TT"?t.vent.trigger("pubble:app:msger:loadConversation",e.model):t.vent.trigger("app:trigger:q")}),e}});return u}),pubblebot.define("collections/posts",["underscore","backbone","utils/utils","models/post","views/post"],function(e,t,n,r,i){var s=window.$pubbBackbone.noConflict(),o=s.Collection.extend({idAttribute:"postID",model:r,initialize:function(){},parse:function(e){return e},toJSON:function(){return e.clone(this.attributes)},clear:function(e){this._reset()}});return o}),pubblebot.define("text!templates/form.tpl",[],function(){return'<div class="pubble-form-frame pubble-gdpr-parent pubble-md-gdpr-off">\n            <div class="pubble-form-top">\n                <div class="pubble-form-text-title">Contact details</div>\n                <div class="pubble-form-text-subtitle"></div>\n                <div class="pubble-form-top-close"></div>\n            </div>\n            <div class="pubble-form-center">\n                <div class="pubble-form-section-person">\n                    <div class="pubble-form-element pubble-form-person-name-container">\n                        <div class="pubble-form-element-title pubble-form-element-placeholder pubble-client-color">Name<span> (required)</span></div>\n                        <input type="text" value="" id="pubble-form-person-name" class="pubble-form-element-inputarea"/>\n                        <div class="pubble-form-error pubble-off">Name Required</div>\n                    </div>\n                    <div class="pubble-form-element pubble-form-person-email-container">\n                        <div class="pubble-form-element-title pubble-form-element-placeholder pubble-client-color">Email<span> (required)</span></div>\n                        <input type="text" value="" id="pubble-form-person-email" class="pubble-form-element-inputarea"/>\n                        <div class="pubble-form-error pubble-off">Email Required</div>\n                    </div>\n                    <div class="pubble-form-element pubble-form-person-phone-container">\n                        <div class="pubble-form-element-title pubble-client-color">Phone<span> (required)</span></div>\n                        <input class=" pubble-form-element-inputarea-phonefake"/> \n                        <div class="pubble-form-phone-lib"><input type="text" name="telphone" class="pubble-cw-mobile-lib pubble-form-element-inputarea"/></div>\n                        <div class="pubble-form-error pubble-off">Phone Required</div>\n                    </div>\n                </div>\n                <div class="pubble-form-section-question">\n                    <div class="pubble-form-element pubble-form-question-container">\n                        <div class="pubble-form-element-title pubble-form-element-placeholder pubble-client-color">Question<span> (required)</span></div>\n                        <textarea value="" id="pubble-form-question-textarea" class="pubble-form-element-inputarea"></textarea>\n                        <div class="pubble-form-error pubble-off">Question Required</div>\n                    </div>\n                </div>\n                \n                <div class="pubble-form-section-link">\n                    <div class="pubble-form-element pubble-form-link">\n                        <div class="pubble-form-element-title">Question Link</div>\n                        <div class="pubble-form-link-actual">http://f sdf sdfa sdfa sf</div>\n                    </div>\n                </div>\n            </div>\n            <div class="pubble-form-bottom">\n                <div class="pubble-gdpr">\n                    <div class="pubble-gdpr-error pubble-hide">\nAs you are submitting personal data, you must agree to consent before continuing.\n                    </div>\n                    <div class="pubble-gdpr-action">\n                    </div>\n                    <div class="pubble-gdpr-text">\n<span>I consent that any personal data I provide can be processed in accordance with the <span class="pubble-gdpr-text-link pubble-md-gdprmodal">Privacy Statement</span>.</span>\n\n                    </div>\n                </div>\n                <div class="pubble-form-actionbar">\n                    <div class="pubble-form-button pubble-form-button-submit pubble-cw-btn-main">Submit</div>\n                    <div class="pubble-form-button pubble-form-button-skip">Skip</div>\n                </div>\n                <div class="pubble-form-text-footer"></div>\n                <div class="pubble-form-text-validation pubble-off">Please add email or phone.</div>\n            </div>\n        </div>\n <div class="pubble-form-frame-inprogress pubble-hide">\n     <div class="pubble-form-frame-inprogress-anim">\n     \n        <div class="pubble-cw-dialog-item-waiting-ico pubble-cw-dialog-item-waiting-ico-fake"><div class="pubble-cw-dialog-item-waiting-ico-dot1"></div><div class="pubble-cw-dialog-item-waiting-ico-dot2"></div><div class="pubble-cw-dialog-item-waiting-ico-dot3"></div></div>\n     </div>\n</div>\n <div class="pubble-form-frame-poweredby">\n     <div class="pubble-cw-powered">\n                        <a class="pubble-cw-powered-link" href="http://pubble.io" target="_blank"></a>\n    </div>\n</div>'}),pubblebot.define("views/form",["backbone","underscore","utils/utils","text!templates/form.tpl","utils/appConfig","models/post","views/conversation","converters/converter","utils/storage"],function(e,t,n,r,i,s,o,u,a){var f=window.jQueryPBm,l=window.$pubbBackbone.noConflict(),c=l.View.extend({template:$UScore.template(r),className:"pubble-form",attributes:function(){return{id:this.model.get("id")+this.model.get("type")}},initialize:function(e){var t=this;window.$UScore.bindAll(this,"render"),this._id=e.model.get("id"),this.model=e.model,this.render()},render:function(){var e=this;this.$el.html(this.template(this.model.toJSON())),i.config.parameters.enableGdpr||e.$el.find(".pubble-gdpr-parent").removeClass("pubble-md-gdpr-off").removeClass("pubble-md-gdpr-on"),i.config.parameters.whitelabel&&this.$el.find(".pubble-cw-powered-link").remove(),this.$el.find(".pubble-gdpr-action").on("click",function(){var t=e.$el.find(".pubble-form-frame"),r=e.$el.find(".pubble-gdpr-error");t.hasClass("pubble-md-gdpr-off")?(t.removeClass("pubble-md-gdpr-off"),n.addClass(t,"pubble-md-gdpr-on"),r.removeClass("pubble-show"),n.addClass(r,"pubble-hide")):(t.removeClass("pubble-md-gdpr-on"),n.addClass(t,"pubble-md-gdpr-off"))}),this.$el.find(".pubble-gdpr-text-link").on("click",function(){return window.open(i.config.parameters.privacyPolicyUrl,"_blank"),!1});var t=e.$el.find(".pubble-gdpr"),r=e.$el.find(".pubble-gdpr-link");return i.config.parameters.enableGdpr||(n.addClass(t,"pubble-hide"),n.addClass(r,"pubble-hide")),i.config.parameters.smsRequired&&n.addClass(this.$el.find(".pubble-form-person-phone-container"),"pubble-form-element-isrequired"),i.config.parameters.emailRequired&&n.addClass(this.$el.find(".pubble-form-person-email-container"),"pubble-form-element-isrequired"),i.config.parameters.nameRequired&&n.addClass(this.$el.find(".pubble-form-person-name-container"),"pubble-form-element-isrequired"),i.config.parameters.emailOption||this.$el.find(".pubble-form-person-email-container").remove(),i.config.parameters.smsOption?this.$el.find(".pubble-cw-mobile-lib").on("keyup change",function(e){var t=f(e.target),n=t.val().replace(/[^-0-9]/gi,"");t.val(n)}):this.$el.find(".pubble-form-person-phone-container").remove(),i.config.parameters.nameOption||this.$el.find(".pubble-form-person-name-container").remove(),setTimeout(function(){e.$el.find(".pubble-form-element-inputarea").blur(function(e){f(e.target).val().trim().length==0&&f(e.target).parents(".pubble-form-element").removeClass("pubble-form-element-focus")}),e.$el.find(".pubble-form-element-inputarea").focus(function(e){n.addClass(f(e.target).parents(".pubble-form-element"),"pubble-form-element-focus")})},200),this.$el.find(".pubble-form-link-actual").html(this.model.get("shortUrl")),this.model.get("author").email!="anon@pubble.co"&&this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-email").find("textarea").val(this.model.get("author").email),this.model.get("conversationId")==0?(this.$el.find(".pubble-form-section-link").remove(),this.$el.find(".pubble-form-button-skip").remove()):(this.$el.find(".pubble-form-section-question").remove(),this.$el.find(".pubble-form-button-skip").remove()),this.$el.find(".pubble-form-top-close").on("click",function(){var t=e.$el.parent();t.removeClass("pubble-show"),n.addClass(t,"pubble-hide");var r=t.parent().find(".pubble-cw-chatlist-container");r.removeClass("pubble-hide"),n.addClass(r,"pubble-show"),e.$el.remove()}),this.$el.find(".pubble-form-button-submit").on("click",function(){var t=e.$el.find(".pubble-form-frame"),r=e.$el.find(".pubble-gdpr-error");if(t.hasClass("pubble-md-gdpr-off")&&i.config.parameters.enableGdpr)return r.removeClass("pubble-hide"),n.addClass(r,"pubble-show"),!1;if(e.$el.find(".pubble-form-button-submit").hasClass("pubble-form-submitted"))return!1;var l="",c=e.$el.find(".pubble-form-person-name-container"),h=e.$el.find(".pubble-form-person-email-container"),p=e.$el.find(".pubble-form-person-phone-container"),d=e.$el.find(".pubble-form-question-container"),v,r=!1;i.config.parameters.nameOption?(v=e.$el.find("#pubble-form-person-name").val(),v=v.trim().replace("\n","").replace(/\r\n/,"")):v="",i.config.parameters.nameOption&&i.config.parameters.nameRequired&&(v.length<2?(c.find(".pubble-form-error").removeClass("pubble-off"),n.addClass(c,"pubble-form-element-error"),c.removeClass("pubble-form-element-focus"),r=!0):(n.addClass(c.find(".pubble-form-error"),"pubble-off"),c.removeClass("pubble-form-element-error"))),i.config.parameters.emailOption&&(l=e.$el.find("#pubble-form-person-email").val(),l=l.trim().replace("\n","").replace(/\r\n/,"")),i.config.parameters.emailOption&&i.config.parameters.emailRequired&&(n.isValidEmail(l)?(n.addClass(h.find(".pubble-form-error"),"pubble-off"),h.removeClass("pubble-form-element-error")):(h.find(".pubble-form-error").removeClass("pubble-off"),n.addClass(h,"pubble-form-element-error"),h.removeClass("pubble-form-element-focus"),r=!0));var m="";if(i.config.parameters.smsOption){var g=e.$el.find(".pubble-cw-mobile-lib"),y=g.val().replace(/[^-0-9]/gi,""),b=e.$el.find(".selected-flag"),w=b.attr("title").trim();m=w.substring(w.indexOf("+"),w.length)+"-"+y}if(i.config.parameters.smsOption&&i.config.parameters.smsRequired)m.length<6||m.indexOf("-",m.length-"-".length)!==-1?(p.find(".pubble-form-error").removeClass("pubble-off"),n.addClass(p,"pubble-form-element-error"),p.removeClass("pubble-form-element-focus"),r=!0):(n.addClass(p.find(".pubble-form-error"),"pubble-off"),p.removeClass("pubble-form-element-error"));else if(m.length<6||m.indexOf("-",m.length-"-".length)!==-1)m="";var E=e.$el.find("#pubble-form-question-textarea").val().trim();E.length<4?(d.find(".pubble-form-error").removeClass("pubble-off"),n.addClass(d,"pubble-form-element-error"),d.removeClass("pubble-form-element-focus"),r=!0):(n.addClass(d.find(".pubble-form-error"),"pubble-off"),d.removeClass("pubble-form-element-error"));if(r)return!1;n.addClass(e.$el.find(".pubble-form-button-submit"),"pubble-form-submitted"),i.config.pageURL=n.getFilterLandingPage();var S=i.config.pageURL,x={communityId:i.config.communityId,contentType:"JSONP",appId:i.config.appID,postToType:"app",type:"Q",visitor:!0,name:v,content:E,landingPage:S};i.config.parameters.enableGdpr&&(x.agreePrivacyPolicy=!0),m&&m!=""&&(x.phone=m),v&&v!=""&&(x.name=v),l&&l!=""&&(x.email=l);var T=pubblebot.require("app");if(i.config.user==null||i.config.user.uid==0)x.anon=!0;x.tempId=n.getTempId();var N={},C=e.$el.find(".pubble-form-frame-inprogress");C.removeClass("pubble-hide"),n.addClass(C,"pubble-show"),T.targetAccountId>0&&(x.assignAccountIds=T.targetAccountId),T.targetgroupid>0&&(x.assignAppIds=T.targetgroupid),n.XDR(n.getEndpoints().post,x,function(e){T.email=x.email,T.sms=x.phone,T.clientName=x.name,T.shiftView("chat"),C.removeClass("pubble-show"),n.addClass(C,"pubble-hide"),T.content=x.content,T.email&&f(".pubble-cw-email-input").val(T.email),T.sms&&T.sms.length>4&&T.handleSMS(T.sms),e.data&&e.data.author&&e.data.author.type=="visitor"&&e.data.author.id&&(T.visitorId=e.data.author.id,a.set("visitor-id-"+i.config.appID,e.data.author.id)),f(".pubble-cw-isgreeting").remove(),T.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off"),T.triggerClick?T.vent.trigger("app:trigger:chatitem"):T.robotChat("Please type your question below",function(){},"greeting"),T.$el.find(".pubble-cw-input-textarea").attr("placeholder","Message"),T.manChat(x.content,function(){f(".pubble-cw-panel-bottom").removeAttr("style")},1,x.tempId),f(document).trigger("app:desktop:permission"),T.updateServer(),T.nocontacted=!1,f(".pubble-cw-input-textarea-placeholder").html("Message"),f(".pubble-cw-input-textarea-send").html("Send"),window.pb_uploaded_fileName="",T.targetAccountId=-1,T.targetgroupid=-1,T.$el.find(".pubble-cw-input-filelist").html(""),T.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),n.mixlog("cw-content-submitted",{landingPage:i.config.pageURL,communityId:i.config.communityId,appId:i.config.appID,type:"question"},T.track),f(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),T.conversationId=e.data.conversationId,n.setCookieValue("pb-conversationId",e.data.conversationId),n.setCookieValue("pb-appId",e.data.appId),T.objectId=e.objectId,T.lastPost=e.objectId,T.shortUrl=e.shortUrl,T.author=e.author,f(".pubble-cw-tick-mod").removeClass("pubble-off"),e.data.read&&T.updateRead(),n.mixlog("bot-cw-asked",{landingPage:i.config.pageURL,communityId:i.config.communityId,appId:i.config.appID,conversationId:e.data.conversationId},T.track),f(".pubble-cw-notif-link").html(e.data.shortUrl),f(".pubble-cw-input-buttonbar-link").find(".pubble-cw-input-buttonbar-content").html(e.data.shortUrl),T.author=e.data.author;var t=new s;t=u.setPost(t,e.data),T.conversationCollection.add(t),T.updateQuestionCount();var r=T.$el.find(".pubble-cw-chat-list");t.set("type","CV"),t.set("read",1);var l=new o({model:t}),c=l.render().$el;r.prepend(c),T.vent.trigger("init:presence",T.conversationId);var h={};h.conversationId=T.conversationId,h.appId=i.config.appID,h.code="contact",T.stage="contact";var p=window.setInterval(function(){T.pusherConnected&&T.presence_inited&&(window.clearInterval(p),setTimeout(function(){return n.addClass(f(".pubble-cw-input-processing"),"pubble-off"),T.faq(),T.credential=0,!1},100))},50)},function(){},N)}),e}});return c}),pubblebot.define("models/form",["underscore","backbone","utils/utils"],function(e,t,n){var r=window.$pubbBackbone.noConflict(),i=r.Model.extend({idAttribute:"postID",defaults:{id:0,nameRequired:0,emailRequired:0,smsRequired:0,type:"edit"},mtype:function(){},initialize:function(){var e=this.get("id")}});return i}),pubblebot.define("eventModule",["backbone","underscore","models/post","converters/converter","utils/appConfig","utils/utils","views/post","views/conversation","views/attachment"],function(e,t,n,r,i,s,o,u,a){var f=window.jQueryPBm,l=window.$pubbBackbone.noConflict(),c=function(e){var t=e.initialData||[],r={};r.app=e.app||{};var a=r.app;a.vent.bind("pubble:app:msger:loadConversation",function(e){a.shiftView("chat"),a.resetBottom(),a.loadConversation(e.get("conversationId"),a.appId,0)}),a.vent.bind("pubble:click:messenger",function(){a.$el.find(".pubble-cw-contactbot").trigger("click")}),a.vent.bind("app:conversation:mods",function(e){var t=a.conversationMods;t||(t=[]);var n="",r=a.$el.find(".pubble-cw-top-title"),o=a.$el.find(".pubble-cw-top-status"),u=a.$el.find(".pubble-cw-top-status-community");a.conversationMods.length==1?n=a.conversationMods[0]:a.conversationMods.length==0?n="":a.conversationMods.length==2?n=a.conversationMods[1]+", "+a.conversationMods[0]:n=a.conversationMods[a.conversationMods.length-1]+" and "+(a.conversationMods.length-1)+" more";if(n==""||a.conversationMods.length==0||!i.config.parameters.operational)r.html(i.config.communityName),s.addClass(o,"pubble-off"),u.removeClass("pubble-off");else if(i.config.parameters.postAsCommunity)r.html(i.config.communityName);else{r.html(n);if(e)o.removeClass("pubble-off").html("Online"),s.addClass(u,"pubble-off");else{var l=i.config.parameters.activeUsers,c=0;l!=null&&a.conversationMods.length>0&&f.each(l,function(e,t){for(var n=0;n<a.conversationMods.length;n++)if(a.conversationMods[n]==t.alias)return c=1,!0}),c?(o.removeClass("pubble-off").html("Online"),s.addClass(u,"pubble-off")):(s.addClass(o,"pubble-off"),u.removeClass("pubble-off"))}}}),a.vent.bind("app:trigger:chatitem",function(){a.triggerClick=0;var e=new o({model:a.triggerModel}),t=e.render().$el;s.addClass(t,"pubble-cw-isadmin  pubble-cw-isfirst pubble-cw-islast pubble-cw-istrigger"),t.attr("data",a.triggerUser.id),a.$el.find(".pubble-cw-panel-dialog").append(t)}),a.vent.bind("app:trigger:q",function(){a.triggerClick=1,a.$el.find(".pubble-cw-btn-newquestion-btn").trigger("click")}),a.vent.bind("app:trigger:msg",function(e,t){var n=a.$el.find(".pubble-cw-panel");if(!n.hasClass("pubble-move"))return!1;var r=new o({model:e}),i=r.render().$el,u=a.$el.find(".pubble-sb-bubble");i.on("click",function(n){if(t){a.triggerClick=0;var r=a.$el.find(".pubble-sb-notif");return r.find(".pubble-sb-notif-nr").html(0),s.addClass(r,"pubble-off"),a.vent.trigger("pubble:app:msger:loadConversation",e),!1}n.stopPropagation(),a.$el.find("#pb_sidebar").trigger("click"),a.triggerClick=1,a.$el.find(".pubble-cw-btn-newquestion-btn").trigger("click");var r=a.$el.find(".pubble-sb-notif");r.find(".pubble-sb-notif-nr").html(0),s.addClass(r,"pubble-off")});var u=a.$el.find(".pubble-sb-bubble");s.addClass(i,"pubble-cw-isadmin pubble-cw-isfirst"),s.addClass(i,"pubble-cw-panel-dialog-item-justin");var l=(new Date).getTime();i.attr("timestamp",l),u.find(".pubble-sb-bubble-item-one").html(i),a.aSound.play();var c=f(".pubble-cw-contactbot");s.addClass(c,"pubble-cw-isautotrigmsg"),c.removeClass("pubble-cw-ismantrigmsg"),u.removeClass("pubble-off").removeClass("pubble-move")}),a.vent.bind("pubble:trigger:run",function(){if(!navigator.cookieEnabled)return!1;if(i.config.parameters.rules.length>0){var e=i.config.parameters.rules[0],t=s.getCookie("pubble_trigger");if(!e.active||e.delay==-1)return!1;if(t==null||e.id!=t){a.rule=e,s.setSessionCookie("pubble_trigger",e.id);var r=i.config.parameters.activeUsers;if(r.length>0){var l=r.length;if(l==1)a.triggerUser=r[0];else{var c=l,h=1,p=Math.floor(Math.random()*(c-h+1))+h;a.triggerUser=r[p-1]}a.triggerUser||(a.triggerUser=i.config.parameters.communityBot)}else a.triggerUser=i.config.parameters.communityBot;var d=a.$el.find(".pubble-cw-chat-list");setTimeout(function(){var t=new n,r=(new Date).getTime();t.set("alias",a.triggerUser.alias),t.set("postID","10000");if(a.triggerUser.avatar==null||a.triggerUser.avatar=="")a.triggerUser.avatar="https://media.pubble.io/pubble-avatars/?name="+a.triggerUser.alias+"&amp;size=30";var i=f(".pubble-cw-contactbot");s.addClass(i,"pubble-cw-isautotrigmsg"),i.removeClass("pubble-cw-ismantrigmsg"),s.addClass(f(".pubble-cw-contactbot"),"pubble-cw-isautotrigmsg"),t.set("avatar",a.triggerUser.avatar),t.set("time",s.getTime()),t.set("content",e.text);var l=new o({model:t});a.triggerModel=t;var c=l.render().$el,h=a.$el.find(".pubble-sb-bubble");c.on("click",function(t){t.stopPropagation(),a.$el.find("#pb_sidebar").trigger("click"),a.triggerClick=1,a.$el.find(".pubble-cw-btn-newquestion-btn").trigger("click"),a.conversationCollection||(a.conversationCollection=new cps);var i=new n;i.set("avatar",a.triggerUser.avatar),i.set("alias",a.triggerUser.alias),i.set("replied",0),i.set("content",e.text),i.set("type","TT"),i.set("timediff",s.timediff(r)),i.set("conversationId","-1000"),a.conversationCollection.add(i),a.updateQuestionCount();var o=new u({model:i}),f=o.render().$el;f.find(".pubble-cw-notme").remove(),s.addClass(f,"pubble-trigger-chat"),d.prepend(f),f.trigger("click")});var h=a.$el.find(".pubble-sb-bubble");s.addClass(c,"pubble-cw-isadmin  pubble-cw-isfirst"),s.addClass(c,"pubble-cw-panel-dialog-item-justin");var p=(new Date).getTime();c.attr("timestamp",p),h.find(".pubble-sb-bubble-item-one").html(c),a.$el.find(".pubble-cw-panel").hasClass("pubble-move")&&a.aSound.play(),h.removeClass("pubble-off").removeClass("pubble-move")},e.delay*1e3)}}}),a.vent.bind("pubble:init:messenger",function(e){if(typeof window.ga!="undefined"&&typeof window.ga.getAll!="undefined"&&typeof window.ga.getAll()!="undefined"){var t=window.ga.getAll()[0].get("name");window.ga(t+".send","event",{eventCategory:i.config.eventCategory,eventAction:"initiate",eventLabel:"app_"+i.config.appID})}}),a.vent.bind("pubble:question:asked",function(e){if(typeof window.ga!="undefined"&&typeof window.ga.getAll!="undefined"&&typeof window.ga.getAll()!="undefined"){var t=window.ga.getAll()[0].get("name");window.ga(t+".send","event",{eventCategory:i.config.eventCategory,eventAction:"send",eventLabel:"app_"+i.config.appID})}}),a.vent.bind("pubble:messenger:contact",function(e){if(typeof window.ga!="undefined"&&typeof window.ga.getAll!="undefined"&&typeof window.ga.getAll()!="undefined"){var t=window.ga.getAll()[0].get("name");window.ga(t+".send","event",{eventCategory:i.config.eventCategory,eventAction:"contact",eventLabel:"app_"+i.config.appID})}}),a.vent.bind("pubble:messenger:modreply",function(e){if(typeof window.ga!="undefined"&&typeof window.ga.getAll!="undefined"&&typeof window.ga.getAll()!="undefined"){var t=window.ga.getAll()[0].get("name");window.ga(t+".send","event",{eventCategory:i.config.eventCategory,eventAction:"admin-reply",eventLabel:"app_"+i.config.appID})}})};return c}),pubblebot.define("liveModule",["backbone","underscore","models/post","converters/converter","utils/appConfig","utils/utils","views/conversation","views/post","views/attachment","models/attachment","views/contactCard"],function(e,t,n,r,i,s,o,u,a,f,l){var c=window.jQueryPBm,h=window.$pubbBackbone.noConflict(),p=function(e){var t=e.initialData||[],o={};o.app=e.app||{};var h=o.app;h.vent.bind("pubble:faq:atts",function(e,t){var n=e.get("attachments");n&&n.length>0&&c.each(n,function(e,n){if(n.get("attType")!="link"&&n.get("attType")!="tweet"){var r=new a({model:n}),i=r.render().$el;t.find(".pubble-att-container").removeClass("pubble-off").append(i)}})}),h.vent.bind("app:freechat",function(e){var t=c(".pubble-sb-bubble");t.removeClass("pubble-off"),t.removeAttr("timestamp");var r=new n;r.set("content",e.mbody),r.set("conversationId","0"),r.set("avatar",e.operator_avatar),r.set("alias",e.operator_name),r.set("time",(new Date).getTime()),r.set("posted",1),r.set("read",0);var o=c(".pubble-cw-panel");if(!o.hasClass("pubble-move"))return!1;var a=new u({model:r});h.targetAccountId=e.operator_id;var f=a.render().$el,l=h.$el.find(".pubble-sb-bubble");s.addClass(f,"pubble-cw-isadmin pubble-cw-isfirst"),s.addClass(f,"pubble-cw-panel-dialog-item-justin");var p=c(".pubble-cw-contactbot");s.addClass(p,"pubble-cw-ismantrigmsg"),p.removeClass("pubble-cw-isautotrigmsg");var d=(new Date).getTime();f.attr("timestamp",d),l.find(".pubble-sb-bubble-item-one").html(f),h.aSound.play(),l.removeClass("pubble-off").removeClass("pubble-move"),l.off("click").on("click",function(){i.pushAccepted=1,i.invitation&&(i.invitation.pushed=1,i.invitation.accepted=1),s.addClass(t,"pubble-off"),setTimeout(function(){c(".pubble-cw-startnew").first().trigger("click")},500),setTimeout(function(){var t=c('<div id="PBMSG-1200" class="pubble-cw-panel-dialog-item pubble-cw-isadmin pubble-cw-ismod-1 pubble-cw-isfirst"><div class="pubble-cw-dialog-item-avatar"><img src="'+e.operator_avatar+'"></div><div class="pubble-cw-dialog-item-header"><div class="pubble-cw-dialog-item-name">'+e.operator_name+'</div></div> <div class="pubble-cw-dialog-item-content"><div class="pubble-cw-dialog-item-middle"><div class="pubble-cw-dialog-item-text"> '+e.mbody+'</div><div class="pubble-cw-att-container pubble-off"></div></div><div class="pubble-cw-dialog-item-footer"><div class="pubble-cw-dialog-item-time"></div><div class="pubble-cw-dialog-item-ticks"><div class="pubble-cw-dialog-item-tick pubble-cw-tick-pending"></div><div class="pubble-cw-dialog-item-tick  pubble-cw-tick-server-off pubble-cw-tick-server"></div><div class="pubble-cw-dialog-item-tick   pubble-cw-tick-mod-off pubble-off  pubble-cw-tick-mod"></div></div></div></div></div>');c(".pubble-cw-panel-dialog").prepend(t)},1e3)})}),h.vent.bind("init:presence",function(e){var t=!1,p="//www.pubble.io/pusher/auth",d="fe878010389c9267d028";typeof pubbleLoader!="undefined"&&pubbleLoader.servers.mainDomain&&pubbleLoader.servers.mainDomain=="chatify"&&(p="//www.chatify.com/pusher/auth"),t&&(d="b35fd5876f2f57f584c0",p="http://www.pubblebot.com/pusher/auth"),h.pusher||(Pusher.log=function(e){},h.pusher=new Pusher(d,{authTransport:"jsonp",auth:{params:{communityId:i.config.communityId,page:s.getFilterLandingPage()}},authEndpoint:p}));if(!h.presence_inited){h.presence_inited=1;var v="presence-community_"+i.config.communityId;h.presenceCommunityChannel=h.pusher.subscribe(v),h.presenceCommunityChannel.bind("pusher:subscription_succeeded",function(e){h.pusherConnected=!0}),h.presenceCommunityChannel.bind("pusher:member_added",function(e){}),h.presenceCommunityChannel.bind("pusher:member_removed",function(e){})}c.each(h.conversationCollection.models,function(e,t){if(s.contains(h.converstationInited,t.get("conversationId")))return!0;h.converstationInited.push(t.get("conversationId"));var p="conversation_"+t.get("conversationId"),d="presence-conversation_"+t.get("conversationId");h.conversationChannel=h.pusher.subscribe(p),h.presenceConversation=h.pusher.subscribe(d),h.conversationChannel.bind("pusher:subscription_succeeded",function(e){h.converstationSubscribedInited.push(t.get("conversationId"))}),h.conversationChannel.bind("update",function(e){typeof e=="string"&&(e=r.stringToJson(e));if(e.conversationId!=h.conversationId)return!1;if(e.type=="F"||e.type=="O"||e.type=="B"||e.type=="S")return!1;var t=new n;t=r.setPost(t,e),h.$el.find("#PBMSG"+t.get("id")).find(".pubble-cw-dialog-item-text").html(t.get("content"));if(e.type!=="Q")return!1;e.status==30||e.status==0?(h.resolveUI(),h.closeConversation=1):(h.$el.find(".pubble-cw-chatbox").removeClass("pubble-off"),s.addClass(c(".pubble-cw-endconv"),"pubble-off"),h.closeConversation=0,h.talked=0,h.stage=="free"||h.ui=="default"?h.showInput():(h.ui=="iscredentials"&&c(".pubble-cw-input-iscredentials").removeClass("pubble-off"),h.ui=="faqhelp"&&c(".pubble-cw-input-faqhelp").removeClass("pubble-off"),h.ui=="anythingelse"&&c(".pubble-cw-input-anythingelse").removeClass("pubble-off"))),e.read&&(h.hasRead=1,h.updateRead())}),h.conversationChannel.bind("post",function(e){typeof e=="string"&&(e=r.stringToJson(e));if(e.type=="O"||e.type=="B")return!1;h.latestConversation=e.conversationId;if(e.type=="C"||e.type=="A"){if(!e.visitor&&e.author&&e.author.id==i.config.parameters.communityBot.id){if(e.type=="C"&&e.content&&e.content.indexOf("How do you want to be notified?")>-1){var p=c(".pubble-cw-isContactMsg");if(p.length>0)return!1}if(i.config.parameters.postAsCommunity&&e.type=="C"&&e.content&&e.content.indexOf("has been assigned to your question")>-1)return!1}var d=new n;d=r.setPost(d,e),d.set("posted",1);var v=h.$el.find(".pubble-cw-input-presence"),g=d.get("author").id>0&&d.get("author").id==v.attr("user"),y=d.get("author").cookieId==v.attr("cookeId");(g||y)&&s.addClass(v,"pubble-hide");if(!d.get("visitor")){d.get("author").id!=i.config.parameters.communityBot.id&&(h.contactDelayed=1,h.conversationMods.includes(d.get("author").alias)?h.vent.trigger("app:conversation:mods",1):(h.conversationMods.push(d.get("author").alias),h.vent.trigger("app:conversation:mods",1)));try{window.self!==window.top&&window.parent&&e.type=="C"&&window.parent.callNotif(d.get("author").alias,e.author.avatar,d.get("author").id,d.get("content"),d.get("conversationId"))}catch(b){console.log(b)}c(document).trigger("app:desktop:send",[d.get("author").alias+": "+d.get("content").replaceAll("<.*?>","")],function(){},t.get("appId")),h.$el.find(".pubble-cw-isadmin").length==0&&i.config.parameters.communityBot.id!=d.get("author").id&&h.vent.trigger("pubble:messenger:modreply",h.conversationId)}h.conversationCollection&&h.conversationCollection.models&&c.each(h.conversationCollection.models,function(t,o){if(o.get("conversationId")==e.conversationId){var u=new n;u=r.setPost(u,e);var a=h.$el.find(".pubble-cw-panel-notif-container");a.on("click",function(){a.removeClass("pubble-show"),s.addClass(a,"pubble-hide"),o.set("read",1),h.loadConversation(e.conversationId,h.appId,0)}),s.addClass(a,"pubble-show"),h.$el.find(".pubble-cw-panel-notif-author").html(u.get("alias")),h.$el.find(".pubble-cw-panel-notif-message").html(u.get("content")),setTimeout(function(){a.removeClass("pubble-show"),s.addClass(a,"pubble-hide")},3e7),e.conversationId!=h.conversationId&&(o.set("read",0),s.addClass(h.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-newactivity"));if((u.get("type")=="C"||u.get("type")=="A")&&i.config.parameters.communityBot.id!=u.get("author").id){var f=!1;u.get("visitor")||(f=!0);var l=c(".pubble-cw-chat-container");if(!l.hasClass("pubble-hide")&&!u.get("visitor")&&c(".pubble-cw-input-default").hasClass("pubble-off")){var p=h.$el.find(".pubble-cw-input-iscredentials");!p.hasClass("pubble-off")&&p.find(".pubble-cw-input-buttonbar-sms").hasClass("pubble-off")&&p.find(".pubble-cw-input-buttonbar-email").hasClass("pubble-off")&&(h.stage="free",h.resetBottom(),h.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off"))}o.set("moderator_reply",f),o.set("reply_content",u.get("content"));var d=h.$el.find(".pubble-cw-chat-last");o.set("isModReply",!u.get("visitor")),u.get("visitor")?(s.addClass(d,"pubble-cw-chat-last-isvisitor"),d.removeClass("pubble-cw-chat-last-ismod")):(s.addClass(d,"pubble-cw-chat-last-ismod"),d.removeClass("pubble-cw-chat-last-isvisitor"),o.set("avatar",u.get("avatar")),o.set("alias",u.get("alias")))}}})}var w=1,b=c(".pubble-cw-panel"),E=h.$el.find(".pubble-sb-notif"),d=new n;d=r.setPost(d,e),d.set("posted",1),(e.type=="C"||e.type=="A")&&e.author&&i.config.parameters.communityBot.id!=e.author.id&&(b.hasClass("pubble-move")?(h.newcount=h.newcount+1,E.find(".pubble-sb-notif-nr").html(h.newcount),h.vent.trigger("app:trigger:msg",d,!0),e.conversationId!=h.conversationId?(E.find(".pubble-sb-notif-nr").html(h.newcount),E.removeClass("pubble-off")):s.addClass(E,"pubble-off")):(h.newcount=0,E.find(".pubble-sb-notif-nr").html(0),s.addClass(E,"pubble-off")));if(e.conversationId!=h.conversationId)return!1;if(d.get("type")=="S")return!1;d.get("read")&&(h.updateRead(),h.hasRead=1);var S=0;d.get("type")!=="Q"&&(h.credential=h.credential+1),d.get("author").id!=0&&d.get("type")!="Q"&&d.get("author").id!=i.config.parameters.communityBot.id&&(d.get("visitor")||(S=1));if(d.get("content").indexOf("case it takes a while to reply")!=-1)return!1;if(d.get("content").indexOf("(Optional: so that we can send you a link to this conversation)")!==-1)return!1;S&&(h.waitingStopped||c(".pubble-cw-dialog-item-waiting-ico-fake").parent().parent().parent().remove(),h.adminChat=!0,h.adminFirst=d.get("author").alias,h.onlineUser(d.get("author").alias),h.currentTyping==d.get("author").id&&(h.currentTyping=-1,s.addClass(h.$el.find(".pubble-cw-input-presence"),"pubble-hide"),h.$el.find(".pubble-cw-top-status").html("online")));if(c(".pubble-cw-panel-dialog").find("#PBMSG"+e.id).length>0)return!1;var x=c(".pubble-cw-panel-dialog").find("#PBMSG"+e.tempId);if(x.length>0){var T=e.visitor,N=new u({model:d}),C=N.render().$el;T?(s.addClass(C,"pubble-cw-isvisitor"),C.removeClass("pubble-cw-isadmin")):(s.addClass(C,"pubble-cw-isadmin"),C.removeClass("pubble-cw-isvisitor"));if(d.get("type")!="Q"){var k=d.get("atts"),L=!1,A=e.author.id==i.config.parameters.communityBot.id;if(d.get("type")=="F"){var O={},M="";c.each(k,function(e,t){M+=t.get("targetId")+","});var _=/,$/gi;M=M.replace(_,"");var D={communityId:i.config.communityId,faqIds:M,contentType:"JSONP"},P=[];s.XDR(s.getEndpoints().loadFaqs,D,function(e){var t=e.data.data;t&&(c.each(t,function(e,t){var n=new f;n=r.setAtt(n,t),n.set("attType","faq"),P.push(n)}),k=P)},function(){},O),s.addClass(c(".pubble-cw-input-processing"),"pubble-off")}c.each(k,function(e,t){t.get("attType")=="photo"||t.get("attType")=="video"?s.addClass(C,"pubble-cw-panel-dialog-item-hasmedia"):(t.get("attType")=="file"||t.get("attType")=="file")&&s.addClass(C,"pubble-cw-panel-dialog-item-hasfile");var n=new a({model:t});t.get("attType")=="faq"&&(L=!0);var r=n.render().$el;t.get("attType")=="faq"&&h.vent.trigger("pubble:faq:atts",t,r);var i=C.find(".pubble-cw-att-container");if(t.get("attType")!="email"&&t.get("attType")!="phone")i.append(r),i.removeClass("pubble-off");else{t.get("attType")=="phone"&&s.addClass(C,"pubble-cw-contact-phone"),t.get("attType")=="email"&&s.addClass(C,"pubble-cw-contact-email");if(t.get("attType")=="skip"){s.addClass(C,"pubble-cw-contact-skip"),o.app.robotChat("You opted to skip being notified. You need to stay online to get a reply. If you want to be notified when you go offline, enter your email or phone number below.",function(){});var u=new l({app:o.app});p.html(u.render().$el)}var f=c('<div class="pubble-cw-dialog-item-contact"> <div class="pubble-cw-dialog-item-contact-mobile">Edit</div><div class="pubble-cw-dialog-item-contact-hover">Click to edit</div> </div>');C.prepend(f),C.on("click",function(){t.get("attType")=="email"&&c(".pubble-cw-notif-email").trigger("click"),t.get("attType")=="phone"&&c(".pubble-cw-notif-sms").trigger("click")})}}),L&&A&&(s.addClass(C,"pubble-cw-panel-dialog-item-isfaq"),h.hideInput(),c(".pubble-cw-input-faqhelp").removeClass("pubble-off"),s.mixlog("cw-questions-faq-prompted",{landingPage:i.config.pageURL,communityId:i.config.communityId,appId:i.config.appID,conversationId:h.conversationId},h.track)),d.get("type")=="F"&&!L&&(w=0,h.showInput(),h.nocontact())}h.onlines&&h.onlines.length>0&&(C.find(".pubble-cw-tick-mod").removeClass("pubble-cw-tick-mod-off"),s.addClass(C.find(".pubble-cw-tick-mod"),"pubble-cw-tick-mod-on"),C.find(".pubble-cw-tick-server").removeClass("pubble-cw-tick-server-off"),s.addClass(C.find(".pubble-cw-tick-server"),"pubble-cw-tick-server-on"),C.find(".pubble-cw-dialog-item-status").html("Seen"));var H=c(".pubble-cw-panel-dialog-item").last().prev(),B=10086;d.get("visitor")||(B=d.get("author").id+10086);var j=c("#PBMSG"+d.get("tempId"));return j.length>0?(j.hasClass("pubble-cw-islast")&&s.addClass(C,"pubble-cw-islast"),j.hasClass("pubble-cw-isfirst")&&s.addClass(C,"pubble-cw-isfirst"),C.attr("data",B)):(H.length>0&&H.attr("data")==B?s.addClass(C,"pubble-cw-islast"):(s.addClass(C,"pubble-cw-isfirst"),s.addClass(C,"pubble-cw-islast")),C.attr("data",B)),C.find(".pubble-cw-tick-server").removeClass("pubble-cw-tick-server-off"),s.addClass(C.find(".pubble-cw-tick-server"),"pubble-cw-tick-server-on"),C.parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html("Not seen yet"),x.replaceWith(C),C.hasClass("pubble-cw-islast")&&B==C.prev().attr("data")&&C.prev().removeClass("pubble-cw-islast"),!1}var F=new u({model:d}),I=F.render().$el;h.onlines&&h.onlines.length>0&&(I.find(".pubble-cw-tick-mod").removeClass("pubble-cw-tick-mod-off"),s.addClass(I.find(".pubble-cw-tick-mod"),"pubble-cw-tick-mod-on"),I.find(".pubble-cw-tick-server").removeClass("pubble-cw-tick-server-off"),s.addClass(I.find(".pubble-cw-tick-server"),"pubble-cw-tick-server-on"),I.find(".pubble-cw-dialog-item-status").html("Seen"));if(e.author.id==0||e.visitor)s.addClass(I,"pubble-cw-isvisitor"),I.removeClass("pubble-cw-isadmin");else if(e.author.id==i.config.parameters.communityBot.id)s.addClass(I,"pubble-cw-isbot"),I.removeClass("pubble-cw-isadmin"),h.vent.trigger("app:trigger:msg",d,!0);else{var q=s.getConversationID(),R=s.getAppIdFromUrl();s.addClass(I,"pubble-cw-isadmin"),I.removeClass("pubble-cw-isvisitor"),h.nodelay=1;var U=e.author.id+"",z=U.charAt(q.authorid-1),W=Math.ceil(z/2)+1;e.visitor||s.addClass(I,"pubble-cw-ismod-"+W);var E=c(".pubble-sb-notif");E.find(".pubble-sb-notif-nr").html(0),s.addClass(E,"pubble-off"),h.vent.trigger("app:trigger:msg",d,!0)}var k=d.get("atts"),L=!1;if(d.get("type")=="F"){var O={},M="";c.each(k,function(e,t){M+=t.get("targetId")+","});var _=/,$/gi;M=M.replace(_,"");var D={communityId:i.config.communityId,faqIds:M,contentType:"JSONP"},P=[];s.XDR(s.getEndpoints().loadFaqs,D,function(e){if(typeof window.ga!="undefined"&&typeof window.ga.getAll!="undefined"&&typeof window.ga.getAll()!="undefined"){var t=window.ga.getAll()[0].get("name");window.ga(t+".send","event",{eventCategory:i.config.eventCategory,eventAction:"faq-prompted",eventLabel:"app_"+i.config.appID})}var n=e.data.data;n&&(c.each(n,function(e,t){var n=new f;n=r.setAtt(n,t),n.set("attType","faq"),I.find("#pb-faq-"+t.id).html(n.get("answer"))}),k=P)},function(){},O),s.addClass(c(".pubble-cw-input-processing"),"pubble-off")}var A=e.author.id==i.config.parameters.communityBot.id;k&&(c.each(k,function(e,t){if(t.get("type")=="link"||t.get("type")=="tweet")return!0;var n=new a({model:t}),r=n.render().$el;t.get("attType")=="faq"&&h.vent.trigger("pubble:faq:atts",t,r),t.get("attType")=="faq"&&(L=!0,s.mixlog("cw-faq-prompted",{landingPage:i.config.pageURL,communityId:i.config.communityId,appId:i.config.appID,conversationId:h.conversationId,faqId:t.get("targetId")},h.track));var o=I.find(".pubble-cw-att-container");t.get("attType")=="photo"||t.get("attType")=="video"?s.addClass(I,"pubble-cw-panel-dialog-item-hasmedia"):(t.get("attType")=="file"||t.get("attType")=="file")&&s.addClass(I,"pubble-cw-panel-dialog-item-hasfile");if(t.get("attType")!="email"&&t.get("attType")!="phone"&&t.get("attType")!="skip")o.append(r),o.removeClass("pubble-off");else{t.get("attType")=="phone"&&s.addClass(I,"pubble-cw-contact-phone"),t.get("attType")=="email"&&s.addClass(I,"pubble-cw-contact-email"),t.get("attType")=="skip"&&s.addClass(I,"pubble-cw-contact-skip");var u=c('<div class="pubble-cw-dialog-item-contact"> <div class="pubble-cw-dialog-item-contact-mobile">Edit</div><div class="pubble-cw-dialog-item-contact-hover">Click to edit</div> </div>');I.prepend(u)}}),L&&A&&(s.addClass(I,"pubble-cw-panel-dialog-item-isfaq"),h.hideInput(),c(".pubble-cw-input-faqhelp").removeClass("pubble-off"),s.mixlog("cw-questions-faq-prompted",{landingPage:i.config.pageURL,communityId:i.config.communityId,appId:i.config.appID,conversationId:h.conversationId},h.track))),d.get("type")=="F"&&!L&&(w=0,h.showChatbox(),h.nocontact());if(w){var X=10086;d.get("visitor")||(X=d.get("author").id+10086);var H=c(".pubble-cw-panel-dialog-item").last();H.length>0&&H.attr("data")==X?s.addClass(I,"pubble-cw-islast"):(s.addClass(I,"pubble-cw-isfirst"),s.addClass(I,"pubble-cw-islast")),I.attr("data",X),s.addClass(I,"pubble-cw-panel-dialog-item-justin");var V=(new Date).getTime();I.attr("timestamp",V),h.dialogContainer.append(I),I.hasClass("pubble-cw-islast")&&X==I.prev().attr("data")&&I.prev().removeClass("pubble-cw-islast"),h.scrollToBottom()}}),h.conversationChannel.bind("replying",function(e){typeof e=="string"&&(e=r.stringToJson(e));if(e.conversationId!=h.conversationId)return!1;if(e.author.id!=0){if(e.author.id!==h.author.id&&e.author.cookieId!==h.author.cookieId){var t=0;for(var n=0;n<h.enters.length;n++)h.enters[n]==h.author.alias&&(t=!0);t||(h.enters.push(h.author.alias),h.joined=!0,h.notified=!0,c(".pubble-cw-dialog-item-waiting-ico").parents(".pubble-cw-isbot").remove())}h.currentTyping=e.author.id;var o=h.$el.find(".pubble-cw-input-presence");if(e.author.id!==h.author.id&&e.author.cookieId!==h.author.cookieId)if(!h.$el.find("pubble-cw-input-default").hasClass("pubble-off")){var u=s.handleImg(e.author.avatar,e.author.alias,"40"),a=e.author.alias;i.config.parameters.postAsCommunity&&e.moderator&&(u=s.handleCommunityAvtar(i.config.parameters.community),a=i.config.communityName),o.removeClass("pubble-hide");var n="<img src='"+u+"'>";o.find(".pubble-cw-input-presence-avatar").html(n),o.find(".pubble-cw-input-presence-username").html(a),o.attr("timestamp",(new Date).getTime()).attr("user",e.author.id).attr("cookieId",e.author.cookieId)}else o.attr("timestamp",(new Date).getTime());else o.attr("timestamp",(new Date).getTime())}})}),h.inited=!0})};return p}),pubblebot.define("views/app",["backbone","underscore","text!templates/app.tpl","utils/utils","views/post","models/post","converters/converter","views/attachment","utils/tel","models/attachment","utils/uploader","utils/appConfig","views/conversation","collections/posts","views/form","models/form","eventModule","liveModule","views/contactCard","utils/sizedecoder","utils/storage"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){window.pbrpc_polling=function(e,t,n){if(e.config.parameters.community.shortName!="pubble" &&  e.config.parameters.community.shortName!="teamwork")return!1;var i=window.location.href;if(i.indexOf("/dashboard/contact#myenquiry")>-1)return!1;if(i.indexOf("pubble.io/ask")>-1)return!1;if(i.indexOf("chatify.com/ask")>-1)return!1;if(e.isPolling)return!1;var s={contentType:"JSONP"},o={};if(e.config.user==null)return!1;var u="https://livedash.pubble.io/polling/"+c.config.communityId+"/"+e.config.user.cookieId+"/",a=e.config;o.community_name=a.communityName,o.community_id=a.communityId,o.page_name=document.title,o.appId=a.appID,o.avatar=r.handleImg(a.user.avatar,a.user.displayName,"48"),o.alias=a.user.displayName,o.userId=a.user.uid,o.cookieId=a.user.cookieId,o.isLogged=a.user!==null&&a.user.uid>0;var f=a.pageURL;try{f=window.location.href!=window.parent.location.href?window.parent.location.href:a.pageURL}catch(l){}o.page_url=f,e.conversationId&&e.conversationId!=""&&e.conversationId!="0"?o.conversationId=e.conversationId:o.conversationId=0,e.questionId&&e.questionId!=""&&e.questionId!="0"?o.questionId=e.questionId:o.questionId=0,E(".pubble-cw-panel").hasClass("pubble-move")&&(o.conversationId=0,o.questionId=0),e.invitation&&(o.invitation=e.invitation),e.livedas_url_logged?o.url_logged=1:o.url_logged=0;var h=(new Date).getTime();o.onPageTime=h-e.init_Time,o.onSitetime=h-e.config.parameters.sessionStartTime,o.invitePushed=e.invitePushed,e.pushAccepted!=undefined?o.pushAccepted=e.pushAccepted:o.pushAccepted=0,o.userIp=n;var p=JSON.stringify(o);p=LZString.compressToBase64(p),s.data=p,e.isPolling=1,r.XDR(u,s,function(n){e.isPolling=0,n.data.livepush=1,e.livedas_url_logged=1,n.data!=null&&n.data!="null"&&(!n.data.pushed&&!n.data.accepted?(n.data.isInvite=1,t.trigger("app:freechat",n.data),e.invitePushed=1,e.pushAccepted=0,e.invitation=n.data):(e.invitePushed=1,e.invitation&&(e.invitation.pushed=1)))})};var E=window.jQueryPBm,S=window.$pubbBackbone.noConflict(),x=S.View.extend({template:function(e){return $UScore.template(n)(e.toJSON())},initialize:function(){$UScore.bindAll(this,"resolveUI","nocontact","seq","thanks","onlineUser","faqExpand","updateLastSeen","updateHeader","faq","handlePrompt","renderConversation","render","startup","robotChat","askName","askEmail","postComment","loadConversation","shiftView","newqstate","resetBubble","updateQuestionCount","hideInput","showInput","showChatbox","processing","resolveQuestion","officeHour","setDefaultCountry"),this.model.view=this},resolve:function(){this.reloaded||(this.hideInput(),E(".pubble-cw-input-anythingelse").removeClass("pubble-off"),r.addClass(E(".pubble-cw-input-faqhelp"),"pubble-off"))},hideInput:function(){r.addClass(E(".pubble-cw-input-default"),"pubble-off"),r.addClass(E(".pubble-cw-input-actions"),"pubble-off")},showInput:function(){E(".pubble-cw-input-default").removeClass("pubble-off"),E(".pubble-cw-input-actions").removeClass("pubble-off"),r.addClass(E(".pubble-cw-input-processing"),"pubble-off")},resetBottom:function(){E(".pubble-cw-input-textarea").val(""),r.addClass(E(".pubble-cw-input-textarea-send"),"pubble-cw-input-textarea-send-disabled");var e=E(".pubble-cw-input-default");e.removeClass("pubble-off");var t=E(".pubble-cw-input-actions");t.removeClass("pubble-off");var n=E(".pubble-cw-endconv");r.addClass(n,"pubble-off");var i=E(".pubble-cw-input-iscredentials");r.addClass(i,"pubble-off");var i=E(".pubble-cw-input-iscredentials");r.addClass(i,"pubble-off"),i=E(".pubble-cw-input-buttonbar-sms"),r.addClass(i,"pubble-off"),i=E(".pubble-cw-input-buttonbar-email"),r.addClass(i,"pubble-off"),E(".pubble-cw-chatbox").removeClass("pubble-gdpr-request");var s=E(".pubble-cw-input-processing");r.addClass(s,"pubble-off");var o=E(".pubble-cw-input-faqhelp");r.addClass(o,"pubble-off"),o=E(".pubble-cw-input-anythingelse"),r.addClass(o,"pubble-off");var i=E(".pubble-cw-input-pubble-cw-input-anythingelse");r.addClass(i,"pubble-off")},seq:function(e){var t=this,n={};n.conversationId=t.conversationId,n.appId=c.config.appID,n.code=e,n.contentType="JSONp",r.XDR(r.getEndpoints().seq,n,function(e){})},resetBubble:function(){var e=this.$el.find(".pubble-sb-avatar"),t=this.$el.find(".pubble-sb-bubble-text"),n=this.$el.find(".pubble-sb-bubble");e.html(""),t.html(""),r.addClass(n,"pubble-move"),r.fixMobileBody(!1),r.addClass(e,"pubble-off")},scrollToBottom:function(){setTimeout(function(){var e=E(".pubble-cw-panel-middle");e.scrollTop(e.get(0).scrollHeight)},100)},updateQuestionCount:function(){var e=this,t=this.$el.find(".pubble-cw-panel-controls-newq-number");t.html(this.conversationCollection.length);var n=this.$el.find(".pubble-cw-panel-controls-newq");if(!this.$el.find(".pubble-cw-chat-container").hasClass("pubble-hide")){var i=r.getCookieValue("pb-ifnewPrompted"),s=r.getCookieValue("pb-iflistPrompted");this.conversationCollection.length==1&&i==null?r.setCookieValue("pb-ifnewPrompted",1):this.conversationCollection.length>1&&s==null&&(r.addClass(this.$el.find(".pubble-cw-panel-helptext-new"),"pubble-hide"),this.$el.find(".pubble-cw-panel-helptext-new").removeClass("pubble-show"),this.$el.find(".pubble-cw-panel-helptext-list").removeClass("pubble-hide"),r.addClass(e.$el.find(".pubble-cw-panel-helptext-list"),"pubble-show"),r.setCookieValue("pb-iflistPrompted",1),setTimeout(function(){e.$el.find(".pubble-cw-panel-helptext-list").removeClass("pubble-show"),r.addClass(e.$el.find(".pubble-cw-panel-helptext-list"),"pubble-hide")},7e3))}this.conversationCollection.length<1?(r.addClass(this.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-emptylist"),this.botlist.length>0&&r.addClass(this.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-channellist")):this.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-panel-controls-emptylist"),this.conversationCollection.length==1?(n.removeClass("pubble-cw-panel-controls-emptylist"),r.addClass(n,"pubble-cw-panel-controls-listofone")):this.conversationCollection.length>1?(t.removeClass("pubble-off"),n.removeClass("pubble-cw-panel-controls-emptylist"),n.removeClass("pubble-cw-panel-controls-listofone")):(r.addClass(t,"pubble-off"),r.addClass(n,"pubble-cw-panel-controls-emptylist"),n.removeClass("pubble-cw-panel-controls-listofone"),this.botlist.length>0&&r.addClass(n,"pubble-cw-panel-controls-channellist"))},officeHour:function(){var e=this;e.showOfficeHour=0;if(!c.config.parameters.operational)return e.$el.find(".pubble-cw-dialog-officehours").length>0?!1:e.officeHourShowed?!1:(e.officeHourShowed=!0,setTimeout(function(){e.$el.find(".pubble-cw-top-status-community").html("out of office hours").removeClass("pubble-off"),r.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off");if(e.conversationId=="")return!1;var t="It's out of office hours for us right now. <br/>Your message has been received. We will notify you as soon as we can reply. Thanks!",n=c.config.parameters.operatingSchedule.outsideOperatingHoursText;n!=null&&n!=""&&(t=n,t=r.handleURL(t));var o=E("<div></div>").html(t+'<div class="pubble-cw-dialog-officehours-container pubble-cw-expanded"><div class="pubble-cw-dialog-officehours-header">Office hours</div><div class="pubble-cw-dialog-officehours-servertime pubble-cw-expanded">'+c.config.parameters.operatingSchedule.timezone+'</div><ul class="pubble-cw-dialog-officehours-list"></ul></div>');c.config.parameters.operatingSchedule.operatingHours!=null?E.each(c.config.parameters.operatingSchedule.operatingHours,function(e,t){var n='<li class="pubble-cw-dialog-officehours-list-item"><div class="pubble-cw-dialog-officehours-day" style="padding-right:5px">'+e+' </div><div class="pubble-cw-dialog-officehours-hours">'+t+"</div></li>";o.find(".pubble-cw-dialog-officehours-list").append(n)}):o.find(".pubble-cw-dialog-officehours-container").remove(),e.scrollToBottom(),e.botTalked++;var u=new s;u.set("alias",c.config.parameters.communityBot.alias),u.set("postID","bot-"+this.botTalked),u.set("avatar",c.config.parameters.communityBot.avatar+"?72"),u.set("time",r.getTime()),u.set("content","");var a=new i({model:u}),f=a.render().$el;f.find(".pubble-cw-dialog-item-text").html("").append(o),r.addClass(e.$el.find(".pubble-cw-input-processing"),"pubble-off"),r.addClass(f,"pubble-cw-isbot"),f.removeClass("pubble-cw-isadmin"),r.addClass(f,"pubble-cw-panel-dialog-item-justin");var t=(new Date).getTime();f.attr("timestamp",t),E(".pubble-cw-panel-dialog").append(f),e.scrollToBottom()},2e3),!1)},nocontact:function(){var e=this;if(e.nocontacted)return!1;if(e.adminChat)return!1;e.stage!="freefaq"&&(e.nocontacted=!0),e.joined||(e.t1=setTimeout(function(){if(e.conversationId=="")return!1;e.robotChat("<div class='pubble-cw-dialog-item-waiting-ico pubble-cw-dialog-item-waiting-ico-fake'><div class='pubble-cw-dialog-item-waiting-ico-dot1'></div><div class='pubble-cw-dialog-item-waiting-ico-dot2'></div><div class='pubble-cw-dialog-item-waiting-ico-dot3'></div></div>",function(){}),e.waitingStopped=0},2e3));var t=4e4;c.config.parameters.operational||(t=1e3),e.timeout=setTimeout(function(){e.waitingStopped=1;if(e.adminChat)return E(".pubble-cw-dialog-item-waiting-ico-fake").parent().parent().parent().remove(),!1;if(e.notified)return E(".pubble-cw-dialog-item-waiting-ico-fake").parent().parent().parent().remove(),!1;e.notfied=!0;if(c.config.parameters.operational&&!e.joined){var t=c.config.user!=null&&c.config.user.uid>0;e.isOnline||e.onlines&&e.onlines.length>0?!e.emailProvied&&!e.telProvied&&!t?(e.seq("online.noreply.notify"),e.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off")):e.seq("online.noreply"):!e.emailProvied&&!e.telProvied&&!t?(e.seq("offline.notify.link"),e.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off")):e.seq("offline.notify.hascredentials")}!e.joined&&e.stage!="freefaq"&&(e.t2=setTimeout(function(){if(e.conversationId=="")return!1;e.officeHour()},1e3)),setTimeout(function(){E(".pubble-cw-dialog-item-waiting-ico-fake").parent().parent().parent().remove()},1e3)},t)},thanks:function(){return!1;var e,t},resolveUI:function(){E(".pubble-cw-endconv").removeClass("pubble-off");var e=this;E(".pubble-cw-input-default").hasClass("pubble-off")||(e.ui="default"),E(".pubble-cw-input-iscredentials").hasClass("pubble-off")||(e.ui="iscredentials"),E(".pubble-cw-input-faqhelp").hasClass("pubble-off")||(e.ui="faqhelp"),E(".pubble-cw-input-anythingelse").hasClass("pubble-off")||(e.ui="anythingelse"),this.hideInput(),r.addClass(E(".pubble-cw-input-iscredentials"),"pubble-off"),r.addClass(E(".pubble-cw-input-faqhelp"),"pubble-off"),r.addClass(E(".pubble-cw-input-anythingelse"),"pubble-off")},handleGDPR:function(e){if(!c.config.parameters.enableGdpr)return E(".pubble-gdpr-parent").removeClass("pubble-md-gdpr-off").removeClass("pubble-md-gdpr-on"),!1;var t=E(".pubble-gdpr-parent");E.each(t,function(e,t){E(t).removeClass("pubble-md-gdpr-off"),r.addClass(E(t),"pubble-md-gdpr-on");var n=E(t).find(".pubble-gdpr"),i=E(t).find(".pubble-gdpr-link");r.addClass(n,"pubble-hide"),i.removeClass("pubble-hide")}),e=="email"?E(".pubble-cw-panel-content").find(".pubble-cw-isemail").trigger("click"):E(".pubble-cw-panel-content").find(".pubble-cw-issms").trigger("click")},handleSMS:function(e){if(!e)return!1;var t=e.split("-");if(t.length==2){var n=E(".flag-dropdown");E.each(n,function(e,n){var i=E(n);E(".pubble-cw-mobile-number").val(t[1]);var s=i.find(".country"),o=t[0];if(o.length<2)return!1;var u=o.substring(1,o.length);E.each(s,function(e,t){var n=E(t);n.removeClass("highlight").removeClass("active");if(n.attr("data-dial-code")==u){r.addClass(n,"highlight"),r.addClass(n,"active");var i=n.parent().parent(),s=E(".selected-flag");return E.each(s,function(e,t){t=E(t),t.attr("title",n.find(".country-name").html()+": "+n.find(".dial-code").html()),t.find(".iti-flag").removeAttr("class").addClass("iti-flag").addClass(n.attr("data-country-code")),t.find(".iti-flag-pubble-nr").remove();var r=E("<div class='iti-flag-pubble-nr'>"+n.find(".dial-code").html()+"</div>");r.insertBefore(t.find(".arrow"))}),!1}})})}else{var i=E(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms");i.find(".pubble-cw-mobile-number").val(e)}},warning:function(e,t){r.mixlog("cw-warning",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t,content:e},1)},faqExpand:function(e){var t=this;r.mixlog("cw-faq-clicked",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.conversationId,faqId:e.get("targetId")},t.track);var n={conversationId:t.conversationId,contentType:"JSONP",faqId:e.get("targetId"),action:"expand"},i={};return r.XDR(r.getEndpoints().interaction,n,function(){},function(){},i),!1},resolveQuestion:function(e){r.addClass(E(".pubble-cw-att-choice"),"pubble-off");if(!this.reloaded){var t=this;r.mixlog("cw-faq-helpful",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.conversationId,faqId:e},t.track),r.mixlog("cw-faq-faq-resolved",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.conversationId,faqId:e,source:"specfic"},t.track);var n={conversationId:t.conversationId,contentType:"JSONP",faqId:e,action:"helpful"},i={};r.XDR(r.getEndpoints().interaction,n,function(){t.faqHelpful=!0},function(){},i),this.adminChat||!E(".pubble-cw-input-faqhelp").hasClass("pubble-off")?(r.addClass(E(".pubble-cw-input-faqhelp"),"pubble-off"),t.showChatbox()):(r.addClass(E(".pubble-cw-input-faqhelp"),"pubble-off"),t.hideInput(),E(".pubble-cw-input-anythingelse").removeClass("pubble-off")),this.anything||(t.hideInput(),E(".pubble-cw-input-anythingelse").removeClass("pubble-off"),r.addClass(E(".pubble-cw-input-faqhelp"),"pubble-off"))}},showChatbox:function(){this.showInput(),E(".pubble-cw-input-textarea").attr("placeholder","Message"),E(".pubble-cw-input-textarea-placeholder").html("Message").removeClass("pubble-off")},updateLastSeen:function(){var e=c.config.parameters.lastOnline,t=c.config.parameters.currentTime,n=t-e,i="";n<6e4?(i="Online",this.isOnline=!0):i="",this.updateStatus(i),this.$el.find(".pubble-cw-top-status-community").html(c.config.communityName),c.config.parameters.operational||r.addClass(this.$el.find(".pubble-cw-top-status-community"),"pubble-off")},onlineUser:function(e){var t=this;if(this.onlines&&this.onlines.length>0){var n=0;for(var i=0;i<this.onlines.length;i++)this.onlines[i]==e&&(n=1);n||(r.mixlog("cw-question-mod-interactions",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.conversationId,alias:e},t.track),this.onlines.push(e),this.updateHeader())}else r.mixlog("cw-question-mod-interactions",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.conversationId,alias:e},t.track),r.mixlog("cw-question-mod-interactions-unique",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.conversationId,alias:e},t.track),this.onlines.push(e),this.updateHeader()},updateHeader:function(){return!1;var e,t,n},updateStatus:function(e){c.config.parameters.operational?E(".pubble-cw-top-status").html(e):E(".pubble-cw-top-status").html("")},handlePrompt:function(){var e=this,t=E(".pubble-cw-getnotif");e.author.sms!=""&&e.author.sms!=undefined||!!r.isValidEmail(e.author.email)&&e.author.email.indexOf("anon@")===-1?(t.removeClass("pubble-cw-getnotif-on"),t.removeClass("pubble-off"),r.addClass(t,"pubble-cw-getnotif-off")):(t.removeClass("pubble-off"),E(".pubble-cw-getnotif-handle").removeClass("pubble-off"))},handleFaq:function(){var e='<div class="pubble-cw-att-choice"><div class="pubble-cw-att-choice-text">Any of this helped?</div><div class="pubble-cw-att-choice-buttons"><div class="pubble-cw-att-choice-button-yes"><div class="pubble-cw-att-choice-button-yes-ico"></div>Yes</div><div class="pubble-cw-att-choice-button-no"><div class="pubble-cw-att-choice-button-no-ico"></div>No </div></div></div>',t=E(e);return t.find(".pubble-cw-att-choice-button-yes").on("click",function(){t.slideUp()}),t.find(".pubble-cw-att-choice-button-no").on("click",function(){t.slideUp()}),t},newqstate:function(){E(".pubble-cw-panel-dialog").html("");var e=E(".pubble-cw-getnotif-handle"),t=c.config.user!=null&&c.config.user.uid>0&&c.config.user.type=="account";t||(r.addClass(e,"pubble-off"),e.removeClass("pubble-cw-getnotif-on")),E(".pubble-cw-input-textarea-placeholder").html("Ask your question here...");var n=E(".pubble-cw-input-textarea-send");n.html("Ask"),r.addClass(n,"pubble-cw-input-textarea-send-disabled"),E(".pubble-cw-input-textarea").attr("placeholder","Ask your question ...").val("")},renderConversation:function(e,t){var n=E(".pubble-cw-panel-dialog"),a=E(".pubble-cw-panel-middle"),f=this;f.talked=0,f.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),r.addClass(f.$el.find(".pubble-cw-endconv"),"pubble-off"),f.reloaded=!0;if(e.code==200){f.author=e.conversationRoot.author;var l=0,h=e.data.data;E.each(h,function(e,t){if(t.type=="G")return l=1,!0}),f.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off");var p=[];h&&h.reverse(),n.html("");if(e.conversationRoot&&e.conversationRoot.id!==0){var d=e.conversationRoot;window.location.href.indexOf("visitor=false")==-1&&d&&d.author&&d.author.type=="visitor"&&d.author.id&&(f.visitorId=d.author.id);var v={},m={};m.contentType="JSONP",m.conversationId=e.conversationRoot.conversationId,f.questionId=e.conversationRoot.count,c.conversationId=f.conversationId,c.questionId=f.questionId,r.XDR(r.getEndpoints().visitor,m,function(n){var i="visitor";n&&(i="mod"),r.mixlog("cw-question-reloaded",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationRoot.conversationId,source:i,otherPage:t},f.track)});var g=new s;g=o.setPost(g,e.conversationRoot),g.set("posted",1),f.conversationCollection.add(g),this.vent.trigger("init:presence",""),f.clientName=g.get("author").alias,f.content=g.get("content"),g.get("author").phone&&g.get("author").phone!=""&&(f.sms=g.get("author").phone,f.handleSMS(f.sms),f.handleGDPR("phone")),g.get("author").phone&&g.get("author").phone!=""&&(f.sms=g.get("author").phone,f.handleSMS(f.sms),f.handleGDPR("phone"));var y="";c.config.user!==null&&c.config.user.uid>0?y=c.config.user.displayName:y=g.get("author").alias,r.mixlog("cw-widget-loaded",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,domain:document.domain,conversationId:g.get("conversationId"),otherPage:t},f.track),l||f.robotChat("Please type your question below",function(){},"greeting");var g=new s;g=o.setPost(g,e.conversationRoot);var b=new i({model:g});g.set("posted",1),f.objectId=g.get("id");var w=b.render().$el,S={conversationId:g.get("conversationId"),contentType:"JSONP",action:"reload"};t&&(S.action="browse",S.landingPage=c.config.pageURL);if(!r.contains(f.visitedConversations,g.get("conversationId"))){f.visitedConversations.push(g.get("conversationId"));var v={};if(S.action=="reload"){var x=r.getPPBLINK();if(x=="E"||x=="S")S.linkType=x}r.XDR(r.getEndpoints().qinteraction,S,function(){},function(){},v)}var T=0;if(g.get("type")=="Q"){g.get("author").id>0&&(T=1);var N=window.location.href;if(N.indexOf("visitor=false")==-1&&N.indexOf("PPBPID=")>-1){var C=r.getPPBPID(),x=r.getPPBLINK(),k=r.getPPBUID();if(k&&k!=null&&k.length>0){var L={};L.cookieId=k,L.contentType="JSONP",r.XDR(r.getEndpoints().setCookie,L,function(e){})}if(C.trim().length>0){var L={};L.postId=C,L.contentType="JSONP",L.appId=c.config.appID;if(x=="E"||x=="S"||x=="K")L.linkType=x;r.XDR(r.getEndpoints().backvisit,L,function(e){})}}}if(g.get("type")=="Q"){r.addClass(w,"pubble-cw-isvisitor"),w.removeClass("pubble-cw-isadmin");var A=g.get("author").email;g.get("author").email=="anon@pubble.co"&&(A=""),A==""&&c.config.user.uid>0&&r.isAuthor(c,g.get("author"))&&(A=c.config.user.email),E(".pubble-cw-email-input").val(A),A!=""&&f.handleGDPR("email"),f.email=A}else g.get("author").id==c.config.parameters.communityBot.id&&g.get("type")!="G"?(r.addClass(w,"pubble-cw-isbot"),w.removeClass("pubble-cw-isadmin")):g.get("visitor")?(r.addClass(w,"pubble-cw-isvisitor"),w.removeClass("pubble-cw-isadmin")):(r.addClass(w,"pubble-cw-isadmin"),w.removeClass("pubble-cw-isvisitor"));E(".pubble-cw-notif-link").html(g.get("shortUrl")),g.get("type")=="Q"&&(!f.sms||f.sms=="")&&g.get("author").phone&&g.get("author").phone!=""&&(f.sms=g.get("author").phone,f.handleSMS(f.sms),f.handleGDPR("phone"));var O=E(".pubble-cw-getnotif");O.removeClass("pubble-off").removeClass("pubble-cw-getnotif-on"),r.addClass(O,"pubble-cw-getnotif-off"),f.conversationId=g.get("conversationId"),f.questionId=g.get("count"),c.conversationId=f.conversationId,c.questionId=f.questionId,f.vent.trigger("init:presence",f.conversationId),f.stage="free",f.botTalked=4;var M=E(".pubble-sb-bubble");c.config.user!==null&&c.config.user.uid>0&&c.config.user.type=="account"?f.clientName=c.config.user.displayName:f.clientName=g.get("author").alias,f.clicked=1;var _=E(".pubble-sb-bubble"),D=r.getCookieValue("pb-notiftimer");(g.get("status")=="20"||g.get("status")=="40")&&D==null&&D==null&&r.setShortCookie("pb-notiftimer","true"),n.append(w),g.get("type")=="Q"&&f.updateServer(),E(".pubble-cw-input-textarea-placeholder").html("Message"),E(".pubble-cw-input-textarea-send").html("Send");var P=!1,H=!1,B=!1;E.each(h,function(e,t){var a=1,l=new s;l=o.setPost(l,t),!l.get("visitor")&&l.get("author").id==c.config.parameters.communityBot.id&&c.config.parameters.postAsCommunity&&l.get("type")=="C"&&l.get("content")&&l.get("content").indexOf("has been assigned to your question")>-1&&l.set("content","An agent has been assigned to your question."),!l.get("visitor")&&l.get("author").id!=c.config.parameters.communityBot.id&&(B=!0,f.conversationMods.includes(l.get("author").alias)||(f.conversationMods.push(l.get("author").alias),f.vent.trigger("app:conversation:mods")));var h=new i({model:l});l.set("posted",1);var d=h.render().$el,v=l.get("atts");if(v&&v.length>0){var m=!1,g=d.find(".pubble-cw-att-container");E.each(v,function(e,t){if(t.get("type")=="link"||t.get("type")=="tweet")return!0;var n=new u({model:t}),i=n.render().$el;t.get("attType")=="faq"&&(m=!0,f.vent.trigger("pubble:faq:atts",t,i)),t.get("attType")=="photo"||t.get("attType")=="video"?r.addClass(d,"pubble-cw-panel-dialog-item-hasmedia"):(t.get("attType")=="file"||t.get("attType")=="file")&&r.addClass(d,"pubble-cw-panel-dialog-item-hasfile"),t.get("attType")!="email"&&t.get("attType")!="phone"&&t.get("attType")!="skip"?(g.append(i),g.removeClass("pubble-off")):(t.get("attType")=="phone"&&r.addClass(d,"pubble-cw-contact-phone"),t.get("attType")=="email"&&r.addClass(d,"pubble-cw-contact-email"),t.get("attType")=="skip"&&l.get("type")!="K")}),m&&r.addClass(d,"pubble-cw-panel-dialog-item-isfaq")}!m&&l.get("type")=="F"&&(a=0);if(l.get("type")=="Q")return!0;l.get("author").id==0||l.get("type")=="Q"||l.get("author").id==f.author.id&&l.get("visitor")?(r.addClass(d,"pubble-cw-isvisitor"),d.removeClass("pubble-cw-isadmin")):l.get("author").id==c.config.parameters.communityBot.id&&l.get("type")!="G"?(r.addClass(d,"pubble-cw-isbot"),d.removeClass("pubble-cw-isadmin")):l.get("visitor")?(r.addClass(d,"pubble-cw-isvisitor"),d.removeClass("pubble-cw-isadmin")):(r.addClass(d,"pubble-cw-isadmin"),d.removeClass("pubble-cw-isvisitor")),d.find(".pubble-cw-tick-server").removeClass("pubble-cw-tick-server-off"),r.addClass(d.find(".pubble-cw-tick-server"),"pubble-cw-tick-server-on"),d.parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html("Not seen yet"),P&&(H=!0);if(l.get("content").indexOf("case it takes a while to reply")>-1||l.get("content").indexOf("How do you want to be notified")>-1)E(".pubble-cw-isContactMsg").remove(),P=!0;if(a){var y=10086;l.get("visitor")||(y=l.get("author").id+10086);var b=E(".pubble-cw-panel-dialog-item").last();b.length>0&&b.attr("data")==y?r.addClass(d,"pubble-cw-islast"):(r.addClass(d,"pubble-cw-isfirst"),r.addClass(d,"pubble-cw-islast")),d.attr("data",y),l.get("type")=="G"?n.prepend(d):n.append(d),d.hasClass("pubble-cw-islast")&&y==d.prev().attr("data")&&d.prev().removeClass("pubble-cw-islast");if(l.get("author").id!=0&&l.get("type")!="Q"&&l.get("author").id!=f.author.id&&l.get("author").id!=c.config.parameters.communityBot.id)if(!l.get("visitor")||f.onlines&&f.onlines.length>0){var w=E(".pubble-cw-tick-mod");E.each(w,function(e,t){E(t).removeClass("pubble-cw-tick-mod-off"),r.addClass(E(t),"pubble-cw-tick-mod-on"),E(t).parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html("Seen")})}}l.get("author").id>0&&p.push(l.get("author").id)}),g.get("author")&&(g.get("author").id>0||g.get("author").email!=""&&g.get("author").email!="anon@pubble.co"||g.get("author").phone!="")&&(H=!0),!H&&!T&&!B&&(f.stage="contact",f.$el.find(".pubble-cw-input-iscredentials").removeClass("pubble-off"),f.hideInput()),f.vent.trigger("app:conversation:mods"),(!f.$el.find(".pubble-cw-panel").hasClass("pubble-move")||r.isMobile())&&f.scrollToBottom(),e.conversationRoot.status==30?(f.resolveUI(),f.closeConversation=1):r.addClass(f.$el.find(".pubble-cw-endconv"),"pubble-off"),E(".pubble-cw-chatbox").removeClass("pubble-off"),r.addClass(E(".pubble-cw-invalidq"),"pubble-off"),f.handlePrompt();var O=E(".pubble-cw-getnotif");O.removeClass("pubble-cw-getnotif-on"),r.addClass(O,"pubble-cw-getnotif-off")}else{var j=r.getRefer();r.mixlog("cw-fatal-error",{landingPage:c.config.pageURL,landingPage2:window.location.href,communityId:c.config.communityId,appId:c.config.appID,position:"2",conversationId:f.conversationId,referrer:j},f.track),f.robotChat("Ooops....something went wrong. Please click below to ask a new question",function(){}),r.addClass(E(".pubble-cw-chatbox"),"pubble-off")}}},greeting:function(e,t){e&&e.hasClass("pubble-cw-contact-username")&&(e=e.parent().find(".pubble-cw-contact-title")),e&&e.attr("data-name")!=undefined&&(t.$el.find(".pubble-cw-top-title").html(e.attr("data-name")),c.config.parameters.operational||r.addClass(t.$el.find(".pubble-cw-top-status-community"),"pubble-off"),r.addClass(t.$el.find(".pubble-cw-top-status"),"pubble-off"),setTimeout(function(){t.$el.find(".pubble-cw-istrigger").length==0&&(E(".pubble-cw-isgreeting").remove(),t.robotChat("Please type your question below",function(){},"greeting"))},1e3))},loadConversation:function(e,t,n,i){this.vent.trigger("app:conversation:mods",0),this.conversationMods=[],this.vent.trigger("app:conversation:mods",0);var s=this;E(document).trigger("app:desktop:permission"),this.showOfficeHour=1,this.officeHourShowed=0,this.$el.find(".pubble-cw-chatlist-loading").removeClass("pubble-off"),this.$el.find(".pubble-cw-panel-dialog").html("");var o=this.$el.find(".pubble-cw-top-status-community"),u=this.$el.find(".pubble-cw-top-status"),a=this.$el.find(".pubble-cw-top-title");a.removeClass("pubble-off").html(c.config.communityName),this.stage="free";var f={conversationId:e,contentType:"JSONP",postTypes:"Q,A,C,F,N,P,E,K,G",pageSize:500,appId:t,sort:"dateCreated"};i&&(delete f.conversationId,f.conversationToken=i);var s=this,l={};return r.XDR(r.getEndpoints().conversation,f,function(t){if(t.code=="404")return s.$el.find(".pubble-cw-btn-newquestion-btn2").first().trigger("click"),r.addClass(E(".pubble-cw-chatlist-loading"),"pubble-off"),!1;if(t.code=="414"||t.code=="413"){var i=s.$el.find(".pubble-cw-modal-expire");return i.removeClass("pubble-hide"),r.addClass(i,"pubble-show"),E(".pubble-cw-input-textarea").blur(),!1}r.addClass(E(".pubble-cw-chatlist-loading"),"pubble-off");var o=c.config.parameters.conversations;o.length==0&&s.conversationCollection&&s.conversationCollection.models.length>0&&(o=s.conversationCollection.models),o.length==0&&(s.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-panel-controls-emptylist"),r.addClass(s.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-listofone")),window.location.href.indexOf("visitor=false")==-1&&r.setCookieValue("pb-conversationId",e);if(t.code!="200"&&!t.conversationRoot)return!1;f.conversationId=t.conversationRoot.conversationId,r.XDR(r.getEndpoints().assignees,f,function(e){if(e.code=="200"){var t=e.data,n="";t!=null&&t.length>0&&(E.each(e.data,function(e,t){s.conversationMods.includes(t.name)||s.conversationMods.push(t.name)}),s.vent.trigger("app:conversation:mods",0));if(n!=""){n=n.trim();var r=/,$/gi;n=n.replace(r,"")}}}),s.renderConversation(t,n)},function(){},l),!1},processing:function(){this.adminChat?(r.mixlog("cw-faq-faq-nofaq-query-2",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:this.conversationId,content:this.content},this.track),this.showInput()):(E(".pubble-cw-input-processing").removeClass("pubble-off"),this.faq())},faq:function(e){var t=this;if(!t.content||t.content.indexOf("?")==-1||!c.config.parameters.promptFaq){var n="Has,Does,Do, wonder, Are, Am, Shall, May I，Might, Possible,Whom,Should,Would,Could,How,What,Why,Where,When,Do you,Can,I am looking,Is it,I need,Help, looking for",i=n.split(","),s=!1,o=t.content.toLowerCase();E.each(i,function(e,t){if(o.contains(t.toLowerCase().trim()))return s=!0,!1});if(!s||!c.config.parameters.promptFaq)return E(".pubble-cw-input-textarea-placeholder").html("Your message here"),t.showInput(),r.addClass(E(".pubble-cw-input-processing"),"pubble-off"),t.nocontact(),r.mixlog("cw-faq-faq-nofaq-query-1",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.conversationId,content:t.content,hasQuestionMark:t.content.indexOf("?")==-1},t.track),!1}t.faqChecked=1,r.mixlog("cw-faq-faq-faq-query",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.conversationId,content:t.content},t.track);var u={communityId:c.config.communityId,contentType:"JSONP",appId:c.config.appID,conversationId:t.conversationId,ignoreEmptyResult:!0,code:"faq"};e!=undefined&&(u.searchTerm=e);var a={};r.XDR(r.getEndpoints().faq,u,function(e){e.code=="400"&&(t.stage=="freefaq"&&t.nocontact(),t.stage="free",t.showInput())})},shiftView:function(e){var t=this.$el.find(".pubble-cw-chatlist-container"),n=this.$el.find(".pubble-cw-chat-container"),i=this.$el.find(".pubble-cw-contactlist-container"),s=this.$el.find(".pubble-cw-form-container"),o=this.$el.find(".pubble-cw-getnotif-handle"),u=this.$el.find(".pubble-cw-top-list"),a=this.$el.find(".pubble-cw-top-assign"),f=this.$el.find(".pubble-cw-top-conv");if(e=="userlist")r.addClass(i,"pubble-show"),i.removeClass("pubble-hide"),t.removeClass("pubble-show"),s.removeClass("pubble-show"),r.addClass(n,"pubble-hide"),r.addClass(s,"pubble-hide"),r.addClass(t,"pubble-hide"),r.addClass(o,"pubble-off"),r.addClass(u,"pubble-off"),r.addClass(f,"pubble-off"),a.removeClass("pubble-off");else if(e=="list")r.addClass(a,"pubble-off"),r.addClass(f,"pubble-off"),u.removeClass("pubble-off"),t.removeClass("pubble-hide"),i.removeClass("pubble-show"),r.addClass(n,"pubble-hide"),r.addClass(i,"pubble-hide"),r.addClass(t,"pubble-show"),s.removeClass("pubble-show"),r.addClass(s,"pubble-hide"),r.addClass(o,"pubble-off");else{r.addClass(a,"pubble-off"),r.addClass(u,"pubble-off"),f.removeClass("pubble-off"),this.$el.find(".pubble-cw-panel").removeClass("pubble-move"),r.fixMobileBody(!0);var l=this.$el.find(".pubble-cw-shadow");r.addClass(l,"pubble-show"),l.removeClass("pubble-hide");var c=this.$el.find(".pubble-sb-bubble");r.addClass(c,"pubble-hide");var h=this.$el.find("#pb_sidebar");r.addClass(h,"pubble-expanded"),s.removeClass("pubble-show"),r.addClass(s,"pubble-hide"),n.removeClass("pubble-hide"),i.removeClass("pubble-show"),t.removeClass("pubble-show"),r.addClass(t,"pubble-hide"),r.addClass(i,"pubble-hide");var p=this;setTimeout(function(){p.$el.find(".pubble-cw-input-textarea").val("").focus().trigger("click")},100),this.scrollToBottom()}},resetUI:function(e){var t=E(e.target);if(!r.isInside(t,".pubble-cw-input-textarea-emoji-list-container")&&!t.hasClass("pubble-cw-action-emoji")&&!t.hasClass("pubble-cw-input-textarea-emoji-list-container")){var n=E(".pubble-cw-input-textarea-emoji-list-container");n.removeClass("pubble-show"),r.addClass(n,"pubble-hide")}},render:function(){var e=this;e.pushClicked=0,c.config.contactFirst=!1,c.init_Time=(new Date).getTime();var t={};$UScore.extend(t,S.Events),this.vent=t,this.conversationMods=[],this.eventModule=new m({app:e}),this.liveModule=new g({app:e});var n=E("#pubble_app_"+c.config.appID);e.clientName=n.attr("data-user-name"),e.email=n.attr("data-user-email"),c.config.parameters.requestContact=="before"&&(c.config.contactFirst=!0),E(document).on("click",this.resetUI);var i={contentType:"JSONP"},u={};r.XDR(r.getEndpoints().getIp,i,function(t){var n={};t.code==200&&(n.ip=t.ip,t.data!=null&&(n=t.data,n.ip=t.ip),t.data.country&&(window.pubble_ip_country=t.data.country.toLowerCase(),(!e.sms||e.sms.length<3)&&e.setDefaultCountry(window.pubble_ip_country+""))),setInterval(function(){window.pbrpc_polling(c,e.vent,n)},1e4)});if(!c.config.parameters.active)return!1;var e=this,a=document.createElement("audio");a.setAttribute("id","pqpmsg-beep"),a.setAttribute("src",c.servers.cdnDomain+"/pubblebot/beep.mp3"),e.aSound=a,ht=r.getFilterLandingPage(),c.config.pageURL=ht;var n=E("#pubble_app_"+c.config.appID);n.attr("data-landingpage")!=null&&(c.config.pageURL=n.attr("data-landingpage"),ht=c.config.pageURL),c.config.visitorId&&(e.visitorId=c.config.visitorId),e.ui="",e.anything=!1,this.joined=!1,this.newcount=0,this.reloaded=!1,e.conversationId="",e.questionId=0,c.conversationId="",c.questionId="",e.presence_inited=0,e.latestConversation=0,e.officeHourShowed=0,e.converstationInited=[],e.converstationSubscribedInited=[],e.visitedConversations=[],e.targetAccountId=-1,e.targetgroupid=-1,e.botClicked=0,e.showOfficeHour=1,window.pubble_proActiveChat=0,e.timeout&&(clearTimeout(e.timeout),delete e.timeout),e.t1&&(clearTimeout(e.t2),delete e.t1),e.t2&&(clearTimeout(e.t2),delete e.t2),e.notified=!1,this.adminChat=!1,this.adminFirst="",this.inited=!1,e.clicked=0,e.closeConversation=0,e.notifclicked=0,e.hasRead=0,e.track=1,e.pusherConnected=0,e.faqChecked=0,e.onlines=[],e.enters=[],e.nocontacted=!1,e.linkClicked=0;if(e.pusher&&e.conversationId){var f="presence-onsitecommunity_"+nt,d="conversation_"+e.conversationId,v="presence-conversation_"+e.conversationId;try{d&&e.pusher&&e.pusher.unsubscribe(d),f&&e.pusher&&e.pusher.unsubscribe(f),v&&e.pusher&&e.pusher.unsubscribe(v)}catch(b){}}this.$el.html(this.template(this.model)),r.addClass(this.$el,"pubble-app"),this.$el.find(".pubble-cw-powered-link").removeAttr("href").removeAttr("target");if(r.isMobile()){this.$el.find(".pubble-cw-action-post").on("click",function(){e.$el.find(".pubble-cw-input-textarea-send").trigger("click");var t=e.$el.find(".pubble-cw-action-att"),n=e.$el.find(".pubble-cw-action-post");n.removeClass("pubble-show"),r.addClass(n,"pubble-hide"),t.removeClass("pubble-hide"),r.addClass(t,"pubble-show"),e.$el.find(".pubble-cw-input-textarea").focus()});var x=this.$el.find(".pubble-cw-input-textarea");x.on("keyup",function(){var t=x.val().trim().length,n=e.$el.find(".pubble-cw-action-att"),i=e.$el.find(".pubble-cw-action-post");t>0?(n.removeClass("pubble-show"),r.addClass(n,"pubble-hide"),i.removeClass("pubble-hide"),r.addClass(i,"pubble-show")):(i.removeClass("pubble-show"),r.addClass(i,"pubble-hide"),n.removeClass("pubble-hide"),r.addClass(n,"pubble-show"))})}var T=c.config.user!=null&&c.config.user.uid>0&&c.config.user.type=="account";if(T){r.addClass(this.$el,"pubble-cw-loginuser");var N=r.handleImg(c.config.user.avatar,c.config.user.displayName,"48");this.$el.find(".pubble-cw-logged-avatar").html("<img src='"+N+"'>"),this.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off"),this.$el.find(".pubble-cw-getnotif-handle-ico-avatar").html("<img src='"+N+"'>"),this.$el.find(".pubble-cw-logged-username").html(c.config.user.displayName),this.$el.find(".pubble-cw-logged-text").html("You are currently logged in.")}c.config.parameters.enableGdpr||(E(".pubble-cw-chatbox").removeClass("pubble-gdpr-request"),this.$el.find(".pubble-gdpr").remove(),this.$el.find(".pubble-gdpr-parent").removeClass("pubble-md-gdpr-off")),this.$el.attr("style","display:none"),r.addClass(this.$el,"pubble-cw-app-visi"),c.config.parameters.fileUpload||this.$el.find(".pubble-cw-action-att").remove();var C=new y({app:this}),k=C.render().$el;this.$el.find(".pubble-cw-getnotif-card").html(k),this.$el.find(".pubble-cw-getnotif-content-close-btn").on("click",function(){e.$el.find(".pubble-cw-getnotif-handle").trigger("click")}),this.$el.find(".pubble-sb-bubble-close").on("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.$el.find(".pubble-sb-bubble");r.addClass(n,"pubble-move")}),this.$el.find(".pubble-cw-expire-killsession").on("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.$el.find(".pubble-cw-expire-killsession");e.$el.find(".pubble-sb-close").trigger("click"),e.$el.find(".pubble-cw-expire-newquestion").trigger("click");if(n.hasClass("pubble-disabled"))return!1;var i=e.$el.find(".pubble-sb-bubble");r.addClass(i,"pubble-move")}),this.$el.find(".pubble-cw-expire-newlink").on("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.$el.find(".pubble-cw-expire-step1"),i=e.$el.find(".pubble-cw-expire-step2");n.removeClass("pubble-show"),r.addClass(n,"pubble-hide"),i.removeClass("pubble-hide"),r.addClass(i,"pubble-show"),e.$el.find(".pubble-cw-expire-killsession").removeClass("pubble-disabled").html("Close");var s=r.getConverationToken(),o=r.getConversationID();if(s=="-1"&&o=="-1")return!1;var u={},a={conversationToken:s,contentType:"JSONP"};o!="-1"&&(a.conversationId=o,delete a.conversationToken),r.XDR(r.getEndpoints().tokenReset,a,function(){},function(){},u)}),this.$el.find(".pubble-cw-expire-newquestion").on("click",function(t){t.stopPropagation(),t.preventDefault(),E(".pubble-cw-btn-newquestion-btn").trigger("click"),r.addClass(e.$el.find(".pubble-cw-chatlist-loading"),"pubble-hide")}),this.$el.find(".pubble-cw-gdprmodal-close").on("click",function(){var t=e.$el.find(".pubble-cw-gdprmodal");t.removeClass("pubble-show"),r.addClass(t,"pubble-hide")}),this.$el.find(".pubble-cw-gdprmodal-deleteme-btn").on("click",function(){var t=e.$el.find(".pubble-cw-gdprmodal-deleteme-confirm");t.removeClass("pubble-hide"),r.addClass(t,"pubble-show");var n=e.$el.find(".pubble-cw-gdprmodal-deleteme-btn");n.removeClass("pubble-show"),r.addClass(n,"pubble-hide");var i=e.$el.find(".pubble-cw-gdprmodal-deleteme-text");i.removeClass("pubble-show"),r.addClass(i,"pubble-hide"),setTimeout(function(){i.removeClass("pubble-hide"),r.addClass(i,"pubble-show"),n.removeClass("pubble-hide"),r.addClass(n,"pubble-show"),t.removeClass("pubble-show"),r.addClass(t,"pubble-hide")},8e3)}),this.$el.find(".pubble-sb-bubble-textarea").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=E(e.target).parents(".pubble-sb-bubble").find(".pubble-cw-panel-dialog-item");t.trigger("click")}),this.$el.find(".pubble-cw-action-emoji").on("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.$el.find(".pubble-cw-input-textarea-emoji-list-container");return n.hasClass("pubble-hide")?(n.removeClass("pubble-hide"),r.addClass(n,"pubble-show")):(r.addClass(n,"pubble-hide"),n.removeClass("pubble-show")),!1});var L=e.$el.find(".pubble-emoji-list-container").find("ul"),x=e.$el.find(".pubble-cw-input-textarea"),A=e.$el.find(".pubble-emoji-list"),O=o.emjos.list,M=O.split(","),_=this.$el.find(".pubble-cw-input-textarea-emoji-hover-content"),D=_.find(".pubble-cw-input-textarea-emoji-hover-ico"),P=_.find(".pubble-cw-input-textarea-emoji-hover-code"),H=this.$el.find(".pubble-cw-input-textarea-emoji-hover-default");for(var B=0;B<M.length;B++){var O='<li class="pubble-emoji pubble-emoji-'+M[B]+'" data="'+M[B]+'"><div class="pubble-emoji-ico"></div> </li>',j=E(O);j.on("click",function(t){t.preventDefault(),t.stopPropagation();var n=E(t.target);n.hasClass("pubble-emoji")||(n=n.parent());var i=x.val();x.val(i+" :"+n.attr("data")+": "),x.focus();var s=A.parent().parent();return r.addClass(s,"pubble-hide"),s.removeClass("pubble-show"),e.$el.find(".pubble-cw-button-color-1").removeClass("pubble-cw-input-textarea-send-disabled"),r.addClass(e.$el.find(".pubble-cw-input-textarea-placeholder"),"pubble-off"),!1}),j.on("mouseout",function(e){e.preventDefault(),e.stopPropagation();var t=E(e.target);return t.hasClass("pubble-emoji")&&(t=t.parent()),r.addClass(_,"pubble-off"),D.html(""),P.html(""),H.removeClass("pubble-off"),!1}),j.on("mouseover",function(e){e.preventDefault(),e.stopPropagation();var t=E(e.target);t.hasClass("pubble-emoji")&&(t=t.parent()),_.removeClass("pubble-off");var n=t.parent().attr("data");return r.addClass(H,"pubble-off"),n||(n=t.attr("data")),P.html(":"+n+":"),!1}),L.append(j)}var F=this.$el.find(".pubble-cw-contactlist-container");F.find(".pubble-cw-btn-newquestion").html("Ask "+c.config.communityName);var I=E(".pubble-cw-contactbot"),q=e.$el.find(".pubble-cw-contact-list");this.botlist=[],this.addedlist=[],E.each(I,function(t,n){var r=E(n);if(r.attr("data-accountId")!=undefined||r.attr("data-groupid")!=undefined){var i={};i.accountId=r.attr("data-accountId"),i.groupid=r.attr("data-groupid");if(r.attr("data-name")!=undefined){var s=r.attr("data-name");if(e.addedlist.includes(s))return!0;e.addedlist.push(s),i.name=s,e.botlist.push(i)}}});var R=c.config.parameters.directAssignees;E.each(e.botlist,function(t,n){var i=r.handleImg("",n.name);n.groupid&&(i="https://cdn.pubble.io/pubblebot/cw/images/pubble-group1.png");var s=n.name,o=n.name;R&&R!=null&&E.each(R,function(e,t){n.accountId==t.id&&t.type=="account"?(i=r.handleImg(t.avatar,t.name),o=t.name,t.desc!=""&&(s=t.name,o=t.desc)):t.type=="app"&&n.groupid==t.id&&(i="https://cdn.pubble.io/pubblebot/cw/images/pubble-group1.png",o=t.name)});var u='<div class="pubble-cw-contact-item"><div class="pubble-cw-contact-avatar"><img src="'+i+'" class="avatar"></div><div class="pubble-cw-contact-title"';n.accountId&&(u=u+' data-accountId="'+n.accountId+'"'),n.groupid&&(u=u+' data-groupid="'+n.groupid+'"'),u=u+' data-name="'+s+'">'+s+'</div><div class="pubble-cw-contact-username">'+o+"</div></div>";var a=E(u);n.accountId?(a.addClass("pubble-cw-contact-user-"+n.accountId),a.find(".pubble-cw-contact-username").html("community staff")):(a.addClass("pubble-cw-contact-group-"+n.groupId),a.find(".pubble-cw-contact-username").html("group")),n.accountId&&a.addClass("pubble-cw-contact-ismod"),n.groupid&&a.addClass("pubble-cw-contact-ischannel"),a.on("click",function(t){n.accountId&&(e.targetAccountId=n.accountId),n.groupid&&(e.targetgroupid=n.groupid),E(".pubble-cw-btn-newquestion-btn").trigger("click"),e.greeting(E(t.target),e),e.$el.find(".pubble-cw-top-title").html(n.name),c.config.parameters.operational||(r.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off"),r.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off"))}),q.append(a)}),e.$el.find(".pubble-cw-input-textarea").val("").focus().trigger("click"),this.$el.find(".pubble-cw-modal-close-button").on("click",function(){var t=e.$el.find(".pubble-cw-modal");t.removeClass("pubble-show"),r.addClass(t,"pubble-hide")}),c.config.parameters.fileUpload&&setTimeout(function(){var e={};l.uploadImg("pubble-cw-input-trigger",function(e,t){var n=E(".ajax-file-upload");n.find("form").length>1&&n.find("form").first().remove();var r="";e.indexOf("amazonaws.")>-1?r=e:e.endsWith("jpeg")||e.endsWith("jpg")||e.endsWith("png")||e.endsWith("gif")?r="https://media.pubble.io"+e:r="http://files.pubble.io"+e,E(".pubble-cw-input-filelist").html(r),E(".pubble-cw-input-textarea-send").trigger("click")},{user:"guest"},E("#uploading_text_updates"),c.config.account,e)},150),E(".pubble-cw-panel-content").on("click",function(e){var t=E(e.target)}),c.config.parameters.whitelabel&&(r.addClass(this.$el.find(".pubble-cw-panel"),"pubble-cw-wl"),this.$el.find(".pubble-cw-powered-link").remove()),this.$el.appendTo("body"),c.config.customCss&&(c.config.customCss.indexOf("<style>")==-1?this.$el.find(".pubble-cw-contactbot-custom").html("<style>"+c.config.customCss+"</style>"):this.$el.find(".pubble-cw-contactbot-custom").html(c.config.customCss)),c.config.parameters.emailOption||(this.$el.find(".pubble-cw-input-button-email").remove(),this.$el.find(".pubble-cw-notif-email").remove()),c.config.parameters.skipOption||this.$el.find(".pubble-cw-input-button-skip").remove(),c.config.parameters.smsOption||(this.$el.find(".pubble-cw-input-button-sms").remove(),this.$el.find(".pubble-cw-notif-sms").remove()),!c.config.parameters.emailOption&&!c.config.parameters.smsOption&&this.$el.find(".pubble-cw-input-button-skip").remove(),!c.config.parameters.emailOption&&!c.config.parameters.smsOption&&(this.$el.find(".pubble-cw-notif-text").html(""),this.$el.find(".pubble-cw-notif-text2").html("revisit this conversation on: ")),this.updateLastSeen();var U=c.config.parameters.iso3166,z=[];window.pubble_ip_country&&window.pubble_ip_country!=""&&z.push(window.pubble_ip_country),U?(z.push(U),U=="gb"?(z.push("ie"),z.push("us")):U=="ie"?(z.push("gb"),z.push("us")):U=="us"&&(z.push("gb"),z.push("us"))):z=["ie","gb","us"],E("#mobile-number").intlTelInput({nationalMode:!0,numberType:"MOBILE",preferredCountries:z});var W=E(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms");W.find(".pubble-cw-mobile-number").intlTelInput({nationalMode:!0,numberType:"MOBILE",preferredCountries:z}),this.$el.find(".pubble-cw-input-buttonbar-any-yes").on("click",function(){e.stage="freefaq",r.mixlog("cw-faq-faq-anythingelse",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,answer:"yes"},e.track),e.anything=!0,r.addClass(E(".pubble-cw-input-anythingelse"),"pubble-off"),e.showChatbox(),e.nocontact()}),this.$el.find(".pubble-cw-input-buttonbar-any-no").on("click",function(){e.stage="free",r.mixlog("cw-faq-faq-anythingelse",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,answer:"no"},e.track);var t={conversationId:e.conversationId,contentType:"JSONP"};e.anything=!0;if(typeof window.ga!="undefined"&&typeof window.ga.getAll!="undefined"&&typeof window.ga.getAll()!="undefined"&&window.ga.getAll().length>0){var n=window.ga.getAll()[0].get("name");window.ga(n+".send","event",{eventCategory:c.config.eventCategory,eventAction:"user-self-served",eventLabel:"app_"+c.config.appID})}var i={};r.XDR(r.getEndpoints().close,t,function(){},function(){},i),E(".pubble-cw-endconv").removeClass("pubble-off"),r.addClass(E(".pubble-cw-input-anythingelse"),"pubble-off")}),this.$el.find(".pubble-cw-input-buttonbar-faq-yes").on("click",function(){e.stage="anythingelse",r.mixlog("cw-faq-faq-resolved",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,source:"general"},e.track),r.mixlog("cw-faq-faq-general",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,answer:"yes"},e.track);var t={conversationId:e.conversationId,contentType:"JSONP",action:"somehelpful"};if(typeof window.ga!="undefined"&&typeof window.ga.getAll!="undefined"&&typeof window.ga.getAll()!="undefined"&&window.ga.getAll().length>0){var n=window.ga.getAll()[0].get("name");window.ga(n+".send","event",{eventCategory:c.config.eventCategory,eventAction:"faq-helped",eventLabel:"app_"+c.config.appID})}var i={};r.XDR(r.getEndpoints().interaction,t,function(){e.faqHepful=!0},function(){},i),this.adminChat?(r.addClass(E(".pubble-cw-input-faqhelp"),"pubble-off"),e.showChatbox()):(r.addClass(E(".pubble-cw-input-faqhelp"),"pubble-off"),e.hideInput(),E(".pubble-cw-input-anythingelse").removeClass("pubble-off"))}),this.$el.find(".pubble-cw-input-buttonbar-faq-no").on("click",function(){e.stage="free",r.mixlog("cw-faq-faq-general",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,answer:"no"},e.track);var t={conversationId:e.conversationId,contentType:"JSONP",action:"nonehelpful"};if(typeof window.ga!="undefined"&&typeof window.ga.getAll!="undefined"&&typeof window.ga.getAll()!="undefined"&&window.ga.getAll().length>0){var n=window.ga.getAll()[0].get("name");window.ga(n+".send","event",{eventCategory:c.config.eventCategory,eventAction:"faq-did-not-help",eventLabel:"app_"+c.config.appID})}var i={};r.XDR(r.getEndpoints().interaction,t,function(){e.faqHepful=!0,e.anything=!0},function(){},i),e.nocontact(),r.addClass(E(".pubble-cw-input-faqhelp"),"pubble-off"),e.showChatbox()}),this.$el.find(".pubble-cw-input-button-sms").on("click",function(){c.config.parameters.skipOption&&(e.contactDelayed=1,e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")),e.setCountryCode(".pubble-cw-input-buttonbar-sms");var t=Math.ceil(Math.random()*1e4);r.mixlog("cw-credential-inputbox",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,type:"sms"},e.track),r.addClass(e.$el.find(".pubble-cw-input-buttonbar"),"pubble-off"),c.config.parameters.enableGdpr&&r.addClass(e.$el.find(".pubble-cw-chatbox"),"pubble-gdpr-request"),e.$el.find(".pubble-cw-input-buttonbar-sms").removeClass("pubble-off"),setTimeout(function(){e.$el.find(".pubble-cw-input-buttonbar-phonewidget").find("input").val("").focus().trigger("click")},100)}),this.$el.find(".pubble-cw-input-button-email").on("click",function(){c.config.parameters.skipOption&&(e.contactDelayed=1,e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")),r.addClass(e.$el.find(".pubble-cw-input-buttonbar"),"pubble-off"),e.$el.find(".pubble-cw-input-buttonbar-email").removeClass("pubble-off"),c.config.parameters.enableGdpr&&r.addClass(e.$el.find(".pubble-cw-chatbox"),"pubble-gdpr-request"),setTimeout(function(){e.$el.find(".pubble-cw-input-email").find("input").val("").focus().trigger("click")},100),r.mixlog("cw-credential-inputbox",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,type:"email"},e.track)}),this.$el.find(".pubble-cw-input-buttonbar-phone-submit").on("click",function(){var t=e.$el.find(".pubble-cw-input-buttonbar-sms"),n=e.$el.find(".pubble-cw-chatbox").find(".pubble-gdpr-error");if(c.config.parameters.enableGdpr){if(t.hasClass("pubble-md-gdpr-off"))return n.removeClass("pubble-hide"),r.addClass(n,"pubble-show"),!1;n.removeClass("pubble-show"),r.addClass(n,"pubble-hide")}e.thanks();var i=E("#mobile-number"),s=i.val().replace(/[^-0-9]/gi,"").replace(/\b(0+)/gi,"");if(s.length<4){var o=E(".pubble-cw-input-phone-fail");return o.removeClass("pubble-off"),o.off("click").on("click",function(){r.addClass(o,"pubble-off")}),!1}r.addClass(E(".pubble-cw-input-phone-fail"),"pubble-off");var u=E(".pubble-cw-input-buttonbar-phonewidget").find(".selected-flag"),a=u.attr("title").trim(),f=a.substring(a.indexOf("+"),a.length)+"-"+s;E(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms").find(".pubble-cw-mobile-number").val(s),r.mixlog("cw-credential-inputbox-success",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,type:"sms"},e.track),e.handleSMS(f),e.handleGDPR("phone"),e.$el.find(".pubble-cw-issms").trigger("click"),c.config.contactFirst?(e.sms=f,e.manChat(f,function(){},1,-10001),e.askStep(e)):e.submitPhone(e,f)}),this.$el.find(".pubble-cw-input-container").find(".pubble-gdpr-action").on("click",function(){var t;e.$el.find(".pubble-cw-input-buttonbar-sms").hasClass("pubble-off")?t=e.$el.find(".pubble-cw-input-buttonbar-email"):t=e.$el.find(".pubble-cw-input-buttonbar-sms");var n=e.$el.find(".pubble-cw-input-container").find(".pubble-gdpr-error");t.hasClass("pubble-md-gdpr-off")?(t.removeClass("pubble-md-gdpr-off"),r.addClass(t,"pubble-md-gdpr-on"),n.removeClass("pubble-show"),r.addClass(n,"pubble-hide")):(t.removeClass("pubble-md-gdpr-on"),r.addClass(t,"pubble-md-gdpr-off"))}),this.$el.find(".pubble-cw-input-container").find(".pubble-gdpr-text-link").on("click",function(){return window.open(c.config.parameters.privacyPolicyUrl,"_blank"),!1}),this.$el.find(".pubble-cw-input-buttonbar-email-submit").on("click",function(){var t=e.$el.find(".pubble-cw-input-buttonbar-email"),n=e.$el.find(".pubble-cw-chatbox").find(".pubble-gdpr-error");if(c.config.parameters.enableGdpr){if(t.hasClass("pubble-md-gdpr-off"))return n.removeClass("pubble-hide"),r.addClass(n,"pubble-show"),!1;n.removeClass("pubble-show"),r.addClass(n,"pubble-hide")}var i=E(".pubble-cw-input-buttonbar-email").find("input"),s=i.val().trim();if(r.isValidEmail(s)){e.thanks(),r.mixlog("cw-credential-inputbox-success",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,type:"email"},e.track);var o={contentType:"JSONP",email:s,conversationId:e.conversationId,postNotification:!1,postUrlSeq:!1};e.email=s,e.handleGDPR("email"),E(".pubble-cw-email-input").val(s);var u={};r.addClass(E(".pubble-cw-input-buttonbar-email"),"pubble-off"),c.config.parameters.enableGdpr||E(".pubble-cw-chatbox").removeClass("pubble-gdpr-request"),r.addClass(E(".pubble-cw-input-iscredentials"),"pubble-off"),E(".pubble-cw-input-processing").removeClass("pubble-off"),c.config.contactFirst?(e.cemail=s,e.manChat(s,function(){},1,-10001),e.askStep(e)):e.submitEmail(e,s)}else{var a=E(".pubble-cw-input-email-fail");a.removeClass("pubble-off"),a.off("click").on("click",function(){r.addClass(a,"pubble-off")})}}),E(".pubble-cw-input-buttonbar-got-submit").on("click",function(){E(".pubble-cw-input-buttonbar-back").trigger("click");return!1;var t}),E(".pubble-cw-input-button-skip").on("click",function(){e.robotChat("You opted to skip being notified. You need to stay online to get a reply. If you want to be notified when you go offline, enter your email or phone number below.",function(){}),e.seq("notify.skip"),c.config.parameters.skipOption&&(e.contactDelayed=1,e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")),r.addClass(E(".pubble-cw-input-iscredentials"),"pubble-off");var t={conversationId:e.conversationId,contentType:"JSONP",action:"skipcontact"},n={};r.XDR(r.getEndpoints().qinteraction,t,function(){},function(){},n),e.handlePrompt(),e.processing(),e.faqChecked||e.nocontact(),e.$el.find(".pubble-cw-input-textarea").val("").focus().trigger("click")}),this.$el.find(".pubble-cw-input-button-link").on("click",function(){if(!e.linkClicked){r.mixlog("cw-credential-inputbox",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,type:"link"},e.track);var t={conversationId:e.conversationId,contentType:"JSONP",action:"linkcontact"},n={};r.XDR(r.getEndpoints().qinteraction,t,function(){},function(){},n)}e.linkClicked=1,r.addClass(e.$el.find(".pubble-cw-input-buttonbar"),"pubble-off"),e.$el.find(".pubble-cw-input-buttonbar-link").removeClass("pubble-off")}),E(".pubble-cw-input-buttonbar-back").on("click",function(){e.$el.find(".pubble-cw-input-buttonbar").removeClass("pubble-off");var t=e.$el.find(".pubble-cw-chatbox").find(".pubble-gdpr-error");t.removeClass("pubble-show"),r.addClass(t,"pubble-hide"),r.addClass(e.$el.find(".pubble-cw-input-buttonbar-sms"),"pubble-off"),r.addClass(e.$el.find(".pubble-cw-input-buttonbar-email"),"pubble-off"),r.addClass(e.$el.find(".pubble-cw-input-buttonbar-link"),"pubble-off"),e.$el.find(".pubble-cw-chatbox").removeClass("pubble-gdpr-request")}),this.$el.find(".pubble-cw-input-button-skip").on("click",function(){r.addClass(e.$el.find(".pubble-cw-input-iscredentials"),"pubble-off"),r.mixlog("cw-credential-inputbox",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,type:"skip"},e.track),r.mixlog("cw-credential-inputbox-success",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId,type:"skip"},e.track)}),this.$el.find(".pubble-cw-getnotif-handle").on("click",function(){e.$el.find(".pubble-cw-getnotif-text").removeClass("pubble-off"),e.notifclicked||r.mixlog("cw-alert-clicked",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:e.conversationId},e.track),e.notifclicked=1;var t=E(".pubble-cw-getnotif");t.hasClass("pubble-cw-getnotif-off")?t.removeClass("pubble-cw-getnotif-off").addClass("pubble-cw-getnotif-on"):t.removeClass("pubble-cw-getnotif-on").addClass("pubble-cw-getnotif-off"),E(".pubble-cw-getnotif-content-main").removeClass("pubble-off")}),r.isMobile()?this.$el.find(".pubble-cw").addClass("pubble-cw-ismobile"):this.$el.addClass("pubble-cw-isdesktop");var X=this.$el.find(".pubble-sb-avatar"),V=this.$el.find(".pubble-sb-bubble-text"),J=this.$el.find(".pubble-sb-bubble"),K=2e4;try{c.config.parameters.sidebarDelay&&(K=parseInt(c.config.parameters.sidebarDelay)*1e3)}catch(Q){}var G=c.config.parameters.conversations,Y=r.getConversationID(),Z=r.getConverationToken(),et=r.getAppIdFromUrl();Y!="-1"&&Y!="0"||Z!="-1"&&Z!="0"||!!G&&G.length!=0?E("#pb_sidebar").removeClass("pubble-off"):c.config.parameters.disableNewActivity&&(e.noPromptime=1,r.addClass(E("#pb_sidebar"),"pubble-off"));var tt=1;this.$el.attr("data-app-trigger")=="false"&&(tt=0),tt&&this.vent.trigger("pubble:trigger:run");var nt=c.config.communityId;this.$el.find(".pubble-cw-top-secondary-1").html("with "+c.config.communityName),this.$el.find(".pubble-cw-top-title").html(c.config.communityName),this.$el.find(".pubble-cw-top-status-community").html(c.config.communityName),this.dialogContainer=this.$el.find(".pubble-cw-panel-dialog"),this.dialogPanel=this.$el.find(".pubble-cw-panel-dialog"),this.diaglogPanelParent=this.$el.find(".pubble-cw-panel-middle"),this.presenceContainer=this.$el.find(".pubble-cw-input-presence"),e.sendPresense=1,e.askedagain=0,e.botStage=0,e.botTalked=0,e.stage="start",e.asked=0,e.named=0,e.emailed=0,e.lastPost=0,e.appId=c.config.appID,this.talked=0,e.ignoreConversation=!1,e.conversationId=0,e.questionId=0,c.conversationId="",c.questionId="",e.conversationCollection=new p,e.conversationLoaded=0,e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),c.config.appID=="9392"&&this.vent.trigger("init:presence","");var rt=e.$el.find(".pubble-cw-chat-list");G.length<1?e.botlist.length>0?(e.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-panel-controls-emptylist"),r.addClass(e.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-listofone"),r.addClass(e.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-channellist")):r.addClass(e.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-emptylist"):(e.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-panel-controls-emptylist"),e.botlist.length>0&&r.addClass(e.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-channellist"));if(G&&G.length>0){for(var it=0;it<G.length;it++){var st=new s,ot=G[it];st=o.setPost(st,ot.conversationRoot),st.set("accountAssigned",ot.accountAssigned),st.set("communityAssigned",ot.communityAssigned),st.set("groupAssigned",ot.groupAssigned),st.set("lastPostFromModerator",ot.lastPostFromModerator),st.set("lastPostFromVisitor",ot.lastPostFromVisitor),st.set("replied",0);if(ot.lastReply){var ut=new s;ut=o.setPost(ut,ot.lastReply),st.set("avatar",ut.get("avatar")),r.isAuthor(c,ut.get("author"))?st.set("alias","You"):st.set("alias",ut.get("alias")),st.set("replied",1);var at=!1;if(ot.lastPost!=null&&ot.lastPost.id>ut.get("id")){var ft=new s;ft=o.setPost(ft,ot.lastPost),st.set("reply_content",ft.get("content")),ft.get("visitor")||(at=!0),st.set("moderator_reply",at)}else st.set("reply_content",ut.get("content")),ut.get("visitor")||(at=!0),st.set("moderator_reply",at);(ut.get("author").id==st.get("author").id||ut.get("author").cookieId==st.get("author").cookieId)&&st.set("moderator_reply",0)}else if(ot.lastPost){var ut=new s;ut=o.setPost(ut,ot.lastPost),st.set("avatar",ut.get("avatar")),r.isAuthor(c,ut.get("author"))?st.set("alias","You"):st.set("alias",ut.get("alias")),st.set("replied",1),st.set("reply_content",ut.get("content"));var at=!1;if(ut.get("lastPostFromModerator")||!ut.get("lastPostFromVisitor"))at=!0;st.set("moderator_reply",at),(ut.get("author").id==st.get("author").id||ut.get("author").cookieId==st.get("author").cookieId)&&st.set("moderator_reply",0)}st.set("type","CV"),st.set("read",1),e.conversationCollection||(e.conversationCollection=new p),e.conversationCollection.add(st);var lt=new h({model:st}),ct=lt.render().$el;rt.append(ct)}e.updateQuestionCount(),e.conversationId==0&&e.shiftView("list")}else e.botlist.length>1&&e.targetAccountId==-1&&e.targetgroupid==-1&&e.shiftView("userlist");var ht=window.location.href,pt=ht.indexOf("pubble.io/ask")>-1||ht.indexOf("pubblebot.com/ask")>-1||ht.indexOf("chatify.com/ask")>-1,dt=window.location.href.indexOf("PPBCT")>-1,vt=r.getAppIdFromUrl();vt!=c.config.appID&&(dt=0);if(pt){var mt=e.$el.find(".pubble-cw-chatlist-container");mt.removeClass("pubble-show"),r.addClass(mt,"pubble-hide");var mt=e.$el.find(".pubble-cw-chat-container");mt.removeClass("pubble-hide"),r.addClass(mt,"pubble-show");var gt=e.$el.find(".pubble-sb-bubble");r.addClass(gt,"pubble-hide"),E(".pubble-cw-panel").removeClass("pubble-move").removeClass("pubble-off");var yt=r.getCookieValue("pb-conversationId");r.addClass(E(".pubble-cw-contactbot"),"pubble-hide");if(!dt&&(yt==null||yt.length<5)){e.$el.find(".pubble-cw-btn-newquestion").first().trigger("click"),E(".pubble-cw-btn-newquestion-btn1").trigger("click"),E(".pubble-cw-conv").removeClass("pubble-off");var bt=!1;c.config.user!=null&&c.config.user.uid>0&&c.config.user.type=="account"?bt=1:(e.setContact(e),e.sms&&e.sms!=""?bt=1:e.email&&e.email!=""&&(bt=1)),c.config.contactFirst&&!bt?e.contactStep(e,!0):(e.askStep(e,!1),r.addClass(E(".pubble-cw-top-list"),"pubble-off"),setTimeout(function(){e.$el.find(".pubble-cw-input-textarea").attr("placeholder","Ask your question here...").focus().trigger("click"),E(".pubble-cw-input-textarea-placeholder").html("Ask your question here...")},100))}}if((Y=="0"||Y=="-1"&&dt)&&Z=="-1"){this.stage="free",this.talked=1;var wt=r.getRefer();r.mixlog("cw-fatal-error",{landingPage:c.config.pageURL,landingPage2:window.location.href,communityId:c.config.communityId,appId:c.config.appID,position:"3",conversationId:e.conversationId,referrer:wt},e.track),setTimeout(function(){e.conversationLoaded=!0,e.$el.find(".pubble-cw-contactbot").trigger("click"),e.$el.find(".pubble-cw-btn-newquestion").first().trigger("click")},500)}else if(Y==0||Y=="-1"||!!e.newQ||et!="-1"&&et!=e.appId)if(Z!=0&&Z!="-1"&&!e.newQ&&et==e.appId)this.stage="free",this.talked=1,e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),e.loadConversation("",e.appId,0,Z),setTimeout(function(){e.conversationLoaded=!0,e.$el.find(".pubble-cw-contactbot").trigger("click"),e.shiftView("chat")},100);else{var yt=r.getCookieValue("pb-conversationId"),xt=r.getCookieValue("pb-appId");xt==""||xt==null||xt==c.config.appID?yt!=null&&yt.length>5&&!e.newQ?(this.stage="free",this.talked=1,e.loadConversation(yt,e.appId,1,undefined,function(){e.$el.find(".pubble-cw-panel-controls-newq").trigger("click")}),e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),e.conversationId=yt):e.$el.find(".pubble-cw-btn-newquestion-btn").first().trigger("click"):setTimeout(function(){e.conversationLoaded=!0,e.$el.find(".pubble-cw-contactbot").trigger("click"),e.$el.find(".pubble-cw-btn-newquestion").first().trigger("click"),e.shiftView("chat")},200)}else{var b=e.$el.find(".pubble-cw-panel");b.removeClass("pubble-move"),r.fixMobileBody(!0);var Et=e.$el.find(".pubble-cw-shadow");r.addClass(Et,"pubble-show"),Et.removeClass("pubble-hide");var gt=e.$el.find(".pubble-sb-bubble");r.addClass(gt,"pubble-hide");var St=e.$el.find("#pb_sidebar");r.addClass(St,"pubble-expanded");var Q=e.$el.find(".pubble-cw-modal-expire");Q.removeClass("pubble-hide"),r.addClass(Q,"pubble-show"),E(".pubble-cw-input-textarea").blur()}G&&G.length>0&&this.vent.trigger("init:presence","");var Tt=this.$el.find(".pubble-cw-custom-button");if(Tt.length>0){E(".pubble-cw pubble-cw-contactbot").remove();var Nt=Tt.attr("sidebar");Nt=="false"&&E(".pubble-cw-panel-controls").hide(),Tt.on("click",function(){var t=e.$el.find(".pubble-cw-panel");r.addClass(t,"pubble-move"),r.fixMobileBody(!1);var n=e.$el.find(".pubble-cw-shadow");r.addClass(n,"pubble-hide"),n.removeClass("pubble-show");var i=e.$el.find(".pubble-sb-bubble");i.removeClass("pubble-hide");var s=e.$el.find("#pb_sidebar");s.removeClass("pubble-expanded")})}this.$el.find(".pubble-cw-panel-controls-hide").on("click",function(){var t=e.$el.find(".pubble-cw-panel");r.addClass(t,"pubble-move"),r.fixMobileBody(!1);var n=e.$el.find(".pubble-cw-shadow");r.addClass(n,"pubble-show"),n.removeClass("pubble-hide");var i=e.$el.find(".pubble-sb-bubble");i.removeClass("pubble-hide");var s=e.$el.find("#pb_sidebar");s.removeClass("pubble-expanded"),e.newcount=0,e.latestConversation=0;var o=E(".pubble-sb-notif");o.find(".pubble-sb-notif-nr").html(0),r.addClass(o,"pubble-off"),i.find(".pubble-sb-bubble-item-one").html(""),r.addClass(i,"pubble-move"),r.fixMobileBody(!1),r.mixlog("cw-widget-hide",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,domain:document.domain,conversationId:e.conversationId},e.track)}),this.$el.find(".pubble-sb-close").on("click",function(){return e.$el.find(".pubble-cw-panel-controls-close").trigger("click"),top.location!=location&&r.addClass(E()),!1}),this.$el.find(".pubble-cw-panel-controls-close").on("click",function(){e.triggerClick=0;var t=e.$el.find(".pubble-cw-panel");e.resetBubble(),e.newcount=0,E("#pb_sidebar").removeClass("pubble-sidebar-show");var n=E(".pubble-sb-notif");n.find(".pubble-sb-notif-nr").html(0),r.addClass(n,"pubble-off"),r.addClass(t,"pubble-move"),r.fixMobileBody(!1);var i=e.$el.find(".pubble-cw-shadow");r.addClass(i,"pubble-hide"),i.removeClass("pubble-show");var s=e.$el.find(".pubble-sb-bubble");s.removeClass("pubble-hide");var o=e.$el.find("#pb_sidebar");o.removeClass("pubble-expanded"),r.mixlog("cw-widget-closed",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,domain:document.domain,conversationId:e.conversationId},e.track)}),setInterval(function(){var e=(new Date).getTime();E(".pubble-cw-input-presence").each(function(){var t=E(this).attr("timestamp");t&&e-t>6e3&&r.addClass(E(this),"pubble-hide")});var t=E(".pubble-sb-text"),n=t.attr("timestamp");n&&e-n>6e3&&r.addClass(t,"pubble-off")},2e3),setInterval(function(){var e=(new Date).getTime();E(".pubble-cw-panel-dialog-item-justin").each(function(){var t=E(this).attr("timestamp");t&&e-t>1e3&&E(this).removeClass("pubble-cw-panel-dialog-item-justin")})},1e3),E(".pubble-cw-panel-controls-newq").on("click",function(){e.triggerClick=0,E(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-newactivity"),r.addClass(E(".pubble-cw-chatlist-loading"),"pubble-off");var t=e.$el.find(".pubble-cw-getnotif");t.hasClass("pubble-cw-getnotif-on")&&e.$el.find(".pubble-cw-getnotif-content-close-btn").trigger("click"),e.conversationCollection.models.length>0?(r.setCookieValue("pb-conversationId",""),e.shiftView("list")):e.conversationCollection.models.length>0&&E(".pubble-cw-contactlist-container").hasClass("pubble-show")?(r.setCookieValue("pb-conversationId",""),e.shiftView("list")):e.botlist.length>1?e.shiftView("userlist"):E(".pubble-cw-btn-newquestion-btn").trigger("click")}),E(".pubble-cw-btn-newquestion-btn1").on("click",function(){e.targetAccountId=-1,e.targetgroupid=-1,e.$el.find(".pubble-cw-top-title").html(c.config.communityName),c.config.parameters.operational?(r.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off"),e.$el.find(".pubble-cw-top-status").removeClass("pubble-off")):(r.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off"),c.config.parameters.operational||r.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off")),E(".pubble-cw-btn-newquestion-btn").trigger("click")}),E(".pubble-cw-btn-newquestion-btn2").on("click",function(){e.targetAccountId=0,e.targetgroupid=0;var t=e.$el.find(".pubble-cw-modal-expire");t.removeClass("pubble-show"),r.addClass(t,"pubble-hide"),e.$el.find(".pubble-cw-top-title").html(c.config.communityName),c.config.parameters.operational?(r.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off"),e.$el.find(".pubble-cw-top-status").removeClass("pubble-off")):(r.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off"),c.config.parameters.operational||r.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off")),E(".pubble-cw-btn-newquestion-btn").trigger("click")}),E(".pubble-cw-btn-newquestion-btn3").on("click",function(){e.targetAccountId=-1,e.targetgroupid=-1,e.$el.find(".pubble-cw-top-title").html(c.config.communityName),c.config.parameters.operational?(r.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off"),e.$el.find(".pubble-cw-top-status").removeClass("pubble-off")):(r.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off"),c.config.parameters.operational||r.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off")),E(".pubble-cw-btn-newquestion-btn").trigger("click")}),e.$el.find(".pubble-cw-btn-newquestion-btn").on("click",function(){var t=e.$el.find(".pubble-cw-modal-expire");t.removeClass("pubble-show"),r.addClass(t,"pubble-hide"),c.config.parameters.skipOption&&(delete e.contactDelayed,e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")),E(".pubble-cw-chatbox").removeClass("pubble-off"),r.addClass(E(".pubble-cw-invalidq"),"pubble-off"),e.vent.trigger("pubble:init:messenger"),e.$el.find(".pubble-cw-input-buttonbar").removeClass("pubble-off"),e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off");if(e.botlist.length>1&&e.targetAccountId==-1&&e.targetgroupid==-1)return e.shiftView("userlist"),!1;var n=E(".pubble-cw-contactlist-container");n.removeClass("pubble-show"),r.addClass(n,"pubble-hide");var i=E(".pubble-cw-modal");i.removeClass("pubble-show"),r.addClass(i,"pubble-hide"),i.find(".pubble-cw-modal-video").html(""),i.find(".pubble-cw-modal-img").html(""),r.addClass(i.find(".pubble-cw-modal-img-container"),"pubble-off"),r.addClass(i.find(".pubble-cw-modal-video-container"),"pubble-off");var s=E(".pubble-cw-getnotif");s.removeClass("pubble-cw-getnotif-on"),r.addClass(s,"pubble-cw-getnotif-off");var o=c.config.user!=null&&c.config.user.uid>0&&c.config.user.type=="account",u=e.$el.find(".pubble-cw-getnotif-handle");o?u.removeClass("pubble-off"):r.addClass(u,"pubble-off"),e.resetBottom(),e.t1&&(clearTimeout(e.t2),delete e.t1),e.t2&&(clearTimeout(e.t2),delete e.t2),e.shiftView("chat"),e.newQ=!0,e.stage="q",e.showOfficeHour=1,this.officeHourShowed=0,e.ui="",e.anything=!1,e.joined=!1,this.newcount=0,this.reloaded=!1,e.conversationId="",c.conversationId="",c.questionId="",c.config.user=lpQA.config.user,e.timeout&&(clearTimeout(e.timeout),delete e.timeout),e.notified=!1,e.adminChat=!1,e.adminFirst="",e.inited=!1,e.clicked=0,e.closeConversation=0,e.notifclicked=0,e.hasRead=0,e.faqChecked=0,e.linkClicked=0,e.nocontacted=!1,this.joined=!1,r.setCookieValue("pb-conversationId",""),r.setCookieValue("pb-appId",""),r.mixlog("cw-newconv",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,domain:document.domain,source:"top"},e.track),e.shiftView("chat"),e.newqstate();var a=!1;c.config.user!=null&&c.config.user.uid>0&&c.config.user.type=="account"?a=1:(e.setContact(e),e.sms&&e.sms!=""?a=1:e.email&&e.email!=""&&(a=1)),c.config.contactFirst&&!a?e.contactStep(e,!0):e.askStep(e,!1),r.isMobile()||E(".pubble-cw-input-textarea-actual").focus()}),E(".pubble-cw-input-newq-cancel").on("click",function(){r.addClass(E(".pubble-cw-newq"),"pubble-off"),E(".pubble-cw-chat").removeClass("pubble-off")}),E(".pubble-cw-reopen").on("click",function(){E(".pubble-cw-chatbox").removeClass("pubble-off"),r.addClass(E(".pubble-cw-endconv"),"pubble-off"),e.showInput(),e.closeConversation=0,e.talked=0,e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),e.ui="",r.mixlog("bot-cw-reopen",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,domain:document.domain},e.track);var t={},n={conversationId:e.conversationId,contentType:"JSONP"};r.XDR(r.getEndpoints().openp,n,function(e){},function(){},t)}),E(".pubble-cw-startnew").on("click",function(){return e.newQ=!0,r.mixlog("cw-newconv",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,domain:document.domain,source:"startnew"},e.track),r.setCookieValue("pb-conversationId",""),r.setCookieValue("pb-appId",""),E(".pubble-cw-btn-newquestion-btn").trigger("click"),!1}),E(".pubble-cw-input-textarea-skip").on("click",function(){E(".pubble-cw-panel-bottom").removeClass("pubble-cw-emailchatbox"),r.mixlog("bot-cw-email-skipbtn",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID},e.track),e.stage="free",E(".pubble-cw-input-textarea").attr("placeholder","Message"),E(".pubble-cw-input-textarea-placeholder").html("Message"),e.author.email="anon@pubble.co";var t=E(".pubble-cw-getnotif");!r.isValidEmail(e.author.email)||e.author.email.indexOf("anon@")!==-1?(t.removeClass("pubble-off"),setTimeout(function(){t.removeClass("pubble-cw-getnotif-off"),r.addClass(t,"pubble-cw-getnotif-on")},500)):(t.removeClass("pubble-cw-getnotif-on"),t.removeClass("pubble-off"),r.addClass(t,"pubble-cw-getnotif-off"),E(".pubble-cw-getnotif-content-buttonbar-action-inputbox").find("textarea").val(data.content)),setTimeout(function(){if(!e.nodelay){if(e.hasRead==0){var n={};n.conversationId=e.conversationId,n.appId=c.config.appID,n.code="delay",r.XDR(r.getEndpoints().seq,n,function(e){})}t.hasClass("pubble-cw-getnotif-off")&&!e.notifclicked&&(t.removeClass("pubble-cw-getnotif-off"),t.removeClass("pubble-off"),r.addClass(t,"pubble-cw-getnotif-on"))}},4e4)}),E(".pubble-cw-contactbot").on("click",function(t){var n=e.$el.find(".pubble-sb-notif");n.find(".pubble-sb-notif-nr").html(0),r.addClass(n,"pubble-off"),e.$el.find(".pubble-cw-panel").removeClass("pubble-off");var i=E(t.target);E("#pb_sidebar").removeClass("pubble-sidebar-show"),i.hasClass("pubble-cw-contactbot")||(i=i.parents(".pubble-cw-contactbot"));var s=r.getCookieValue("pb-conversationId");if(e.conversationLoaded)e.conversationLoaded=0,e.shiftView("chat");else if(i.attr("data-accountId")!=undefined)e.targetAccountId=i.attr("data-accountId"),E(".pubble-cw-btn-newquestion-btn").trigger("click"),e.greeting(i,e);else if(i.attr("data-groupid")!=undefined)e.targetgroupid=i.attr("data-groupid"),E(".pubble-cw-btn-newquestion-btn").trigger("click"),e.greeting(i,e);else{if(e.latestConversation!=0){if(e.latestConversation!=e.conversationId){e.loadConversation(e.latestConversation,e.appId,0),e.shiftView("chat");if(e.conversationCollection){E.each(e.conversationCollection.models,function(t,n){n.get("conversationId")==e.latestConversation&&n.set("read",1)});var o=0;E.each(e.conversationCollection.models,function(e,t){t.get("read")||o++}),o==0&&e.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-newactivity")}return e.latestConversation=0,!1}return e.latestConversation=0,e.shiftView("chat"),!1}var u=!E(".pubble-cw-chat-container").hasClass("pubble-hide");u?e.shiftView("chat"):s&&s!=null&&s.length>0&&!e.botClicked?e.shiftView("chat"):e.conversationCollection.models.length>0?e.shiftView("list"):e.botlist.length>1&&e.targetAccountId==-1&&e.targetgroupid==-1?e.shiftView("userlist"):e.$el.find(".pubble-cw-form-container").hasClass("pubble-show")||(e.shiftView("chat"),e.newqstate())}e.latestConversation=0,e.botClicked=1;var a=e.$el.find(".pubble-cw-panel");a.removeClass("pubble-move"),r.fixMobileBody(!0);var f=e.$el.find(".pubble-cw-shadow");r.addClass(f,"pubble-show"),f.removeClass("pubble-hide");var l=e.$el.find(".pubble-sb-bubble");r.addClass(l,"pubble-hide");var h=e.$el.find("#pb_sidebar");r.addClass(h,"pubble-expanded");if(e.clicked)return!1;e.clicked=1,r.mixlog("cw-sidebar-clicked",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,domain:document.domain},e.track);if(e.stage=="start"){if(e.conversationCollection.models.length>0)return!1;var p=0;e.setContact(e),e.sms&&e.sms!=""?p=1:e.email&&e.email!=""&&(p=1),c.config.contactFirst&&!p?(e.vent.trigger("pubble:init:messenger"),e.contactStep(e,!0)):(e.vent.trigger("pubble:init:messenger"),e.askStep(e,!1))}e.scrollToBottom()}),window.location.href.indexOf("#myenquiry")!=-1&&this.$el.find(".pubble-cw-contactbot").trigger("click"),this.$el.find(".pubble-cw-input-textarea").on("keyup",$UScore.debounce(function(t){if(t.keyCode==13)return!1;if(e.clientName!==""&&e.stage!=="q"&&e.stage!=="name"&&e.stage!=="start"){var n=e.$el.find(".pubble-cw-input-textarea").val(),i=r.getEndpoints().replying+"?contentType=JSONP&postId="+e.objectId+"&accountId=&name="+e.clientName,s=!1;c.config.user&&e.author&&c.config.user.uid==e.author.id&&(s=!0),c.config.user.uid==0&&(s=!0),e.author&&(c.config.user.uid>0&&c.config.user.uid==e.author.id||c.config.user.cookieId==e.author.cookieId||r.getCookie("pubble_gen_uid")==e.author.cookieId)&&(s=!0),window.location.href.indexOf("visitor=false")>-1&&(c.config.user.uid==0?s=!0:s=!1),s&&(i=r.getEndpoints().replying+"?contentType=JSONP&visitor=true&postId="+e.objectId+"&accountId=&name="+e.clientName+"&content="+n);if(!e.objectId)return!1;E.ajax({url:i,data:"",type:"GET",cache:0,dataType:"jsonp",success:function(e){},error:function(e){}})}},500)),this.$el.find(".pubble-cw-input-textarea").on("keyup",function(t){var n=t.target||t.srcElement,i=E(n).val().trim();i.length>0&&r.addClass(e.$el.find(".pubble-cw-input-textarea-placeholder"),"pubble-off")}),this.$el.find(".pubble-cw-input-textarea").on("keydown",function(t){t.stopPropagation();var n=t.target||t.srcElement,r=-1;if(t.shiftKey&&t.which==13)r=2;else if(t.keyCode==13||t.keyCode==10)r=1;var i=E(n).val().trim();if(r==1)return t.preventDefault(),i!=""&&e.$el.find(".pubble-cw-input-textarea-send").trigger("click"),!1;E(".pubble-cw-input-textarea-send-disabled").removeClass("pubble-cw-input-textarea-send-disabled"),e.talked=1;if(n&&n.scrollHeight<86){E(n).attr("style","height:"+n.scrollHeight+"px !important;"),E(".pubble-cw-panel-bottom").attr("style","height:"+(55+n.scrollHeight-20)+"px");var s=E(".pubble-cw-panel-middle");E(".pubble-cw-panel-middle").attr("style","bottom:"+(55+n.scrollHeight-20)+"px")}}),this.$el.find(".pubble-cw-input-textarea-send").on("click",function(t){e.sendPresense=1;var n=e.stage,i=e.$el.find(".pubble-cw-input-textarea"),u=e.$el.find(".pubble-cw-input-filelist"),a=u.html().trim(),f=i.val().trim();f=="undefined"&&r.mixlog("cw-fatal-error-1",{landingPage:c.config.pageURL,landingPage2:window.location.href,communityId:c.config.communityId,appId:c.config.appID,content:f,stage:n,position:"1",conversationId:e.conversationId,length:i.length},e.track),(!f||f=="")&&a.length>0&&window.pb_uploaded_fileName!=undefined&&(f=""+window.pb_uploaded_fileName);if(f&&f!="undefined"&&(f.length>0||a.length>0)){f==""&&a.length>0&&window.pb_uploaded_fileName!=undefined&&(f=""+window.pb_uploaded_fileName),n=="start"&&e.conversationId=="0"&&(n="q");if(n=="q"){if(!window.pubble_proActiveChat&&(f=="How are you"||f=="hi there"||f=="Hi there"||f=="how are you"||f.length<4))return e.askedagain=1,E(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),e.manChat(f,function(){},1,-101),e.robotChat("Please type a question",function(){},1,-100),E(".pubble-cw-panel-bottom").removeAttr("style"),E(".pubble-cw-input-textarea").val(""),r.addClass(E(".pubble-cw-input-textarea-send"),"pubble-cw-input-textarea-send-disabled"),n="start",r.mixlog("cw-question-contentcheck",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,content:f,length:"invalid"},e.track),!1;r.mixlog("cw-question-contentcheck",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,content:f,length:"valid"},e.track),window.pubble_proActiveChat=0,e.content=f,c.config.pageURL=r.getFilterLandingPage();var l=E("#pubble_app_"+c.config.appID);l.attr("data-landingpage")!=null&&(c.config.pageURL=l.attr("data-landingpage"));var p=c.config.pageURL;p=r.filterPubbleParas(p);var d={communityId:c.config.communityId,contentType:"JSONP",appId:c.config.appID,postToType:"app",type:"Q",visitor:!0,name:e.clientName,content:f,landingPage:p};a.length>0&&(d.attachments=a),c.config.user!=null&&c.config.user.uid>0||(e.sms&&e.sms!=""?d.phone=e.sms:e.email&&e.email!=""&&(d.email=e.email)),c.config.user==null||c.config.user.uid==0?(d.anon=!0,d.postAsVisitor=!0):d.postAsVisitor=c.config.user.postAsVisitor;var v={};d.tempId=r.getTempId();if(d.content=="undefined")return!1;e.manChat(f,function(){E(".pubble-cw-panel-bottom").removeAttr("style")},1,d.tempId),E(".pubble-cw-panel-bottom").removeAttr("style"),e.hideInput(),E(".pubble-cw-input-processing").removeClass("pubble-off"),e.triggerClick==2&&e.rule?(d.greetRuleId=e.rule.id,triggerClick=0,e.targetAccountId>0?d.assignAccountIds=e.targetAccountId:c.config.parameters.assignGreeting&&e.triggerUser.id!=c.config.parameters.communityBot.id&&(d.assignAccountIds=e.triggerUser.id)):e.targetAccountId>0&&(d.assignAccountIds=e.targetAccountId),e.targetgroupid>0&&(d.assignAppIds=e.targetgroupid),e.targetAccountId>0||e.targetgroupid>0;if(d.content=="undefined")return e.warning("no content in q",""),!1;if(d.content.toLowerCase().match("<.*onerr")!=null||d.content.toLowerCase().match("<.*onload")!=null)return e.warning(d.content,""),!1;if(d.content.indexOf("prompt(/XSSPOSED/")!=-1)return e.warning(d.content,""),!1;window.location.href.indexOf("visitor=false")==-1&&e.visitorId&&(d.visitorId=e.visitorId),c.config.parameters.enableGdpr&&d.type=="Q"&&(d.agreePrivacyPolicy=!0),c.config.visitorId&&(d.visitorId=c.config.visitorId),c.config.user!=null&&c.config.user.uid>0&&c.config.user.type=="account"&&(delete d.visotrId,delete d.agreePrivacyPolicy),r.XDR(r.getEndpoints().post,d,function(t){if(d.greetRuleId){e.$el.find(".pubble-trigger-chat").remove();var n=e.conversationCollection.find(function(e){return e.get("conversationId")=="-1000"});n&&e.conversationCollection.remove(n)}var i=new s;i=o.setPost(i,t.data),e.conversationCollection.add(i),E(".pubble-cw-input-textarea").attr("placeholder","Message"),e.vent.trigger("init:presence",e.conversationId),E(document).trigger("app:desktop:permission"),e.vent.trigger("pubble:question:asked",t.data.conversationId),e.updateServer(),e.nocontacted=!1,E(".pubble-cw-input-textarea-placeholder").html("Message"),E(".pubble-cw-input-textarea-send").html("Send"),window.pb_uploaded_fileName="",e.targetAccountId=-1,e.targetgroupid=-1,e.$el.find(".pubble-cw-input-filelist").html(""),e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),!f||f.indexOf("?")==-1?r.mixlog("cw-content-submitted",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,type:"message"},e.track):r.mixlog("cw-content-submitted",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,type:"question"},e.track),E(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),e.conversationId=t.data.conversationId,e.questionId=t.data.count,c.conversationId=e.conversationId,c.questionId=e.questionId,r.setCookieValue("pb-conversationId",t.data.conversationId),r.setCookieValue("pb-appId",t.data.appId),e.objectId=t.objectId,e.lastPost=t.objectId,e.shortUrl=t.shortUrl,e.author=t.author,E(".pubble-cw-tick-mod").removeClass("pubble-off"),t.data.read&&e.updateRead(),r.mixlog("bot-cw-asked",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,conversationId:t.data.conversationId},e.track),E(".pubble-cw-notif-link").html(t.data.shortUrl),E(".pubble-cw-input-buttonbar-link").find(".pubble-cw-input-buttonbar-content").html(t.data.shortUrl),e.author=t.data.author,e.updateQuestionCount();var u=e.$el.find(".pubble-cw-chat-list");i.set("type","CV"),i.set("read",1);var a=new h({model:i}),l=a.render().$el;u.prepend(l);var p={};p.conversationId=e.conversationId,p.appId=c.config.appID,p.code="contact",e.stage="contact",e.credential=0;var v=0;c.config.user!=null&&c.config.user.uid>0&&c.config.user.type=="account"?v=1:e.sms&&e.sms!=""?v=1:e.email&&e.email!=""&&(v=1),d.type=="Q"&&(e.email&&e.email.length>2&&E(".pubble-cw-email-input").val(e.email),e.sms&&e.sms.length>5&&e.handleSMS(e.sms),v&&E(".pubble-cw-getnotif-handle").removeClass("pubble-off"));if(c.config.contactFirst){E(".pubble-cw-input-processing").removeClass("pubble-off");var m=window.setInterval(function(){e.pusherConnected&&e.presence_inited&&(window.clearInterval(m),setTimeout(function(){r.addClass(E(".pubble-cw-input-processing"),"pubble-off"),e.faq()},500))},200);return!1}v?(r.addClass(E(".pubble-cw-input-processing"),"pubble-off"),e.faqinterval=setInterval(function(){r.contains(e.converstationSubscribedInited,e.conversationId)&&(e.faq(),window.clearInterval(e.faqinterval))},200)):e.contactStep(e,!1)},function(){},v)}else if(n!="name")if(n=="email"){E(".pubble-cw-panel-bottom").removeClass("pubble-cw-emailchatbox"),f=f.trim().replace("\n","").replace(/\r\n/,""),f!==""&&(e.author.email=f),r.isValidEmail(e.author.email)&&f.indexOf("anon@")==-1?r.mixlog("bot-cw-email-edit",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,valid:!0},e.track):r.mixlog("bot-cw-email-edit",{landingPage:c.config.pageURL,communityId:c.config.communityId,appId:c.config.appID,valid:!0},e.track);var d={contentType:"JSONP",email:f,anon:!0,conversationId:e.conversationId,postNotification:!1,emailPermalink:!0,postUrlSeq:!0,systemNotification:!0,permalink:!0},v={};c.config.parameters.enableGdpr&&(d.agreePrivacyPolicy=!0),E(".pubble-cw-panel-bottom").removeAttr("style"),e.email=f;var v={};if(f=="undefined")return!1;if(f.toLowerCase().match("<.*onerr")!=null||f.toLowerCase().match("<.*onload")!=null)return e.warning(f,e.conversationId),!1;if(f.indexOf("prompt(/XSSPOSED/")!=-1)return e.warning(f,e.conversationId),!1;r.XDR(r.getEndpoints().editEmail,d,function(t){E(".pubble-cw-panel-bottom").removeClass("pubble-gdpr-request");if(t.code!="200")return!1;e.emailProvied=!0,e.stage="free",window.location.href.indexOf("visitor=false")==-1&&t.data.type=="visitor"&&(e.visitorId=t.data.id,w.set("visitor-id-"+c.config.appID,t.data.id)),E(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),E(".pubble-cw-input-textarea").attr("placeholder","Message"),E(".pubble-cw-tick-server-off").removeClass("pubble-off");var n=E(".pubble-cw-getnotif");!r.isValidEmail(e.author.email)||e.author.email.indexOf("anon@")!==-1?(n.removeClass("pubble-cw-getnotif-off"),n.removeClass("pubble-off"),r.addClass(n,"pubble-cw-getnotif-on")):(n.removeClass("pubble-cw-getnotif-on"),n.removeClass("pubble-off"),r.addClass(n,"pubble-cw-getnotif-off"),E(".pubble-cw-getnotif-content-buttonbar-action-inputbox").find("textarea").val(d.content)),setTimeout(function(){if(!e.nodelay){if(e.hasRead==0){var t={};t.conversationId=e.conversationId,t.appId=c.config.appID,t.code="delay",r.XDR(r.getEndpoints().seq,t,function(e){})}n.hasClass("pubble-cw-getnotif-off")&&!e.notifclicked&&(n.removeClass("pubble-cw-getnotif-off"),n.removeClass("pubble-off"),r.addClass(n,"pubble-cw-getnotif-on"))}},4e4)},function(){},v)}else{var m=r.getTempId();if(f=="undefined"||e.conversationId==0){var g=r.getRefer();return r.mixlog("cw-fatal-error",{landingPage:c.config.pageURL,landingPage2:window.location.href,communityId:c.config.communityId,appId:c.config.appID,content:f,stage:n,position:"1",conversationId:e.conversationId,referrer:g},e.track),!1}e.manChat(f,function(){var t;e.stage=="freefaq"&&(t=e.stage),e.postComment(f,c.config.appID,e.conversationId,m,a,t),E(".pubble-cw-panel-bottom").removeAttr("style")},1,m)}}E(".pubble-cw-panel-bottom").removeAttr("style"),i.val(""),r.addClass(E(".pubble-cw-input-textarea-send"),"pubble-cw-input-textarea-send-disabled"),E(".pubble-cw-panel-middle").removeAttr("style"),i.attr("style","height:20px !important;")})},postComment:function(e,t,n,i,s,o){var u=this,a={communityId:c.config.communityId,contentType:"JSONP",appId:c.config.appID,postToType:"app",conversationId:n,type:"C",content:e};s.length>0&&(a.attachments=s),c.config.user==null||c.config.user.uid==0?(a.anon=!0,a.name=u.clientName,a.postAsVisitor=!0):a.postAsVisitor=c.config.user.postAsVisitor,window.location.href.indexOf("visitor=false")==-1||this.newQ?(a.visitor=!0,u.visitorId&&(a.visitorId=u.visitorId)):(a.visitor=!1,a.anon=!1),c.config.visitorId&&(a.visitorId=c.config.visitorId),c.config.user!=null&&c.config.user.uid>0&&c.config.user.type=="account"&&(delete a.visotrId,delete a.agreePrivacyPolicy),i&&(a.tempId=i);var f={};E(".pubble-cw-panel-bottom").removeAttr("style");if(e){if(e.toLowerCase().match("<.*onerr")!=null||e.toLowerCase().match("<.*onload")!=null)return u.warning(e,n),!1;if(e.indexOf("prompt(/XSSPOSED/")!=-1)return u.warning(e,n),!1}o&&o=="freefaq"&&!u.adminChat&&(u.hideInput(),E(".pubble-cw-input-processing").removeClass("pubble-off")),window.location.href.indexOf("visitor=false")==-1&&u.visitorId&&(a.visitorId=u.visitorId),c.config.parameters.enableGdpr&&a.type=="Q"&&(a.agreePrivacyPolicy=!0),r.XDR(r.getEndpoints().post,a,function(e){if(e.code=="406")return E("#PBMSG"+a.tempId).remove(),u.robotChat("To join the conversation, please reply from the moderator section",function(){}),!1;if(o&&o=="freefaq"&&!u.adminChat)return u.faq(a.content),!1;u.stage=="free"&&u.officeHour(),u.updateServer(),window.pb_uploaded_fileName="",u.$el.find(".pubble-cw-input-filelist").html(""),u.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),E(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),u.lastPost=e.objectId})},askName:function(){},askEmail:function(){var e=this,t="Cool ";t+=" What’s your email (so we can follow-up)? ",e.robotChat(t,function(){e.stage="email"})},startup:function(){this.render()},robotChat:function(e,t,n){this.botTalked++;var o=new s;o.set("alias",c.config.parameters.communityBot.alias),o.set("postID","bot-"+this.botTalked),o.set("avatar",c.config.parameters.communityBot.avatar+"?72"),o.set("time",r.getTime()),o.set("content",e);var u=new i({model:o}),a=u.render().$el;r.addClass(a,"pubble-cw-isbot"),a.removeClass("pubble-cw-isadmin"),n&&n=="contact"&&(r.addClass(a,"pubble-cw-isContactMsg"),E(".pubble-cw-isContactMsg").remove()),n&&n=="greeting"&&(r.addClass(a,"pubble-cw-isgreeting"),E(".pubble-cw-isgreeting").remove()),r.addClass(a,"pubble-cw-panel-dialog-item-justin");var f=(new Date).getTime();a.attr("timestamp",f),E(".pubble-cw-panel-dialog").append(a),this.scrollToBottom(),t()},updateServer:function(){var e=E(".pubble-cw-tick-server");E.each(e,function(e,t){var n=E(t);n.removeClass("pubble-off"),n.hasClass("pubble-cw-tick-server-off")&&(n.removeClass("pubble-cw-tick-server-off"),r.addClass(n,"pubble-cw-tick-server-on"),n.parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html("Not seen yet"))})},updateRead:function(){var e=E(".pubble-cw-tick-mod");E.each(e,function(e,t){var n=E(t);n.hasClass("pubble-off")&&n.removeClass("pubble-off"),n.hasClass("pubble-cw-tick-mod-off")&&(n.removeClass("pubble-cw-tick-mod-off"),r.addClass(n,"pubble-cw-tick-mod-on"),n.parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html("Seen"))})},submitPhone:function(e,t){var n={contentType:"JSONP",phone:t,conversationId:e.conversationId,postNotification:!1,postUrlSeq:!1,permalink:!0};c.config.parameters.enableGdpr&&(n.agreePrivacyPolicy=!0);var i={};r.addClass(E(".pubble-cw-input-buttonbar-sms"),"pubble-off"),E(".pubble-cw-chatbox").removeClass("pubble-gdpr-request"),r.addClass(E(".pubble-cw-input-iscredentials"),"pubble-off"),e.handlePrompt(),e.sms=n.phone;if(t){if(t.toLowerCase().match("<.*onerr")!=null||t.toLowerCase().match("<.*onload")!=null)return e.warning(t,e.conversationId),!1;if(t.indexOf("prompt(/XSSPOSED/")!=-1)return e.warning(t,e.conversationId),!1}r.XDR(r.getEndpoints().editPhone,n,function(t){E(".pubble-cw-panel-bottom").removeClass("pubble-gdpr-request");if(t.code!="200")return!1;window.location.href.indexOf("visitor=false")==-1&&t.data.type=="visitor"&&(e.visitorId=t.data.id,w.set("visitor-id-"+c.config.appID,t.data.id)),e.vent.trigger("pubble:messenger:contact",e.conversationId),e.telProvied=!0,!c.config.contactFirst||e.conversationId!=""?(e.processing(),e.faqChecked||e.nocontact()):e.askStep(e)},function(){},i)},submitEmail:function(e,t){e.handlePrompt();var n={},i={contentType:"JSONP",email:t,conversationId:e.conversationId,postNotification:!1,postUrlSeq:!1,permalink:!0};c.config.parameters.enableGdpr&&(i.agreePrivacyPolicy=!0);if(t){if(t.toLowerCase().match("<.*onerr")!=null||t.toLowerCase().match("<.*onload")!=null)return e.warning(t,e.conversationId),!1;if(t.indexOf("prompt(/XSSPOSED/")!=-1)return e.warning(t,e.conversationId),!1}r.XDR(r.getEndpoints().editEmail,i,function(n){E(".pubble-cw-panel-bottom").removeClass("pubble-gdpr-request");if(n.code!="200")return!1;window.location.href.indexOf("visitor=false")==-1&&n.data.type=="visitor"&&(e.visitorId=n.data.id,w.set("visitor-id-"+c.config.appID,n.data.id)),e.vent.trigger("pubble:messenger:contact",e.conversationId),e.emailProvied=!0,!c.config.contactFirst||e.conversationId!=""?(e.processing(),e.faqChecked||e.nocontact(),t!="anon@pubble.co"&&E(".pubble-cw-getnotif-content-buttonbar-action-inputbox-email").find("textarea").val(t)):e.askStep(e)},function(){},n)},askStep:function(e,t){e.triggerClick?(e.vent.trigger("app:trigger:chatitem"),e.triggerClick=2):setTimeout(function(){(!e.targetAccountId||e.targetAccountId==-1)&&(!e.targetgroupid||e.targetgroupid==-1)&&e.robotChat("Please type your question below",function(){},"greeting")},1e3),e.stage="q",e.clientName||(e.clientName="Guest"),r.addClass(E(".pubble-cw-input-processing"),"pubble-off"),E(".pubble-cw-input-default").removeClass("pubble-off"),r.addClass(E(".pubble-cw-input-iscredentials"),"pubble-off"),E(".pubble-cw-input-textarea-placeholder").html("Ask your question here...")},setContact:function(e){c.isPubble?(c.config.user!=null&&c.config.user.uid>0&&c.config.user.email!=null&&(e.email=c.config.user.email),c.config.user!=null&&c.config.user.uid>0&&c.config.user.displayName!=null&&(e.clientName=c.config.user.displayName),c.config.user!=null&&c.config.user.uid>0&&c.config.user.phone!=null&&(e.sms=c.config.user.phone)):(c.config.user!=null&&c.config.user.uid>0&&c.config.user.email!=null&&c.config.user.type!="account"&&(e.email=c.config.user.email),c.config.user!=null&&c.config.user.uid>0&&c.config.user.displayName!=null&&c.config.user.type!="account"&&(e.clientName=c.config.user.displayName),c.config.user!=null&&c.config.user.uid>0&&c.config.user.phone!=null&&c.config.user.type!="account"&&(e.sms=c.config.user.phone))},contactStep:function(e,t){if(t){var n=new v;e.author||(e.author={},e.author.alias="Guest",e.author.email=""),n.set("author",e.author),n.set("type","newq"),n.set("conversationId",0);var i=new d({model:n}),s=i.render().$el;e.conversationCollection.models.length==0&&c.config.contactFirst&&r.addClass(s.find(".pubble-form-top-close"),"pubble-off"),s.find(".pubble-form-top-close").on("click",function(){e.conversationCollection.models.length>0&&e.shiftView("list")});var o=c.config.parameters.iso3166,u=[];window.pubble_ip_country&&window.pubble_ip_country!=""&&u.push(window.pubble_ip_country),o?(u.push(o),o=="gb"?(u.push("ie"),u.push("us")):o=="ie"?(u.push("gb"),u.push("us")):o=="us"&&(u.push("gb"),u.push("us"))):u=["ie","gb","us"],s.find(".pubble-cw-mobile-lib").intlTelInput({nationalMode:!0,numberType:"MOBILE",preferredCountries:u});var a=e.$el.find(".pubble-cw-form-container");return a.html(s),a.removeClass("pubble-hide"),r.addClass(a,"pubble-show"),r.addClass(e.$el.find(".pubble-cw-chat-container"),"pubble-hide"),!1}r.addClass(E(".pubble-cw-input-processing"),"pubble-off"),(!!c.config.parameters.emailOption||!!c.config.parameters.smsOption)&&e.robotChat("How do you want to be notified?",function(){},"contact");if(!c.config.parameters.emailOption&&!c.config.parameters.smsOption){e.seq("notify.skip"),r.addClass(E(".pubble-cw-input-iscredentials"),"pubble-off");var f={conversationId:e.conversationId,contentType:"JSONP",action:"skipcontact"},l={};r.XDR(r.getEndpoints().qinteraction,f,function(){},function(){},l),e.handlePrompt(),e.processing(),e.faqChecked||e.nocontact()}else{c.config.parameters.skipOption&&(e.contactDelayed=0,setTimeout(function(){e.contactDelayed==0&&e.$el.find(".pubble-cw-input-button-skip").trigger("click"),e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")},15e3));var h={};h.conversationId=e.conversationId,h.appId=c.config.appID,h.code="notify.options",h.contentType="JSONP",e.hideInput(),E(".pubble-cw-input-iscredentials").removeClass("pubble-off"),e.$el.find(".pubble-cw-input-buttonbar").removeClass("pubble-off"),c.config.parameters.skipOption&&r.addClass(e.$el.find(".pubble-cw-input-waiting"),"pubble-cw-animate"),r.XDR(r.getEndpoints().seq,h,function(e){})}},setDefaultCountry:function(e){if(!e||e==""||e=="-")return!1;var t=E(".flag-dropdown");E.each(t,function(t,n){var i=E(n),s=i.find(".country");E.each(s,function(t,n){var i=E(n);i.removeClass("highlight").removeClass("active");if(i.attr("data-country-code")==e){r.addClass(i,"highlight"),r.addClass(i,"active");var s=i.parent().parent(),o=E(".selected-flag");return E.each(o,function(e,t){t=E(t),t.attr("title",i.find(".country-name").html()+": "+i.find(".dial-code").html()),t.find(".iti-flag").removeAttr("class").addClass("iti-flag").addClass(i.attr("data-country-code")),t.find(".iti-flag-pubble-nr").remove();var n=E("<div class='iti-flag-pubble-nr'>"+i.find(".dial-code").html()+"</div>");n.insertBefore(t.find(".arrow"))}),!1}})})},setCountryCode:function(e){return!1},manChat:function(e,t,n,u,a){this.botTalked++;var f=new s;f.set("alias","Me"),f.set("postID","bot-"+this.botTalked),f.set("avatar",""),f.set("time",r.getTime()),a&&f.set("posted",1),window.location.href.indexOf("visitor=false")>-1&&f.set("avatar",c.config.user.avatar),u&&f.set("id",u),f.set("content",o.emjos.shortnameToImage(o.setContent(e)));var l=new i({model:f}),h=l.render().$el,p=0;h.attr("data",10086),window.location.href.indexOf("visitor=false")>-1?this.newQ?(r.addClass(h,"pubble-cw-isvisitor"),h.removeClass("pubble-cw-isadmin")):(r.addClass(h,"pubble-cw-isadmin"),h.removeClass("pubble-cw-isvisitor")):(r.addClass(h,"pubble-cw-isvisitor"),h.removeClass("pubble-cw-isadmin")),n&&r.addClass(h,"pubble-cw-panel-dialog-item-pending");var d=E(".pubble-cw-panel-dialog-item").last(),p=10086;d.length>0&&d.attr("data")==p?r.addClass(h,"pubble-cw-islast"):(r.addClass(h,"pubble-cw-isfirst"),r.addClass(h,"pubble-cw-islast")),h.attr("data",p),r.addClass(h,"pubble-cw-panel-dialog-item-justin");var v=(new Date).getTime();h.attr("timestamp",v),E(".pubble-cw-panel-dialog").append(h),h.hasClass("pubble-cw-islast")&&p==h.prev().attr("data")&&h.prev().removeClass("pubble-cw-islast");var m=E(".pubble-cw-panel-dialog");this.scrollToBottom(),t()}});return x}),window.isWindowActive=!0,window.iswindowonfocus=!0,document.addEventListener("visibilitychange",visibleChangeHandler,!1),function(e){function m(t,n){var r;return e.Notification?r=new e.Notification(t,{icon:c(n.icon)?n.icon:n.icon.x32,body:n.body||u,tag:n.tag||u}):e.webkitNotifications?(r=e.webkitNotifications.createNotification(n.icon,t,n.body),r.show()):navigator.mozNotification?(r=navigator.mozNotification.createNotification(t,n.body,n.icon),r.show()):e.external&&e.external.msIsSiteMode()&&(e.external.msSiteModeClearIconOverlay(),e.external.msSiteModeSetIconOverlay(c(n.icon)?n.icon:n.icon.x16,t),e.external.msSiteModeActivate(),r={ieVerification:f+1}),r.onclick=function(e){try{window.focus(),this.cancel()}catch(t){}},r}function g(t){return{close:function(){t&&(t.close?t.close():e.external&&e.external.msIsSiteMode()&&t.ieVerification===f&&e.external.msSiteModeClearIconOverlay())}}}function y(t){if(!a)return;var n=l(t)?t:d;e.webkitNotifications&&e.webkitNotifications.checkPermission?e.webkitNotifications.requestPermission(n):e.Notification&&e.Notification.requestPermission&&e.Notification.requestPermission(n)}function b(){var r;if(!a)return;try{return e.Notification&&e.Notification.permissionLevel?r=e.Notification.permissionLevel():e.webkitNotifications&&e.webkitNotifications.checkPermission?r=i[e.webkitNotifications.checkPermission()]:navigator.mozNotification?r=n:e.Notification&&e.Notification.permission?r=e.Notification.permission:e.external&&e.external.msIsSiteMode()!==undefined&&(r=e.external.msIsSiteMode()?n:t),r}catch(s){return}}function w(e){return e&&h(e)&&p(v,e),v}function E(){return v.pageVisibility?document.hidden||document.msHidden||document.mozHidden||document.webkitHidden:!0}function S(t,r){var i,s;return a&&E()&&c(t)&&r&&(c(r.icon)||h(r.icon))&&b()===n&&(i=m(t,r)),s=g(i),v.autoClose&&i&&!i.ieVerification&&i.addEventListener&&i.addEventListener("show",function(){var t=s;e.setTimeout(function(){t.close()},v.autoClose)}),s}var t="default",n="granted",r="denied",i=[n,t,r],s={pageVisibility:!1,autoClose:0},o={},u="",a=function(){var t=!1;try{t=!!(e.Notification||e.webkitNotifications||navigator.mozNotification||e.external&&e.external.msIsSiteMode()!==undefined)}catch(n){}return t}(),f=Math.floor(Math.random()*10+1),l=function(e){return e&&e.constructor===Function},c=function(e){return e&&e.constructor===String},h=function(e){return e&&e.constructor===Object},p=function(e,t){var n,r;for(n in t){r=t[n];if(!(n in e)||e[n]!==r&&(!(n in o)||o[n]!==r))e[n]=r}return e},d=function(){},v=s;e.notify={PERMISSION_DEFAULT:t,PERMISSION_GRANTED:n,PERMISSION_DENIED:r,isSupported:a,config:w,createNotification:S,permissionLevel:b,requestPermission:y},l(Object.seal)&&Object.seal(e.notify)}(window),pubblebot.define("desktopModule",["jQueryPB"],function(e){var e=window.jQueryPBm;e(window).blur(function(){window.iswindowonfocus=!1}),e(window).focus(function(){window.iswindowonfocus=!0});var t=function(n){var r={};r.app={},e(document).bind("app:desktop:test",function(){}),e(document).bind("app:desktop:send",function(n,i,s,o){var i=e("<div/>").html(i).text().replace("<.*?>",""),u=notify.isSupported,a=notify.permissionLevel();icon="https://www.pubble.io/resources/pubblebot/mod/img/favicon300x_64x64.png",r.app.community&&r.app.community.whitelabel&&(icon="https://www.pubble.io/resources/pubblebot/mod/img/notif_wl_ico64v2.png");if(u&&a!=notify.PERMISSION_DEFAULT&&a==notify.PERMISSION_GRANTED){t.notification={title:"You got a new notification",body:i,icon:icon},notify.config({pageVisibility:!0,autoClose:1e4});var f;if(window.isWindowActive&&window.iswindowonfocus)return!1;window.webkitNotifications?f=window.webkitNotifications.createNotification(t.notification.icon,t.notification.title,t.notification.body):window.Notification&&(f=new Notification(t.notification.title,{body:t.notification.body,icon:t.notification.icon,requireInteraction:!0,tag:o}));if(!f)return!1;f.onclick=function(){e(".pubble-cw-panel").hasClass("pubble-move")&&e(".pubble-cw-contactbot").trigger("click"),window.focus(),this.cancel?this.cancel():this.close&&this.close()}}}),e(document).bind("app:desktop:permission",function(){var e=notify.isSupported,t=notify.permissionLevel();e&&(notify.requestPermission(),t==notify.PERMISSION_DEFAULT?notify.requestPermission():t==notify.PERMISSION_GRANTED)})};return t}),pubblebot.define("app",["backbone","underscore","models/app","views/app","utils/appConfig","desktopModule"],function(e,t,n,r,i,s){var o=window.$pubbBackbone.noConflict(),u=new n,a="#PQAQ_section",f=i.get("CN");f!=null&&document.getElementById("pubble_app_"+f)!=null&&(a="#pubble_app_"+f),s();var l=new r({model:u,el:a});return l});